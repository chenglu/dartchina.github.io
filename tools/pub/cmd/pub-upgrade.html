<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en_US" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Use pub upgrade to get the latest versions of all dependencies used by your Dart application.">
  <title>pub upgrade | Dart</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/touch-icon-iphone.png" rel="apple-touch-icon">
  <link href="/assets/touch-icon-ipad.png" rel="apple-touch-icon" sizes="76x76">
  <link href="/assets/touch-icon-iphone-retina.png" rel="apple-touch-icon" sizes="120x120">
  <link href="/assets/touch-icon-ipad-retina.png" rel="apple-touch-icon" sizes="152x152">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="pub upgrade" />
  <meta name="twitter:description" content="Use pub upgrade to get the latest versions of all dependencies used by your Dart application." />

  <!-- Open Graph -->
  <meta property="og:title" content="pub upgrade" />
  <meta property="og:description" content="Use pub upgrade to get the latest versions of all dependencies used by your Dart application." />
  <meta property="og:url" content="https://www.dartlang.org/tools/pub/cmd/pub-upgrade" />
  <meta property="og:image" content="https://www.dartlang.org/assets/shared/dart-logo-for-shares.png?2" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700' rel='stylesheet' type='text/css'>
  <link type="text/css" rel="stylesheet" href="/assets/style.css">
  
  <!--
    Why don't we use Dart here?

    The only scripting we use here is stuff like the on-click footnotes on the
    front page or resizing of the left nav. These happen to be use cases where
    JavaScript and jQuery are doing just fine. Dart is here for application
    programming, not page scripting.
   -->
  <script type="text/javascript" src="/assets/main.js"></script>
  
  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


</head>

  <body class="default">
    <header id="page-header">
  <nav id="mainnav">
  <div id="menu-toggle"><i class="icon icon-menu"></i></div>
  <a href="/" class="brand" title="Dart">
    <img src="/assets/shared/dart/logo+text/horizontal/default.svg" alt="Dart">
  </a>
  <ul>
    <li class="mainnav__get-started"><a href="/guides/get-started"><span>入门</span></a></li>
    <li><a href="/guides/language">语言</a></li>
    <li><a href="/guides/libraries">库</a></li>
    <li><a href="/tools">工具</a></li>
    
    
    <li class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dart 2 <span class="caret"></span></a>
      <ul class="dropdown-menu">
        

<li><a href="https://v1-dartlang-org.firebaseapp.com/tools/pub/cmd/pub-upgrade" class="no-automatic-external">1.24.3&nbsp;&nbsp;(archive)</a></li><li><a class="active">2.0.0-dev.69.4&nbsp;&nbsp;(beta)</a></li>

        <li role="separator" class="divider"></li>
        <li><a href="/dart-2#migration">迁移指南</a></li>
      </ul>
    </li>
    
    <li class="searchfield">
      <form class="navbar-search" action="/search" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input type="search" name="q" id="q" autocomplete="off" placeholder="Search">
        <button type="submit"><i class="icon icon-search"></i></button>
      </form>
    </li>
  </ul>
</nav>

  
</header>

    <main id="page-content">
      <div id="sidenav" class="">
  <div class="content">
    <a href="/" class="brand" title="Dart">
      <img src="/assets/shared/dart/logo+text/horizontal/default.svg" alt="Dart">
    </a>

    <div class="sidenav__search">
      <p>
        <a href="/search">Search <i class="icon icon-search"></i></a>
      </p>
    </div>

    <ul>
      <li>
        <a class="btn btn-default" href="/guides/get-started">入门</a>
      </li>
    </ul>
    <h4 ><a href="/guides/language" title="语言">语言</a></h4>
  <ul><li >
          <a href="/guides/language/language-tour" title="概览">概览</a>
        </li>
        
        <li >
          <a href="/guides/language/effective-dart" title="Effective Dart">Effective Dart</a>
          <i class="icon icon-arrow"></i>
          <ul><li >
                <a href="/guides/language/effective-dart/style" title="风格">风格</a>
              </li><li >
                <a href="/guides/language/effective-dart/documentation" title="文档">文档</a>
              </li><li >
                <a href="/guides/language/effective-dart/usage" title="使用">使用</a>
              </li><li >
                <a href="/guides/language/effective-dart/design" title="设计">设计</a>
              </li>
          </ul><li >
          <a href="/samples" title="示例代码">示例代码</a>
        </li>
  </ul><h4 ><a href="/guides/libraries" title="库">库</a></h4>
  <ul><li >
          <a href="/guides/libraries/library-tour" title="概览">概览</a>
        </li>
  </ul><h4 ><a href="/guides/platforms" title="平台">平台</a></h4>
  <ul><li >
          <a href="https://flutter.io" title="移动端 (Flutter)">移动端 (Flutter)</a>
        </li><li >
          <a href="https://webdev.dartlang.org" title="web">web</a>
        </li><li >
          <a href="/dart-vm" title="服务器">服务器</a>
        </li>
  </ul><h4 ><a href="/guides/testing" title="测试">测试</a></h4>
  <ul>
  </ul><h4 >资源</h4>
  <ul><li >
          <a href="/install" title="安装">安装</a>
        </li><li >
          <a href="/codelabs" title="Codelabs">Codelabs</a>
        </li><li >
          <a href="/tutorials" title="学习指南">学习指南</a>
        </li><li >
          <a href="/articles" title="文章">文章</a>
        </li><li class="active">
          <a href="/tools" title="工具">工具</a>
        </li><li >
          <a href="/community" title="社区支持">社区支持</a>
        </li>
  </ul>
  </div>
</div>

      
<div id="toc">
  <div class="content">
    <h4>目录
      <a href="#page-content" title="Back to top" class="pull-right"><i class="icon icon-caret-up"></i></a>
    </h4>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#upgrading-specific-dependencies">Upgrading specific dependencies</a></li>
<li class="toc-entry toc-h2"><a href="#getting-a-new-dependency">Getting a new dependency</a></li>
<li class="toc-entry toc-h2"><a href="#removing-a-dependency">Removing a dependency</a></li>
<li class="toc-entry toc-h2"><a href="#upgrading-while-offline">Upgrading while offline</a></li>
<li class="toc-entry toc-h2"><a href="#options">Options</a></li>
</ul>
  </div>
</div>


      <article>
        <div class="content">
          
<div class="banner alert alert-info">
  <p class="banner__text">
    欢迎来到 <a href="/dart-2"><b>Dart 2</b></a>!
    如果您仍在使用 Dart 1.x? 可访问查阅
    <a href="https://v1-dartlang-org.firebaseapp.com" class="no-automatic-external" target="_blank" rel="noopener">存档站点</a>
    或 <a href="/dart-2#migration">迁移指南</a>.
  </p>
</div>


          

          <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">
  
    <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
      <a property="item" typeof="WebPage" href="/tools/">
      <span property="name">Tools</span>
      </a>
      <meta property="position" content="1" />
    </li>
  
    <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
      <a property="item" typeof="WebPage" href="/tools/pub/">
      <span property="name">Pub</span>
      </a>
      <meta property="position" content="2" />
    </li>
  
    <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
      <a property="item" typeof="WebPage" href="/tools/pub/cmd">
      <span property="name">Pub Commands</span>
      </a>
      <meta property="position" content="3" />
    </li>
  
    <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">
      
      <span property="name">pub upgrade</span>
      
      <meta property="position" content="4" />
    </li>
  
  </ol>
          <div>
            <ul class="page-github-links-menu" role="group">
  <li>
    <a href="https://github.com/dart-lang/site-www/tree/master/src_zh_CN/tools/pub/cmd/pub-upgrade.md"
      class="no-automatic-external"
      title="View page source"
      target="_blank" rel="noopener">
      <i class="fab fa-github fa-sm"></i>
    </a>
  </li>
  <li>
    <a href="https://github.com/dart-lang/site-www/issues/new?title='pub upgrade' page issue&body=From URL: https://www.dartlang.org/tools/pub/cmd/pub-upgrade"
      class="no-automatic-external"
      title="Report a bug on this page" target="_blank" rel="noopener">
      <i class="fas fa-bug fa-sm"></i>
    </a>
  </li>
</ul>

            <h1>pub upgrade</h1>
          </div>
          <p><em>Upgrade</em> is one of the commands of the <em>pub</em> tool.
<a href="/tools/pub">Learn more about pub</a>.</p>

<pre>$ pub upgrade [args] [dependencies]</pre>

<p>Like <a href="/tools/pub/cmd/pub-get"><code class="highlighter-rouge">pub get</code></a>,
<code class="highlighter-rouge">pub upgrade</code> gets dependencies.
The difference is that <code class="highlighter-rouge">pub upgrade</code> ignores any existing
<a href="/tools/pub/glossary#lockfile">lockfile</a>,
so that pub can get the latest versions of all dependencies.</p>

<p>Without any additional arguments, <code class="highlighter-rouge">pub upgrade</code> gets the latest
versions of all the dependencies listed in the
<a href="/tools/pub/pubspec.html"><code class="highlighter-rouge">pubspec.yaml</code></a> file in the current working
directory, as well as their <a href="/tools/pub/glossary#transitive-dependency">transitive
dependencies</a>.
For example:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> pub upgrade
<span class="go">Dependencies upgraded!
</span></code></pre></div></div>

<p>When <code class="highlighter-rouge">pub upgrade</code> upgrades dependency versions, it writes a lockfile to ensure that
<a href="/tools/pub/cmd/pub-get"><code class="highlighter-rouge">pub get</code></a> will use the same versions of those
dependencies. For application packages, check in the lockfile to
source control; this ensures the application has the exact same
versions of all dependencies for all developers and when deployed to
production. For library packages, don’t check in the lockfile,
because libraries are expected to work with a range of dependency versions.</p>

<p>If a lockfile already exists, <code class="highlighter-rouge">pub upgrade</code> ignores it and generates a new
one from scratch, using the latest versions of all dependencies.</p>

<aside class="alert alert-warning">
  <p><strong>SDK constraints and Dart 2 pre-releases:</strong>
  The pub version solver in Dart 2 pre-releases can choose package versions that
  haven’t been verified to work with Dart 2.</p>

  <p>If you find a package that has Dart 2 issues,
  please report those issues immediately to the package maintainer,
  and let the Dart community know about any workarounds you find.
  For more information, see <a href="/dart-2">Dart 2 Updates.</a></p>
</aside>

<p>See the <a href="/tools/pub/cmd/pub-get"><code class="highlighter-rouge">pub get</code> documentation</a> for more information
on package resolution and the system package cache.</p>

<aside class="alert alert-info">
  <p><strong>Note:</strong> In earlier releases of Dart, <em>pub upgrade</em> was called <em>pub update</em>.</p>
</aside>

<h2 id="upgrading-specific-dependencies">
<a id="upgrading-specific-dependencies" class="anchor" href="#upgrading-specific-dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Upgrading specific dependencies</h2>

<p>You can tell <code class="highlighter-rouge">pub upgrade</code> to upgrade specific dependencies to the
latest version while leaving the rest of the dependencies alone as much as
possible. For example:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">  $</span> pub upgrade <span class="nb">test </span>args
<span class="go">  Dependencies upgraded!
</span></code></pre></div></div>

<p>Upgrading a dependency upgrades its transitive dependencies to their latest
versions as well. Usually, no other dependencies are updated; they stay at the
versions that are locked in the lockfile. However, if the requested upgrades
cause incompatibilities with these locked versions, they are selectively
unlocked until a compatible set of versions is found.</p>

<h2 id="getting-a-new-dependency">
<a id="getting-a-new-dependency" class="anchor" href="#getting-a-new-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting a new dependency</h2>

<p>If a dependency is added to the pubspec before <code class="highlighter-rouge">pub upgrade</code> is run,
it gets the new dependency and any of its transitive dependencies,
placing them in the <code class="highlighter-rouge">.packages</code> file. This
is the same behavior as <code class="highlighter-rouge">pub get</code>.</p>

<h2 id="removing-a-dependency">
<a id="removing-a-dependency" class="anchor" href="#removing-a-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing a dependency</h2>

<p>If a dependency is removed from the pubspec before <code class="highlighter-rouge">pub upgrade</code> is
run, it removes the dependency from the <code class="highlighter-rouge">.packages</code> file,
thus making the dependency unavailable for
importing. Any transitive dependencies of the removed dependency are
also removed, as long as no remaining immediate dependencies also
depend on them. This is the same behavior as <code class="highlighter-rouge">pub get</code>.</p>

<h2 id="upgrading-while-offline">
<a id="upgrading-while-offline" class="anchor" href="#upgrading-while-offline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Upgrading while offline</h2>

<p>If you don’t have network access, you can still run <code class="highlighter-rouge">pub upgrade</code>.
Because pub downloads packages to a central cache shared by all packages
on your system, it can often find previously downloaded packages
without needing to use the network.</p>

<p>However, by default, <code class="highlighter-rouge">pub upgrade</code> tries to go online if you
have any hosted dependencies,
so that pub can detect newer versions of dependencies.
If you don’t want pub to do that, pass it the <code class="highlighter-rouge">--offline</code> flag.
In offline mode, pub looks only in your local package cache,
trying to find a set of versions that work with your package from what’s already
available.</p>

<p>Keep in mind that pub generates a lockfile. If the
only version of some dependency in your cache happens to be old,
offline <code class="highlighter-rouge">pub upgrade</code> locks your app to that old version.
The next time you are online, you will likely want to
run <code class="highlighter-rouge">pub upgrade</code> again to upgrade to a later version.</p>

<h2 id="options">
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h2>

<p>The <code class="highlighter-rouge">pub upgrade</code> command supports the
<a href="/tools/pub/cmd/pub-get#options"><code class="highlighter-rouge">pub get</code> options</a>.</p>

<p>For options that apply to all pub commands, see
<a href="/tools/pub/cmd#global-options">Global options</a>.</p>

<aside class="alert alert-info">
  <p><em>Problems?</em>
See <a href="/tools/pub/troubleshoot">Troubleshooting Pub</a>.</p>
</aside>

          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-12 col-md-3">
        <div class="content">
          <div class="brand">
            <img src="/assets/shared/dart/logo+text/horizontal/mono.svg" alt="Dart logo" class="brand"/>
          </div>
          <h4><a href="/terms">Terms</a> | <a href="https://policies.google.com/privacy">Privacy</a></h4>
          <style>.menu .material-icons { font-size: 14px; }</style><ul class="menu">
            <li>Site&nbsp;<a href="http://creativecommons.org/licenses/by/3.0/" class="no-automatic-external">CC&nbsp;BY&nbsp;3.0</a></li>
            <li>
              <a href="https://github.com/dart-lang/site-www"
                 title="This site's source is on GitHub."
                 class="no-automatic-external"><i class="fab fa-github fa-sm"></i></a>
              &nbsp;
              <a href="https://github.com/dart-lang/site-www/issues"
                 title="File an issue about this site."
                 class="no-automatic-external"><i class="fas fa-bug fa-sm"></i></a>
              &nbsp;
              <a 
                 title="Site built on 2018/08/01 15:08 CST"
                 
                 class="no-automatic-external"><i class="material-icons">build</i></a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-sm-4 col-md-3">
        <div class="content">
          <h4>技术</h4>
          <ul>
            <li><a href="https://flutter.io">Dart 移动开发 (Flutter)</a></li>
            <li><a href="https://webdev.dartlang.org">Dart web 开发</a></li>
            <li><a href="/dart-vm">Dart 服务器开发</a></li>
            <li><a href="https://dart-lang.github.io/observatory/">Observatory 工具</a></li>
            <li><a href="/guides/libraries">Dart 库</a></li>
            <li><a href="/guides/language">Dart 编程语言</a></li>
          </ul>
        </div>
      </div>

      <div class="col-sm-4 col-md-3">
        <div class="content">
          <h4>资源</h4>
          <ul>
            <li><a href="https://api.dartlang.org/dev">API 参考</a></li>
            <li><a href="https://dartpad.dartlang.org/">DartPad</a></li>
            <li><a href="https://pub.dartlang.org/">Pub packages</a></li>
            <li><a href="http://news.dartlang.org/">Dart 新闻</a></li>
            <li><a href="https://github.com/dart-lang/sdk/issues">Dart bugs 和 <br> 新需求</a></li>
          </ul>
        </div>
      </div>

      <div class="col-sm-4 col-md-3">
        <div class="content">
          <h4>社区</h4>
          <ul>
            <li><a href="/community">支持和邮件列表</a></li>
            <li><a href="/community/who-uses-dart">谁在用Dart</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a></li>
            <li>G+ <a href="https://plus.google.com/communities/114566943291919232850">社区</a> &
                <a href="https://plus.google.com/b/109866369054280216564/+dartlang">公告组</a></li>
            <li><a href="https://gitter.im/dart-lang/home">Gitter聊天室</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>
