<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en_US" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Learn about the major features in Dart's libraries.">
  <title>Dart 库概览 | Dart</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/touch-icon-iphone-a46c306c4fbfae0b28d63f512b01d7cb2ccf1e4ca9d7f3aab15ba1170beed4a0.png" rel="apple-touch-icon">
  <link href="/assets/touch-icon-ipad-d0181720760b3912858b6d40da1d5586b1e92c7c8656a485ea41005674401e6b.png" rel="apple-touch-icon" sizes="76x76">
  <link href="/assets/touch-icon-iphone-retina-3d9821a631425376ac6203dea3c23c1940ab7b5c506a25406662fab76cee2e0b.png" rel="apple-touch-icon" sizes="120x120">
  <link href="/assets/touch-icon-ipad-retina-b9715401952522f1daee2b4a4064a1bbfb5ffab78d0a47a7226dc87444d51c32.png" rel="apple-touch-icon" sizes="152x152">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="Dart 库概览" />
  <meta name="twitter:description" content="Learn about the major features in Dart's libraries." />

  <!-- Open Graph -->
  <meta property="og:title" content="Dart 库概览" />
  <meta property="og:description" content="Learn about the major features in Dart's libraries." />
  <meta property="og:url" content="https://www.dartlang.org/guides/libraries/library-tour" />
  <meta property="og:image" content="https://www.dartlang.org/assets/shared/dart-logo-for-shares.png?2" />
  <link href="https://fonts.googleapis.com/css?family=Google+Sans:300,400,500|Google+Sans+Display:400|Roboto:300,400,500|Roboto+Mono:300,400,700|Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" integrity="sha256-OYYqoMfowxw5dTtxCHxOHrDkykaDztc6SJ1qi+We+CM=" crossorigin="anonymous" href="/assets/main-39862aa0c7e8c31c39753b71087c4e1eb0e4ca4683ced73a489d6a8be59ef823.css">
  <script src="/assets/main-f7f2f2125f3c379daf0f5ca0ecf142cd2e10b030af396a510324fddb1682c5e2.js" integrity="sha256-9/LyEl88N52vD1yg7PFCzS4QsDCvOWpRAyT92xaCxeI=" crossorigin="anonymous" type="text/javascript"></script>
  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


 </head>
  <body class="default show_banner">
    <header id="page-header" class="site-header">
  <nav id="mainnav" class="site-header">
  <div id="menu-toggle"><i class="icon icon-menu"></i></div>
  <a href="/" class="brand" title="Dart">
    <img src="/assets/shared/dart/logo+text/horizontal/white-e71fb382ad5229792cc704b3ee7a88f8013e986d6e34f0956d89c453b454d0a5.svg" alt="Dart">
  </a>
  <ul class="navbar">
    <li class="mainnav__get-started">
      <a href="/guides" class="nav-link active"><span>文档</span></a>
    </li>
    <li>
      <a href="/platforms" class="nav-link">平台</a>
    </li>
    <li>
      <a href="/community" class="nav-link">社区</a>
    </li>
    <li>
      <a href="https://dartpad.cn/" target="_blank" class="nav-link no-automatic-external">体验 Dart</a>
    </li>
    <li>
      <a href="/get-dart" class="nav-link">安装 Dart</a>
    </li>
    <li>
      <a href="/about_zh_CN" class="nav-link">关于</a>
    </li>
    <li class="searchfield">
      <form action="/search" class="site-header__search form-inline" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
      </form>
    </li>
  </ul>
</nav>

  
</header>
 <div class="banner">
  <p class="banner__text">
    
    
    Dart 2.3 发布，针对构建用户界面进行了优化。
    <a class="external" href="https://medium.com/dartlang/announcing-dart-2-3-optimized-for-building-user-interfaces-e84919ca1dff">了解更多。</a>
  </p>
</div>
 

    <div id="sidenav" class="">
  <form action="/search/" class="site-header__search form-inline">
    <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
  </form>

  <div class="site-sidebar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/platforms" class="nav-link">平台</a>
      </li>
      <li class="nav-item">
        <a href="/community" class="nav-link">社区</a>
      </li>
      <li class="nav-item">
        <a href="https://dartpad.cn" class="nav-link">体验 Dart</a>
      </li>
      <li class="nav-item">
        <a href="/guides" class="nav-link active">文档</a>
      </li>
      <li>
        <a href="/about_zh_CN" class="nav-link">关于</a>
      </li>
    </ul>

    <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button"
        aria-expanded="false" aria-controls="sidenav-1"
      >示例 & 教程</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/samples">示例程序</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-1-2"
      href="#sidenav-1-2" role="button"
      aria-expanded="true" aria-controls="sidenav-1-2"
    >Codelab
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-1-2">
      <li class="nav-item">
    <a class="nav-link" href="/codelabs">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs/dart-cheatsheet">Cheatsheet Codelab</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/tutorials">教程</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-2" role="button"
        aria-expanded="false" aria-controls="sidenav-2"
      >语言</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="/guides/language/language-tour">概览</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/sound-dart">类型系统</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/spec">规范</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-2-4"
      href="#sidenav-2-4" role="button"
      aria-expanded="false" aria-controls="sidenav-2-4"
    >Effective Dart
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/style">风格</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/documentation">文档</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/usage">使用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart/design">设计</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-3" role="button"
        aria-expanded="true" aria-controls="sidenav-3"
      >核心库</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link" href="/guides/libraries">综述</a>
  </li><li class="nav-item">
    <a class="nav-link active" href="/guides/libraries/library-tour">概览</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-3"
      href="#sidenav-3-3" role="button"
      aria-expanded="false" aria-controls="sidenav-3-3"
    >文章
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/articles/libraries/dart-io">Intro to dart:io</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/articles/libraries/creating-streams">Creating streams</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button"
        aria-expanded="false" aria-controls="sidenav-4"
      >包</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/guides/packages">如何使用包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/useful-libraries">常用的包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/create-library-packages">创建包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/publishing">发布包</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-4-5"
      href="#sidenav-4-5" role="button"
      aria-expanded="false" aria-controls="sidenav-4-5"
    >引用包
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4-5">
      <li class="nav-item">
    <a class="nav-link" href="/tools/pub/dependencies">依赖</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/glossary">术语</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/package-layout">包的设计约定</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/environment-variables">Pub 环境变量</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/pubspec">Pubspec 文件</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/troubleshoot">Pub 问题分析与解决</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/versioning">版本</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button"
        aria-expanded="false" aria-controls="sidenav-5"
      >开发</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/tutorials/language/futures">Futures & Async-Await</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/json">使用 JSON</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/language/streams">Stream</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/mobile">移动应用</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-5"
      href="#sidenav-5-5" role="button"
      aria-expanded="false" aria-controls="sidenav-5-5"
    >命令行应用 & 服务应用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-5">
      <li class="nav-item">
    <a class="nav-link" href="/server">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/get-started">入门</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/cmdline">编写命令行应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/httpserver">编写 HTTP 客户端和服务端应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/c-interop">C & C++ 交互</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/libraries">库和包</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-6"
      href="#sidenav-5-6" role="button"
      aria-expanded="false" aria-controls="sidenav-5-6"
    >Web 应用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-6">
      <li class="nav-item">
    <a class="nav-link" href="/web">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/get-started">入门</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/fetch-data">动态获取数据</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-6-4"
      href="#sidenav-5-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-5-6-4"
    >底层 Web 编程
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/connect-dart-html">Dart 和 HTML 关联</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/add-elements">在 DOM 中增加 Element</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/remove-elements">在 DOM 中移除 Element</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/web/js-interop">JS/TS 交互</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/deployment">开发</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/libraries">库和包</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button"
        aria-expanded="false" aria-controls="sidenav-6"
      >工具 & 技巧</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/tools">综述</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-2"
      href="#sidenav-6-2" role="button"
      aria-expanded="false" aria-controls="sidenav-6-2"
    >编辑 & 调试
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/dart-devtools">Dart DevTool</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/dartpad">DartPad</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/jetbrains-plugin">IntelliJ & Android Studio</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">VS Code</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-3"
      href="#sidenav-6-3" role="button"
      aria-expanded="false" aria-controls="sidenav-6-3"
    >命令行工具
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-3">
      <li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-1"
      href="#sidenav-6-3-1" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-1"
    >Dart SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/tools/sdk">综述</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-vm">dart (Dart VM)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart2aot">dart2aot & dartaotruntime</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart2js">dart2js (prod JS)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartanalyzer">dartanalyzer</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartdevc">dartdevc (dev JS)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartdoc">dartdoc</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartfmt">dartfmt</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/pub/cmd">pub</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-2"
      href="#sidenav-6-3-2" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-2"
    >其他命令行工具
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/build_runner">build_runner</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/webdev">webdev</a>
  </li>
  </ul>
  </li>
</ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-4"
      href="#sidenav-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-6-4"
    >源码管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/formatting">格式化代码</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/private-files">哪些内容不应该被提交</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-5"
      href="#sidenav-6-5" role="button"
      aria-expanded="false" aria-controls="sidenav-6-5"
    >静态分析
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-5">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/analysis-options">Customizing static analysis</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/sound-problems">Fixing common type problems</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-6"
      href="#sidenav-6-6" role="button"
      aria-expanded="false" aria-controls="sidenav-6-6"
    >测试 & 优化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-6">
      <li class="nav-item">
    <a class="nav-link" href="/guides/testing">测试</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/debugging">调试 Web 应用</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-7" role="button"
        aria-expanded="false" aria-controls="sidenav-7"
      >资源</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/code-of-conduct">行为守则</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/faq">FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-7-3"
      href="#sidenav-7-3" role="button"
      aria-expanded="false" aria-controls="sidenav-7-3"
    >历史
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7-3">
      <li class="nav-item">
    <a class="nav-link" href="/dart-2">迁移到 Dart&nbsp;2</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/dart-2">迁移 Web 应用到 Dart&nbsp;2</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/obsolete">过时的 Pub 功能</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-8" role="button"
        aria-expanded="true" aria-controls="sidenav-8"
      >相关网站</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-8">
        <li class="nav-item">
    <a class="nav-link" href="https://api.dartlang.org" target="_blank" rel="noopener">API 参考<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://medium.com/dartlang" target="_blank" rel="noopener">Blog<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dartpad.cn" target="_blank" rel="noopener">DartPad (在线编辑器)<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.dev" target="_blank" rel="noopener">Flutter<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev" target="_blank" rel="noopener">Pub 包资源<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

  </div>
</div>

    <main id="page-content">
      







<div id="site-toc--side" class="site-toc ">
  <header class="site-toc__title">
    大纲
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
  </header>
  <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#dartcore---数字集合字符串等">dart:core - 数字，集合，字符串等</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#控制台打印">控制台打印</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#数字">数字</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#字符和正则表达式">字符和正则表达式</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#集合">集合</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#uri">URI</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#日期和时间">日期和时间</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#工具类">工具类</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#异常">异常</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#dartasync---异步编程">dart:async - 异步编程</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#future">Future</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#stream">Stream</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#更多内容">更多内容</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#dartmath---数学和随机数">dart:math - 数学和随机数</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#三角函数">三角函数</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#最大值和最小值">最大值和最小值</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#数学常数">数学常数</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#随机数">随机数</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#更多内容-1">更多内容</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#dartconvert---编解码jsonutf-8等">dart:convert - 编解码JSON，UTF-8等</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#编解码json">编解码JSON</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#编解码-utf-8-字符">编解码 UTF-8 字符</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#其他功能">其他功能</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#darthtml">dart:html - 基于浏览器应用</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#dom-操作">DOM 操作</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#通过-httprequest-访问-http-资源">通过 HttpRequest 访问 HTTP 资源</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#通过-websocket-发送和接收实时数据">通过 WebSocket 发送和接收实时数据</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#更多内容-2">更多内容</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#dartio">dart:io - 服务器和命令行应用程序的 I/O 。</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#文件和目录">文件和目录</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#http-客户端和服务端">HTTP 客户端和服务端</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#更多内容-3">更多内容</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#总结">总结</a></li>
</ul>
</div>


      <article>
        <div class="content">
          

          <div>
            <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/_guides/libraries/library-tour.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/dartchina/site-www-cn/issues/new?title='Dart 库概览' page issue&body=
Page URL: https://www.dartlang.org/guides/libraries/library-tour%0D%0A
Page source: https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/_guides/libraries/library-tour.md%0D%0A
%0D%0A
Found a typo? You can fix it yourself by going to the page source and clicking the pencil icon. Or finish creating this issue.%0D%0A
%0D%0A
Description of issue:" class="btn no-automatic-external" title="Report an issue with this page"
    target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

            <h1>Dart 库概览</h1>
          </div>
          







<div id="site-toc--inline" class="site-toc toc-collapsible toc-collapsed">
  <header class="site-toc__title">
    大纲
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
      <span class="site-toc--inline__toggle toc-toggle-down"><i class="fas fa-chevron-down fa-m"></i></span>
      <span class="site-toc--inline__toggle toc-toggle-up"><i class="fas fa-chevron-up fa-m"></i></span>
    
  </header>
  <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#dartcore---数字集合字符串等">dart:core - 数字，集合，字符串等</a>
<ul>
<li class="toc-entry toc-h3"><a href="#控制台打印">控制台打印</a></li>
<li class="toc-entry toc-h3"><a href="#数字">数字</a></li>
<li class="toc-entry toc-h3"><a href="#字符和正则表达式">字符和正则表达式</a></li>
<li class="toc-entry toc-h3"><a href="#集合">集合</a></li>
<li class="toc-entry toc-h3"><a href="#uri">URI</a></li>
<li class="toc-entry toc-h3"><a href="#日期和时间">日期和时间</a></li>
<li class="toc-entry toc-h3"><a href="#工具类">工具类</a></li>
<li class="toc-entry toc-h3"><a href="#异常">异常</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#dartasync---异步编程">dart:async - 异步编程</a>
<ul>
<li class="toc-entry toc-h3"><a href="#future">Future</a></li>
<li class="toc-entry toc-h3"><a href="#stream">Stream</a></li>
<li class="toc-entry toc-h3"><a href="#更多内容">更多内容</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#dartmath---数学和随机数">dart:math - 数学和随机数</a>
<ul>
<li class="toc-entry toc-h3"><a href="#三角函数">三角函数</a></li>
<li class="toc-entry toc-h3"><a href="#最大值和最小值">最大值和最小值</a></li>
<li class="toc-entry toc-h3"><a href="#数学常数">数学常数</a></li>
<li class="toc-entry toc-h3"><a href="#随机数">随机数</a></li>
<li class="toc-entry toc-h3"><a href="#更多内容-1">更多内容</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#dartconvert---编解码jsonutf-8等">dart:convert - 编解码JSON，UTF-8等</a>
<ul>
<li class="toc-entry toc-h3"><a href="#编解码json">编解码JSON</a></li>
<li class="toc-entry toc-h3"><a href="#编解码-utf-8-字符">编解码 UTF-8 字符</a></li>
<li class="toc-entry toc-h3"><a href="#其他功能">其他功能</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#darthtml">dart:html - 基于浏览器应用</a>
<ul>
<li class="toc-entry toc-h3"><a href="#dom-操作">DOM 操作</a></li>
<li class="toc-entry toc-h3"><a href="#通过-httprequest-访问-http-资源">通过 HttpRequest 访问 HTTP 资源</a></li>
<li class="toc-entry toc-h3"><a href="#通过-websocket-发送和接收实时数据">通过 WebSocket 发送和接收实时数据</a></li>
<li class="toc-entry toc-h3"><a href="#更多内容-2">更多内容</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#dartio">dart:io - 服务器和命令行应用程序的 I/O 。</a>
<ul>
<li class="toc-entry toc-h3"><a href="#文件和目录">文件和目录</a></li>
<li class="toc-entry toc-h3"><a href="#http-客户端和服务端">HTTP 客户端和服务端</a></li>
<li class="toc-entry toc-h3"><a href="#更多内容-3">更多内容</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#总结">总结</a></li>
</ul>
</div>


          <?code-excerpt plaster="none"?>

<p>本页介绍如何使用 Dart 核心库中的主要功能。这只是一个概览，并不全面。
当你需要有关类的更多详细信息时，请参阅<a href="https://api.dartlang.org/stable">Dart API 参考</a>。</p>

<dl>
  <dt><a href="#dartcore---numbers-collections-strings-and-more">dart:core</a></dt>
  <dd>内置类型，集合和其他核心功能。 
该库会被自动导入到所有的 Dart 程序。</dd>
  <dt><a href="#dartasync---asynchronous-programming">dart:async</a></dt>
  <dd>支持异步编程，包括Future和Stream等类。</dd>
  <dt><a href="#dartmath---math-and-random">dart:math</a></dt>
  <dd>数学常数和函数，以及随机数生成器。</dd>
  <dt><a href="#dartconvert---decoding-and-encoding-json-utf-8-and-more">dart:convert</a></dt>
  <dd>用于在不同数据表示之间进行转换的编码器和解码器，包括 JSON 和 UTF-8 。</dd>
  <dt><a href="#darthtml">dart:html</a></dt>
  <dd>用于基于浏览器应用的 DOM 和其他 API 。</dd>
  <dt><a href="#dartio">dart:io</a></dt>
  <dd>服务器和命令行应用程序的 I/O 操作，
包括 Flutter 应用，服务端应用，以及命令行脚本。.</dd>
</dl>

<p>本章只是一个概述；
只涵盖了几个 dart:* 库，
不包括第三方库。
特定平台库 dart:io 和 dart:html
的介绍，详见 <a href="#dartio">dart:io tour</a> 和 [dart:html tour][dart:html tour] 。</p>

<p>更多库信息可以在
<a href="https://pub.dev">Pub site</a> 和
<a href="/web/libraries">Dart web developer library guide.</a> 查找。
所有 dart:* 库的 API 文档可以在
<a href="https://api.dartlang.org/stable">Dart API reference</a> 查找， 如果使用的是 Flutter
可以在 <a href="https://api.flutter.dev">Flutter API reference.</a> 查找。</p>

<aside class="alert alert-info">
  <p><strong>DartPad tip：</strong> 可以通过将该页中的代码拷贝到 <a href="https://dartpad.cn">DartPad</a> 中进行演示。</p>
</aside>

<h2 id="dartcore---数字集合字符串等">
<a id="dartcore---数字集合字符串等" class="anchor" href="#dartcore---%E6%95%B0%E5%AD%97%E9%9B%86%E5%90%88%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AD%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart:core - 数字，集合，字符串等</h2>

<p>dart:core 库 (<a href="https://api.dartlang.org/stable/dart-core/dart-core-library.html">API reference</a>)
提供了一个少量但是重要的内置功能集合。
该库会被自动导入每个 Dart 程序。</p>

<h3 id="控制台打印">
<a id="控制台打印" class="anchor" href="#%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%89%93%E5%8D%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>控制台打印</h3>

<p>顶级 <code class="highlighter-rouge">print()</code> 方法接受一个参数 任意对象）
并输出显示这个对象的字符串值(由 <code class="highlighter-rouge">toString()</code> 返回) 
到控制台。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (print)"?>
<pre class="prettyprint lang-dart">print(anObject);
print('I drink $tea.');</pre>

<p>有关基本字符串和 <code class="highlighter-rouge">toString()</code> 的更多信息，参考
<a href="/guides/language/language-tour#strings">Strings</a> in the language tour.</p>

<h3 id="数字">
<a id="数字" class="anchor" href="#%E6%95%B0%E5%AD%97" aria-hidden="true"><span class="octicon octicon-link"></span></a>数字</h3>

<p>dart:core 库定义了 num ，int 以及 double 类，
这些类拥有一定的工具方法来处理数字。</p>

<p>使用 int 和 double 的 <code class="highlighter-rouge">parse()</code> 方法将字符串转换为整型或双浮点型对象：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (int|double.parse)"?>
<pre class="prettyprint lang-dart">assert(int.parse('42') == 42);
assert(int.parse('0x42') == 66);
assert(double.parse('0.50') == 0.5);</pre>

<p>或者使用 num 的 parse() 方法，该方法可能会创建一个整型，否则为浮点型对象：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (num-parse)"?>
<pre class="prettyprint lang-dart">assert(num.parse('42') is int);
assert(num.parse('0x42') is int);
assert(num.parse('0.50') is double);</pre>

<p>通过添加 <code class="highlighter-rouge">radix</code> 参数，指定整数的进制基数：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (radix)"?>
<pre class="prettyprint lang-dart">assert(int.parse('42', radix: 16) == 66);</pre>

<p>使用 <code class="highlighter-rouge">toString()</code> 方法将整型或双精度浮点类型转换为字符串类型。
使用 <a href="https://api.dartlang.org/stable/dart-core/num/toStringAsFixed.html">toStringAsFixed().</a> 指定小数点右边的位数，
使用 <a href="https://api.dartlang.org/stable/dart-core/num/toStringAsPrecision.html">toStringAsPrecision():</a> 指定字符串中的有效数字的位数。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (toString())"?>
<pre class="prettyprint lang-dart">// 整型转换为字符串类型。
assert(42.toString() == '42');

// 双浮点型转换为字符串类型。
assert(123.456.toString() == '123.456');

// 指定小数点后的位数。
assert(123.456.toStringAsFixed(2) == '123.46');

// 指定有效数字的位数。
assert(123.456.toStringAsPrecision(2) == '1.2e+2');
assert(double.parse('1.2e+2') == 120.0);</pre>

<p>更多详情， 参考
<a href="https://api.dartlang.org/stable/dart-core/int-class.html">int，</a> <a href="https://api.dartlang.org/stable/dart-core/double-class.html">double，</a> 和 <a href="https://api.dartlang.org/stable/dart-core/num-class.html">num</a> 的相关 API 文档。
也可参考 <a href="#dartmath---math-and-random">dart:math section</a>。</p>

<h3 id="字符和正则表达式">
<a id="字符和正则表达式" class="anchor" href="#%E5%AD%97%E7%AC%A6%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>字符和正则表达式</h3>

<p>在 Dart 中一个字符串是一个固定不变的 UTF-16 编码单元序列。
语言概览中有更多关于 <a href="/guides/language/language-tour#strings">strings</a> 的内容。
使用正则表达式 (RegExp 对象) 可以在字符串内搜索和替换部分字符串。</p>

<p>String 定义了例如 <code class="highlighter-rouge">split()</code>， <code class="highlighter-rouge">contains()</code>，
<code class="highlighter-rouge">startsWith()</code>， <code class="highlighter-rouge">endsWith()</code> 等方法。</p>

<h4 id="在字符串中搜索">在字符串中搜索</h4>

<p>可以在字符串内查找特定字符串的位置，
以及检查字符串是否以特定字符串作为开头或结尾。例如：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (contains-etc)"?>
<pre class="prettyprint lang-dart">// 检查一个字符串是否包含另一个字符串。
assert('Never odd or even'.contains('odd'));

// 一个字符串是否以另一个字符串为开头?
assert('Never odd or even'.startsWith('Never'));

// 一个字符串是否以另一个字符串为结尾?
assert('Never odd or even'.endsWith('even'));

// 查找一个字符串在另一个字符串中的位置。
assert('Never odd or even'.indexOf('odd') == 6);</pre>

<h4 id="从字符串中提取数据">从字符串中提取数据</h4>

<p>可以获取字符串中的单个字符，将其作为字符串或者整数。
确切地说，实际上获取的是单独的UTF-16编码单元;
诸如高音谱号符号 (‘\u{1D11E}’) 之类的高编号字符分别为两个编码单元。</p>

<p>你也可以获取字符串中的子字符串或者将一个字符串分割为子字符串列表：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (substring-etc)"?>
<pre class="prettyprint lang-dart">// 抓取一个子字符串。
assert('Never odd or even'.substring(6, 9) == 'odd');

// 使用字符串模式分割字符串。
var parts = 'structured web apps'.split(' ');
assert(parts.length == 3);
assert(parts[0] == 'structured');

// 通过下标获取 UTF-16 编码单元（编码单元作为字符串）。
assert('Never odd or even'[0] == 'N');

// 使用 split() 传入一个空字符串参数，
// 得到一个所有字符的 list 集合；
// 有助于字符迭代。
for (var char in 'hello'.split('')) {
  print(char);
}

// 获取一个字符串的所有 UTF-16 编码单元。
var codeUnitList =
    'Never odd or even'.codeUnits.toList();
assert(codeUnitList[0] == 78);</pre>

<h4 id="首字母大小写转换">首字母大小写转换</h4>

<p>可以轻松的对字符串的首字母大小写进行转换：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (toUpperCase-toLowerCase)"?>
<pre class="prettyprint lang-dart">// 转换为首字母大写。
assert('structured web apps'.toUpperCase() ==
    'STRUCTURED WEB APPS');

// 转换为首字母小写。
assert('STRUCTURED WEB APPS'.toLowerCase() ==
    'structured web apps');</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
这些方法不是在所有语言上都有效的。例如，
土耳其字母表的无点 <em>I</em> 转换是不正确的。</p>
</div>

<h4 id="trimming-和空字符串">Trimming 和空字符串</h4>

<p>使用 <code class="highlighter-rouge">trim()</code> 移除首尾空格。
使用 <code class="highlighter-rouge">isEmpty</code> 检查一个字符串是否为空（长度为0）。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (trim-etc)"?>
<pre class="prettyprint lang-dart">// Trim a string.
assert('  hello  '.trim() == 'hello');

// 检查字符串是否为空。
assert(''.isEmpty);

// 空格字符串不是空字符串。
assert('  '.isNotEmpty);</pre>

<h4 id="替换部分字符串">替换部分字符串</h4>

<p>字符串是不可变的对象，也就是说字符串可以创建但是不能被修改。
如果仔细阅读了 <a href="https://api.dartlang.org/stable/dart-core/String-class.html">String API docs,</a>
你会注意到，没有一个方法实际的改变了字符串的状态。
例如，方法 <code class="highlighter-rouge">replaceAll()</code> 返回一个新字符串，
并没有改变原始字符串：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (replace)"?>
<pre class="prettyprint lang-dart">var greetingTemplate = 'Hello, NAME!';
var greeting =
    greetingTemplate.replaceAll(RegExp('NAME'), 'Bob');

// greetingTemplate 没有改变。
assert(greeting != greetingTemplate);</pre>

<h4 id="构建一个字符串">构建一个字符串</h4>

<p>要以代码方式生成字符串，可以使用 StringBuffer 。
在调用 <code class="highlighter-rouge">toString()</code> 之前， StringBuffer 不会生成新字符串对象。
<code class="highlighter-rouge">writeAll()</code> 的第二个参数为可选参数，用来指定分隔符，
本例中使用空格作为分隔符。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (StringBuffer)"?>
<pre class="prettyprint lang-dart">var sb = StringBuffer();
sb
  ..write('Use a StringBuffer for ')
  ..writeAll(['efficient', 'string', 'creation'], ' ')
  ..write('.');

var fullString = sb.toString();

assert(fullString ==
    'Use a StringBuffer for efficient string creation.');</pre>

<h4 id="正则表达式">正则表达式</h4>

<p>RegExp类提供与JavaScript正则表达式相同的功能。
使用正则表达式可以对字符串进行高效搜索和模式匹配。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (RegExp)"?>
<pre class="prettyprint lang-dart">// 下面正则表达式用于匹配一个或多个数字。
var numbers = RegExp(r'\d+');

var allCharacters = 'llamas live fifteen to twenty years';
var someDigits = 'llamas live 15 to 20 years';

// contains() 能够使用正则表达式。
assert(!allCharacters.contains(numbers));
assert(someDigits.contains(numbers));

// 替换所有匹配对象为另一个字符串。
var exedOut = someDigits.replaceAll(numbers, 'XX');
assert(exedOut == 'llamas live XX to XX years');</pre>

<p>你也可以直接使用RegExp类。
Match 类提供对正则表达式匹配对象的访问。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (match)"?>
<pre class="prettyprint lang-dart">var numbers = RegExp(r'\d+');
var someDigits = 'llamas live 15 to 20 years';

// 检查正则表达式是否在字符串中匹配到对象。
assert(numbers.hasMatch(someDigits));

// 迭代所有匹配对象
for (var match in numbers.allMatches(someDigits)) {
  print(match.group(0)); // 15, then 20
}</pre>

<h4 id="更多信息">更多信息</h4>

<p>有关完整的方法列表，
请参考 <a href="https://api.dartlang.org/stable/dart-core/String-class.html">String API docs</a>。
另请参考 <a href="https://api.dartlang.org/stable/dart-core/StringBuffer-class.html">StringBuffer，</a>
<a href="https://api.dartlang.org/stable/dart-core/Pattern-class.html">Pattern，</a> <a href="https://api.dartlang.org/stable/dart-core/RegExp-class.html">RegExp，</a> 和 <a href="https://api.dartlang.org/stable/dart-core/Match-class.html">Match</a>
的 API 文档。</p>

<h3 id="集合">
<a id="集合" class="anchor" href="#%E9%9B%86%E5%90%88" aria-hidden="true"><span class="octicon octicon-link"></span></a>集合</h3>

<p>Dart 附带了核心集合 API ，其中包括 list ，set 和 map 类。</p>

<h4 id="lists">Lists</h4>

<p>如语言概览中介绍，<a href="#lists">lists</a> 可以通过字面量来创建和初始化。
另外，也可以使用 List 的构造函数。
List 类还定义了若干方法，用于向列表添加或删除项目。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (List)"?>
<pre class="prettyprint lang-dart">// 使用 List 构造函数。
var vegetables = List();

// 或者仅使用一个 list 字面量。
var fruits = ['apples', 'oranges'];

// 添加一个元素到 list 对象。
fruits.add('kiwis');

// 添加多个元素到 list 对象。
fruits.addAll(['grapes', 'bananas']);

// 获取 list 长度。
assert(fruits.length == 5);

// 移除一个元素到 list 对象。
var appleIndex = fruits.indexOf('apples');
fruits.removeAt(appleIndex);
assert(fruits.length == 4);

// 移除多个元素到 list 对象。
fruits.clear();
assert(fruits.length == 0);</pre>

<p>使用 <code class="highlighter-rouge">indexOf()</code> 方法查找一个对象在 list 中的下标值。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (indexOf)"?>
<pre class="prettyprint lang-dart">var fruits = ['apples', 'oranges'];

// 使用下标访问 list 中的元素
assert(fruits[0] == 'apples');

// 查找一个元素在 list 中的下标。
assert(fruits.indexOf('apples') == 0);</pre>

<p>使用 <code class="highlighter-rouge">sort()</code> 方法排序一个 list 。
你可以提供一个排序函数用于比较两个对象。
比较函数在 <em>小于</em> 时返回 \ &lt;0，<em>相等</em> 时返回 0，<em>bigger</em> 时返回 &gt; 0 。
下面示例中使用 <code class="highlighter-rouge">compareTo()</code> 函数，
该函数在 <a href="https://api.dartlang.org/stable/dart-core/Comparable-class.html">Comparable</a> 中定义，
并被 String 类实现。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (compareTo)"?>
<pre class="prettyprint lang-dart">var fruits = ['bananas', 'apples', 'oranges'];

// 排序一个 list 。
fruits.sort((a, b) =&gt; a.compareTo(b));
assert(fruits[0] == 'apples');</pre>

<p>list 是参数化类型，
因此可以指定 list 应该包含的元素类型：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (ListOfString)"?>
<pre class="prettyprint lang-dart">// 这个 list 只能包含字符串类型。
var fruits = List&lt;String&gt;();

fruits.add('apples');
var fruit = fruits[0];
assert(fruit is String);

// 产生静态分析警告，num 不是字符串类型。
fruits.add(5); // BAD: Throws exception in checked mode.</pre>

<?code-excerpt "misc/lib/library_tour/core/collections.dart (List-of-String)"?>
<pre class="prettyprint lang-dart fails-sa">fruits.add(5); // Error: 'int' can't be assigned to 'String'</pre>

<p>全部的方法介绍 ，请参考 <a href="https://api.dartlang.org/stable/dart-core/List-class.html">List API docs</a> 。</p>

<h4 id="sets">Sets</h4>

<p>在 Dart 中，set 是一个无序的，元素唯一的集合。
因为一个 set 是无序的，所以无法通过下标（位置）获取 set 中的元素。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (Set)"?>
<pre class="prettyprint lang-dart">var ingredients = Set();
ingredients.addAll(['gold', 'titanium', 'xenon']);
assert(ingredients.length == 3);

// 添加一个重复的元素是无效的。
ingredients.add('gold');
assert(ingredients.length == 3);

// 从 set 中移除一个元素。
ingredients.remove('gold');
assert(ingredients.length == 2);</pre>

<p>使用 <code class="highlighter-rouge">contains()</code> 和 <code class="highlighter-rouge">containsAll()</code> 来检查一个或多个元素是否在 set 中。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (contains)"?>
<pre class="prettyprint lang-dart">var ingredients = Set();
ingredients.addAll(['gold', 'titanium', 'xenon']);

// 检查一个元素是否在该 set 中。
assert(ingredients.contains('titanium'));

// 检查多个元素是否在该 set 中。
assert(ingredients.containsAll(['titanium', 'xenon']));</pre>

<p>交集是另外两个 set 中的公共元素组成的 set 。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (intersection)"?>
<pre class="prettyprint lang-dart">var ingredients = Set();
ingredients.addAll(['gold', 'titanium', 'xenon']);

// 创建两个 set 的交集。
var nobleGases = Set.from(['xenon', 'argon']);
var intersection = ingredients.intersection(nobleGases);
assert(intersection.length == 1);
assert(intersection.contains('xenon'));</pre>

<p>全部的方法介绍 ，请参考 <a href="https://api.dartlang.org/stable/dart-core/Set-class.html">Set API docs</a> 。</p>

<h4 id="maps">Maps</h4>

<p>map 是一个无序的 key-value （键值对）集合，就是大家熟知的 <em>dictionary</em> 或者 <em>hash</em>。
map 将 kay 与 value 关联，以便于检索。和 JavaScript 不同，Dart 对象不是 map 。</p>

<p>声明 map 可以使用简洁的字面量语法，也可以使用传统构造函数：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (Map)"?>
<pre class="prettyprint lang-dart">// map 通常使用字符串作为 key。
var hawaiianBeaches = {
  'Oahu': ['Waikiki', 'Kailua', 'Waimanalo'],
  'Big Island': ['Wailea Bay', 'Pololu Beach'],
  'Kauai': ['Hanalei', 'Poipu']
};

// map 可以通过构造函数构建。
var searchTerms = Map();

// map 是参数化类型；
// 可以指定一个 map 中 key 和 value 的类型。
var nobleGases = Map&lt;int, String&gt;();</pre>

<p>通过大括号语法可以为 map 添加，获取，设置元素。
使用 <code class="highlighter-rouge">remove()</code> 方法从 map 中移除键值对。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (remove)"?>
<pre class="prettyprint lang-dart">var nobleGases = {54: 'xenon'};

// 使用 key 检索 value 。
assert(nobleGases[54] == 'xenon');

// 检查 map 是否包含 key 。
assert(nobleGases.containsKey(54));

// 移除一个 key 及其 value。
nobleGases.remove(54);
assert(!nobleGases.containsKey(54));</pre>

<p>可以从一个 map 中检索出所有的 key 或所有的 value：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (keys)"?>
<pre class="prettyprint lang-dart">var hawaiianBeaches = {
  'Oahu': ['Waikiki', 'Kailua', 'Waimanalo'],
  'Big Island': ['Wailea Bay', 'Pololu Beach'],
  'Kauai': ['Hanalei', 'Poipu']
};

// 获取的所有的 key 是一个无序集合
// (可迭代 list 对象)。
var keys = hawaiianBeaches.keys;

assert(keys.length == 3);
assert(Set.from(keys).contains('Oahu'));

// 获取的所有的 value 是一个无序集合
// (可迭代 list 对象).
var values = hawaiianBeaches.values;
assert(values.length == 3);
assert(values.any((v) =&gt; v.contains('Waikiki')));</pre>

<p>使用 <code class="highlighter-rouge">containsKey()</code> 方法检查一个 map 中是否包含某个key 。
因为 map 中的 value 可能会是 null ，
所有通过 key 获取 value，并通过判断 value 是否为 null 来判断 key 是否存在是不可靠的。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (containsKey)"?>
<pre class="prettyprint lang-dart">var hawaiianBeaches = {
  'Oahu': ['Waikiki', 'Kailua', 'Waimanalo'],
  'Big Island': ['Wailea Bay', 'Pololu Beach'],
  'Kauai': ['Hanalei', 'Poipu']
};

assert(hawaiianBeaches.containsKey('Oahu'));
assert(!hawaiianBeaches.containsKey('Florida'));</pre>

<p>如果当且仅当该 key 不存在于 map 中，且要为这个 key 赋值，
可使用<code class="highlighter-rouge">putIfAbsent（）</code>方法。
该方法需要一个方法返回这个 value 。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (putIfAbsent)"?>
<pre class="prettyprint lang-dart">var teamAssignments = {};
teamAssignments.putIfAbsent(
    'Catcher', () =&gt; pickToughestKid());
assert(teamAssignments['Catcher'] != null);</pre>

<p>全部的方法介绍 ，请参考 <a href="https://api.dartlang.org/stable/dart-core/Map-class.html">Map API docs</a> 。</p>

<h4 id="公共集合方法">公共集合方法</h4>

<p>List, Set, 和 Map 共享许多集合中的常用功能。
其中一些常见功能由 Iterable 类定义，
这些函数由 List 和 Set 实现。</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
虽然Map没有实现 Iterable，
但可以使用 Map <code class="highlighter-rouge">keys</code> 和 <code class="highlighter-rouge">values</code> 属性从中获取 Iterable 对象。</p>
</div>

<p>使用 <code class="highlighter-rouge">isEmpty</code> 和 <code class="highlighter-rouge">isNotEmpty</code> 方法可以检查 list， set 或 map 对象中是否包含元素：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (isEmpty)"?>
<pre class="prettyprint lang-dart">var coffees = [];
var teas = ['green', 'black', 'chamomile', 'earl grey'];
assert(coffees.isEmpty);
assert(teas.isNotEmpty);</pre>

<p>使用 <code class="highlighter-rouge">forEach()</code> 可以让 list， set 或 map 对象中的每个元素都使用一个方法。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (List.forEach)"?>
<pre class="prettyprint lang-dart">var teas = ['green', 'black', 'chamomile', 'earl grey'];

teas.forEach((tea) =&gt; print('I drink $tea'));</pre>

<p>当在 map 对象上调用 `forEach() 方法时，函数必须带两个参数（key 和 value）：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (Map.forEach)"?>
<pre class="prettyprint lang-dart">hawaiianBeaches.forEach((k, v) {
  print('I want to visit $k and swim at $v');
  // 我想去瓦胡岛并且在
  // [Waikiki, Kailua, Waimanalo]游泳， 等等。
});</pre>

<p>Iterable 提供 <code class="highlighter-rouge">map()</code> 方法，这个方法将所有结果返回到一个对象中。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (List.map)"?>
<pre class="prettyprint lang-dart">var teas = ['green', 'black', 'chamomile', 'earl grey'];

var loudTeas = teas.map((tea) =&gt; tea.toUpperCase());
loudTeas.forEach(print);</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
<code class="highlighter-rouge">map()</code> 方法返回的对象是一个 <em>懒求值（lazily evaluated）</em>对象：
只有当访问对象里面的元素时，函数才会被调用。</p>
</div>

<p>使用 <code class="highlighter-rouge">map().toList()</code> 或 <code class="highlighter-rouge">map().toSet()</code> ，
可以强制在每个项目上立即调用函数。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (toList)"?>
<pre class="prettyprint lang-dart">var loudTeas =
    teas.map((tea) =&gt; tea.toUpperCase()).toList();</pre>

<p>使用 Iterable 的 <code class="highlighter-rouge">where()</code> 方法可以获取所有匹配条件的元素。
使用 Iterable 的 <code class="highlighter-rouge">any()</code> 和 <code class="highlighter-rouge">every()</code> 方法可以检查部分或者所有元素是否匹配某个条件。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (where-etc)"?>
<pre class="prettyprint lang-dart">var teas = ['green', 'black', 'chamomile', 'earl grey'];

// 洋甘菊不含咖啡因。
bool isDecaffeinated(String teaName) =&gt;
    teaName == 'chamomile';

// 使用 where() 来查找元素，
// 这些元素在给定的函数中返回 true 。
var decaffeinatedTeas =
    teas.where((tea) =&gt; isDecaffeinated(tea));
// 或者 teas.where(isDecaffeinated)

// 使用 any() 来检查集合中是否至少有一个元素满足条件。
assert(teas.any(isDecaffeinated));

// 使用 every() 来检查集合中是否所有元素满足条件。
assert(!teas.every(isDecaffeinated));</pre>

<p>有关方法的完整列表，请参考 <a href="https://api.dartlang.org/stable/dart-core/Iterable-class.html">Iterable API docs,</a> 以及
<a href="https://api.dartlang.org/stable/dart-core/List-class.html">List,</a> <a href="https://api.dartlang.org/stable/dart-core/Set-class.html">Set,</a> and <a href="https://api.dartlang.org/stable/dart-core/Map-class.html">Map.</a></p>

<h3 id="uri">
<a id="uri" class="anchor" href="#uri" aria-hidden="true"><span class="octicon octicon-link"></span></a>URI</h3>

<p>在使用 URI（可能你会称它为 <em>URLs</em>） 时，<a href="https://api.dartlang.org/stable/dart-core/Uri-class.html">Uri 类</a> 提供对字符串的编解码操作。
这些函数用来处理 URI 特有的字符，例如 <code class="highlighter-rouge">＆</code> 和 <code class="highlighter-rouge">=</code> 。
Uri 类还可以解析和处理 URI—host，port，scheme等组件。</p>

<h4 id="编码和解码完整合法的uri">编码和解码完整合法的URI</h4>

<p>使用 <code class="highlighter-rouge">encodeFull()</code> 和 <code class="highlighter-rouge">decodeFull()</code> 方法，
对 URI 中除了特殊字符（例如 <code class="highlighter-rouge">/</code>， <code class="highlighter-rouge">:</code>， <code class="highlighter-rouge">&amp;</code>， <code class="highlighter-rouge">#</code>）以外的字符进行编解码，
这些方法非常适合编解码完整合法的 URI，并保留 URI 中的特殊字符。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (encodeFull)"?>
<pre class="prettyprint lang-dart">var uri = 'http://example.org/api?foo=some message';

var encoded = Uri.encodeFull(uri);
assert(encoded ==
    'http://example.org/api?foo=some%20message');

var decoded = Uri.decodeFull(encoded);
assert(uri == decoded);</pre>

<p>注意上面代码只编码了 <code class="highlighter-rouge">some</code> 和 <code class="highlighter-rouge">message</code> 之间的空格。</p>

<h4 id="编码和解码-uri-组件">编码和解码 URI 组件</h4>

<p>使用 <code class="highlighter-rouge">encodeComponent()</code> 和 <code class="highlighter-rouge">decodeComponent()</code> 方法，
对 URI 中具有特殊含义的所有字符串字符，特殊字符包括（但不限于）<code class="highlighter-rouge">/</code>， <code class="highlighter-rouge">&amp;</code>， 和  <code class="highlighter-rouge">:</code>。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (encodeComponent)"?>
<pre class="prettyprint lang-dart">var uri = 'http://example.org/api?foo=some message';

var encoded = Uri.encodeComponent(uri);
assert(encoded ==
    'http%3A%2F%2Fexample.org%2Fapi%3Ffoo%3Dsome%20message');

var decoded = Uri.decodeComponent(encoded);
assert(uri == decoded);</pre>

<p>注意上面代码编码了所有的字符。例如 <code class="highlighter-rouge">/</code> 被编码为 <code class="highlighter-rouge">%2F</code>。</p>

<h4 id="解析-uri">解析 URI</h4>

<p>使用 Uri 对象的字段（例如 <code class="highlighter-rouge">path</code>），
来获取一个 Uri 对象或者 URI 字符串的一部分。
使用 <code class="highlighter-rouge">parse()</code> 静态方法，可以使用字符串创建 Uri 对象。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (Uri.parse)"?>
<pre class="prettyprint lang-dart">var uri =
    Uri.parse('http://example.org:8080/foo/bar#frag');

assert(uri.scheme == 'http');
assert(uri.host == 'example.org');
assert(uri.path == '/foo/bar');
assert(uri.fragment == 'frag');
assert(uri.origin == 'http://example.org:8080');</pre>

<p>有关 URI 组件的更多内容，参考 <a href="https://api.dartlang.org/stable/dart-core/Uri-class.html">Uri API docs</a> 。</p>

<h4 id="构建-uri">构建 URI</h4>

<p>使用 <code class="highlighter-rouge">Uri()</code> 构造函数，可以将各组件部分构建成 URI 。</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (Uri)"?>
<pre class="prettyprint lang-dart">var uri = Uri(
    scheme: 'http',
    host: 'example.org',
    path: '/foo/bar',
    fragment: 'frag');
assert(
    uri.toString() == 'http://example.org/foo/bar#frag');</pre>

<h3 id="日期和时间">
<a id="日期和时间" class="anchor" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>日期和时间</h3>

<p>DateTime 对象代表某个时刻，时区可以是 UTC 或者 本地时区。</p>

<p>DateTime 对象可以通过若干构造函数创建：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (DateTime)"?>
<pre class="prettyprint lang-dart">// 获取当前时刻。
var now = DateTime.now();

// 更具本地时区创建 DateTime 对象。
var y2k = DateTime(2000); // January 1, 2000

// 指定年月日。
y2k = DateTime(2000, 1, 2); // January 2, 2000

// 将日期指定为 UTC 时区。
y2k = DateTime.utc(2000); // 1/1/2000, UTC

// 指定自Unix纪元以来，以毫秒为单位的日期和时间。
y2k = DateTime.fromMillisecondsSinceEpoch(946684800000,
    isUtc: true);

// 解析ISO 8601日期。
y2k = DateTime.parse('2000-01-01T00:00:00Z');</pre>

<p>日期中 <code class="highlighter-rouge">millisecondsSinceEpoch</code> 属性返回自 “Unix纪元（January 1, 1970, UTC）“以来的毫秒数：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (millisecondsSinceEpoch)"?>
<pre class="prettyprint lang-dart">// 1/1/2000, UTC
var y2k = DateTime.utc(2000);
assert(y2k.millisecondsSinceEpoch == 946684800000);

// 1/1/1970, UTC
var unixEpoch = DateTime.utc(1970);
assert(unixEpoch.millisecondsSinceEpoch == 0);</pre>

<p>使用 Duration 类来计算两个日期的查，也可以对时刻进行前移和后移操作：</p>

<?code-excerpt "misc/test/library_tour/core_test.dart (Duration)"?>
<pre class="prettyprint lang-dart">var y2k = DateTime.utc(2000);

// 增加一年。
var y2001 = y2k.add(const Duration(days: 366));
assert(y2001.year == 2001);

// 减少30天。
var december2000 =
    y2001.subtract(const Duration(days: 30));
assert(december2000.year == 2000);
assert(december2000.month == 12);

// 计算两个时刻之间的查，
// 返回 Duration 对象。
var duration = y2001.difference(y2k);
assert(duration.inDays == 366); // y2k was a leap year.</pre>

<div class="alert alert-warning">
  <p><strong>警告：</strong>
由于时钟转换（例如，夏令时）的原因，
使用 Duration 对 DateTime 按天移动可能会有问题。 
如果要按照天数来位移时间，请使用 UTC 日期。</p>
</div>

<p>参考 <a href="https://api.dartlang.org/stable/dart-core/DateTime-class.html">DateTime</a> 和 <a href="https://api.dartlang.org/stable/dart-core/Duration-class.html">Duration</a> API 文档了解全部方法列表。</p>

<h3 id="工具类">
<a id="工具类" class="anchor" href="#%E5%B7%A5%E5%85%B7%E7%B1%BB" aria-hidden="true"><span class="octicon octicon-link"></span></a>工具类</h3>

<p>核心库包含各种工具类，可用于排序，映射值以及迭代。</p>

<h4 id="比较对象">比较对象</h4>

<p>如果实现了 <a href="https://api.dartlang.org/stable/dart-core/Comparable-class.html">Comparable</a> 接口，
也就是说可以将该对象与另一个对象进行比较，
通常用于排序。
<code class="highlighter-rouge">compareTo()</code> 方法在 <em>小于</em> 时返回 &lt; 0，
在 <em>相等</em> 时返回 0，
在 <em>大于</em> 时返回  &gt; 0。</p>

<?code-excerpt "misc/lib/library_tour/core/comparable.dart"?>
<pre class="prettyprint lang-dart">class Line implements Comparable&lt;Line&gt; {
  final int length;
  const Line(this.length);

  @override
  int compareTo(Line other) =&gt; length - other.length;
}

void main() {
  var short = const Line(1);
  var long = const Line(100);
  assert(short.compareTo(long) &lt; 0);
}</pre>

<h4 id="implementing-map-keys">Implementing map keys</h4>

<p>在 Dart 中每个对象会默认提供一个整数的哈希值，
因此在 map 中可以作为 key 来使用，
重写 <code class="highlighter-rouge">hashCode</code> 的 getter 方法来生成自定义哈希值。
如果重写 <code class="highlighter-rouge">hashCode</code> 的 getter 方法，那么可能还需要重写 <code class="highlighter-rouge">==</code> 运算符。
相等的（通过 <code class="highlighter-rouge">==</code> ）对象必须拥有相同的哈希值。
哈希值并不要求是唯一的， 但是应该具有良好的分布形态。。</p>

<?code-excerpt "misc/lib/library_tour/core/hash_code.dart"?>
<pre class="prettyprint lang-dart">class Person {
  final String firstName, lastName;

  Person(this.firstName, this.lastName);

  // 重写 hashCode，实现策略源于  Effective Java，
  // 第11章。
  @override
  int get hashCode {
    int result = 17;
    result = 37 * result + firstName.hashCode;
    result = 37 * result + lastName.hashCode;
    return result;
  }

  // 如果重写了 hashCode，通常应该从新实现 == 操作符。
  @override
  bool operator ==(dynamic other) {
    if (other is! Person) return false;
    Person person = other;
    return (person.firstName == firstName &amp;&amp;
        person.lastName == lastName);
  }
}

void main() {
  var p1 = Person('Bob', 'Smith');
  var p2 = Person('Bob', 'Smith');
  var p3 = 'not a person';
  assert(p1.hashCode == p2.hashCode);
  assert(p1 == p2);
  assert(p1 != p3);
}</pre>

<h4 id="迭代">迭代</h4>

<p>Iterable][] 和 <a href="https://api.dartlang.org/stable/dart-core/Iterator-class.html">Iterator</a> 类支持 for-in 循环。
当创建一个类的时候，继承或者实现 Iterable，可以为该类提供用于 for-in 循环的 Iterators。
实现 Iterator 来定义实际的遍历操作。</p>

<?code-excerpt "misc/lib/library_tour/core/iterator.dart"?>
<pre class="prettyprint lang-dart">class Process {
  // Represents a process...
}

class ProcessIterator implements Iterator&lt;Process&gt; {
  @override
  Process get current =&gt; ...
  @override
  bool moveNext() =&gt; ...
}

// A mythical class that lets you iterate through all
// processes. Extends a subclass of [Iterable].
class Processes extends IterableBase&lt;Process&gt; {
  @override
  final Iterator&lt;Process&gt; iterator = ProcessIterator();
}

void main() {
  // Iterable objects can be used with for-in.
  for (var process in Processes()) {
    // Do something with the process.
  }
}</pre>

<h3 id="异常">
<a id="异常" class="anchor" href="#%E5%BC%82%E5%B8%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>异常</h3>

<p>Dart 核心库定义了很多公共的异常和错误类。
异常通常是一些可以预见和预知的情况。
错误是无法预见或者预防的情况。</p>

<p>两个最常见的错误：</p>

<dl>
  <dt><a href="https://api.dartlang.org/stable/dart-core/NoSuchMethodError-class.html">NoSuchMethodError</a></dt>
  <dd>
    <p>当方法的接受对象（可能为null）没有实现该方法时抛出。</p>
  </dd>
  <dt><a href="https://api.dartlang.org/stable/dart-core/ArgumentError-class.html">ArgumentError</a></dt>
  <dd>
    <p>当方法在接受到一个不合法参数时抛出。</p>
  </dd>
</dl>

<p>通常通过抛出一个应用特定的异常，来表示应用发生了错误。
通过实现 Exception 接口来自定义异常。</p>

<?code-excerpt "misc/lib/library_tour/core/exception.dart"?>
<pre class="prettyprint lang-dart">class FooException implements Exception {
  final String msg;

  const FooException([this.msg]);

  @override
  String toString() =&gt; msg ?? 'FooException';
}</pre>

<p>更多内容，参考 <a href="#exceptions">Exceptions</a> 以及 <a href="https://api.dartlang.org/stable/dart-core/Exception-class.html">Exception API 文档。</a></p>

<h2 id="dartasync---异步编程">
<a id="dartasync---异步编程" class="anchor" href="#dartasync---%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart:async - 异步编程</h2>

<p>异步编程通常使用回调方法来实现，但是 Dart
提供了其他方案：<a href="https://api.dartlang.org/stable/dart-async/Future-class.html">Future</a> 和 <a href="https://api.dartlang.org/stable/dart-async/Stream-class.html">Stream</a> 对象。
Future 类似与 JavaScript 中的 Promise ，
代表在将来某个时刻会返回一个结果。
Stream 类可以用来获取一系列的值，比如，一些列事件。
Future， Stream，以及更多内容，参考
dart:async library (<a href="https://api.dartlang.org/stable/dart-async/dart-async-library.html">API reference</a>)。</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
你并不总是需要直接使用 Future 或 Stream 的 API。
Dart 语言支持使用关键字（例如，<code class="highlighter-rouge">async</code> 和 <code class="highlighter-rouge">await</code> ）来实现异步编程。
更多详情，参考语言概览中 <a href="/guides/language/language-tour#asynchrony-support">Asynchrony support</a>。</p>
</div>

<p>dart:async 库可以工作在 web 应用及 command-line 应用。
通过 import dart:async 来使用。</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (import)"?>
<pre class="prettyprint lang-dart">import 'dart:async';</pre>

<aside class="alert alert-info">
  <p><strong>版本提示：</strong>
  从 Dart 2.1 开始，使用 Future 和 Stream 不需要导入 dart:async ，
  因为 dart:core 库 export 了这些类。</p>
</aside>

<h3 id="future">
<a id="future" class="anchor" href="#future" aria-hidden="true"><span class="octicon octicon-link"></span></a>Future</h3>

<p>在 Dart 库中随处可见 Future 对象，通常异步函数返回的对象就是一个 Future。
当一个 future <em>完成执行后</em>，future 中的值就已经可以使用了。</p>

<h4 id="使用-await">使用 await</h4>

<p>在直接使用 Future API 前，首先应该考虑 <code class="highlighter-rouge">await</code> 来替代。
代码中使用 <code class="highlighter-rouge">await</code> 表达式会比直接使用 Future API 更容易理解。</p>

<p>阅读思考下面代码。
代码使用 Future 的 <code class="highlighter-rouge">then()</code> 方法在同一行执行了三个异步函数，
要等待上一个执行完成，再执行下一个任务之。</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (runUsingFuture)"?>
<pre class="prettyprint lang-dart">runUsingFuture() {
  // ...
  findEntryPoint().then((entryPoint) {
    return runExecutable(entryPoint, args);
  }).then(flushThenExit);
}</pre>

<p>通过 await 表达式实现等价的代码，
看起来非常像同步代码：</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (runUsingAsyncAwait)"?>
<pre class="prettyprint lang-dart">runUsingAsyncAwait() async {
  // ...
  var entryPoint = await findEntryPoint();
  var exitCode = await runExecutable(entryPoint, args);
  await flushThenExit(exitCode);
}</pre>

<p>async 函数能够捕获来自 Future 的异常。
例如：</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (catch)"?>
<pre class="prettyprint lang-dart">var entryPoint = await findEntryPoint();
try {
  var exitCode = await runExecutable(entryPoint, args);
  await flushThenExit(exitCode);
} catch (e) {
  // Handle the error...
}</pre>

<div class="alert alert-warning">
  <p><strong>重要：</strong>
async 函数 返回 Future 对象。
如果你不希望你的函数返回一个 future 对象，
可以使用其他方案。
例如，你可以在你的方法中调用一个 async 方法。</p>
</div>

<p>更多关于 <code class="highlighter-rouge">await</code> 的使用及相关的 Dart 语言特征，参考
<a href="/guides/language/language-tour#asynchrony-support">Asynchrony support</a>。</p>

<h4 id="基本用法">基本用法</h4>

<p>当 future 执行完成后，<code class="highlighter-rouge">then()</code> 中的代码会被执行。</p>

<p><code class="highlighter-rouge">then()</code> 中的代码会在 future 完成后被执行。
例如，
<code class="highlighter-rouge">HttpRequest.getString()</code> 返回一个 future 对象，因为 HTTP 请求可能需要一段时间。
当 Future 完成并且保证字符串值有效后，使用 <code class="highlighter-rouge">then()</code> 来执行你需要的代码：</p>

<?code-excerpt "misc/lib/library_tour/async/basic.dart (then)"?>
<pre class="prettyprint lang-dart">HttpRequest.getString(url).then((String result) {
  print(result);
});</pre>

<p>使用 <code class="highlighter-rouge">catchError()</code> 来处理一些 Future 对象可能抛出的错误或者异常。</p>

<?code-excerpt "misc/lib/library_tour/async/basic.dart (catchError)"?>
<pre class="prettyprint lang-dart">HttpRequest.getString(url).then((String result) {
  print(result);
}).catchError((e) {
  // Handle or ignore the error.
});</pre>

<p><code class="highlighter-rouge">then().catchError()</code> 组合是 <code class="highlighter-rouge">try</code>-<code class="highlighter-rouge">catch</code> 的异步版本。</p>

<div class="alert alert-warning">
  <p><strong>重要：</strong>
确保调用 <code class="highlighter-rouge">catchError()</code> 方式在 <code class="highlighter-rouge">then()</code> 的结果上，而不是在原来的 Future 对象上调用。
否则的话，<code class="highlighter-rouge">catchError()</code> 就只能处理原来 Future 对象抛出的异常，
而无法处理 <code class="highlighter-rouge">then()</code> 代码里面的异常。</p>
</div>

<h4 id="链式异步编程">链式异步编程</h4>

<p><code class="highlighter-rouge">then()</code> 方法返回一个 Future 对象， 
这样就提供了一个非常好的方式让多个异步方法按顺序依次执行。
如果用 <code class="highlighter-rouge">then()</code> 注册的回调返回一个 Future ，
那么 <code class="highlighter-rouge">then()</code> 返回一个等价的 Future 。 
如果回调返回任何其他类型的值，
那么 <code class="highlighter-rouge">then()</code> 会创建一个以该值完成的新 Future 。</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (then-chain)"?>
<pre class="prettyprint lang-dart">Future result = costlyQuery(url);
result
    .then((value) =&gt; expensiveWork(value))
    .then((_) =&gt; lengthyComputation())
    .then((_) =&gt; print('Done!'))
    .catchError((exception) {
  /* Handle exception... */
});</pre>

<p>在上面的示例中，方法按下面顺序执行：</p>

<ol>
  <li><code class="highlighter-rouge">costlyQuery()</code></li>
  <li><code class="highlighter-rouge">expensiveWork()</code></li>
  <li><code class="highlighter-rouge">lengthyComputation()</code></li>
</ol>

<p>这是使用 await 编写的等效代码：</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (then-chain-as-await)"?>
<pre class="prettyprint lang-dart">try {
  final value = await costlyQuery(url);
  await expensiveWork(value);
  await lengthyComputation();
  print('Done!');
} catch (e) {
  /* Handle exception... */
}</pre>

<h4 id="等待多个-future">等待多个 Future</h4>

<p>有时代码逻辑需要调用多个异步函数，
并等待它们全部完成后再继续执行。
使用 <a href="https://api.dartlang.org/stable/dart-async/Future/wait.html">Future.wait()</a> 静态方法管理多个 Future 以及等待它们完成：</p>

<?code-excerpt "misc/lib/library_tour/async/future.dart (wait)" replace="/elideBody;/\/* ... *\//g"?>
<pre class="prettyprint lang-dart">Future deleteLotsOfFiles() async =&gt;  ...
Future copyLotsOfFiles() async =&gt;  ...
Future checksumLotsOfOtherFiles() async =&gt;  ...

await Future.wait([
  deleteLotsOfFiles(),
  copyLotsOfFiles(),
  checksumLotsOfOtherFiles(),
]);
print('Done with all the long steps!');</pre>

<h3 id="stream">
<a id="stream" class="anchor" href="#stream" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stream</h3>

<p>在 Dart API 中 Stream 对象随处可见，Stream 用来表示一些列数据。
例如，HTML 中的按钮点击就是通过 stream 传递的。
同样也可以将文件作为数据流来读取。</p>

<h4 id="异步循环">异步循环</h4>

<p>有时，可以使用异步 for 循环 <code class="highlighter-rouge">await for</code> ，来替代 Stream API 。</p>

<p>思考下面示例函数。
它使用 Stream 的 <code class="highlighter-rouge">listen()</code> 方法来订阅文件列表，
传入一个搜索文件或目录的函数。</p>

<!-- OLD dart-tutorials-samples/cmdline/bin/dgrep.dart -->
<?code-excerpt "misc/lib/library_tour/async/stream.dart (listen)" replace="/listen/[!$&!]/g"?>
<pre class="prettyprint lang-dart">void main(List&lt;String&gt; arguments) {
  // ...
  FileSystemEntity.isDirectory(searchPath).then((isDir) {
    if (isDir) {
      final startingDir = Directory(searchPath);
      startingDir
          .list(
              recursive: argResults[recursive],
              followLinks: argResults[followLinks])
          .<span class="highlight">listen</span>((entity) {
        if (entity is File) {
          searchFile(entity, searchTerms);
        }
      });
    } else {
      searchFile(File(searchPath), searchTerms);
    }
  });
}</pre>

<p>下面是使用 await 表达式和异步 for 循环 (<code class="highlighter-rouge">await for</code>) 实现的等价的代码，
看起来更像是同步代码：</p>

<?code-excerpt "misc/lib/library_tour/async/stream.dart (await-for)" replace="/await for/[!$&!]/g"?>
<pre class="prettyprint lang-dart">Future main(List&lt;String&gt; arguments) async {
  // ...
  if (await FileSystemEntity.isDirectory(searchPath)) {
    final startingDir = Directory(searchPath);
    <span class="highlight">await for</span> (var entity in startingDir.list(
        recursive: argResults[recursive],
        followLinks: argResults[followLinks])) {
      if (entity is File) {
        searchFile(entity, searchTerms);
      }
    }
  } else {
    searchFile(File(searchPath), searchTerms);
  }
}</pre>

<div class="alert alert-warning">
  <p><strong>重要：</strong>
在使用 <code class="highlighter-rouge">await for</code> 前，确认这样能保持代码清晰，
并希望获取所有 stream 的结果。
例如，你通常并 <strong>不</strong> 会使用 <code class="highlighter-rouge">await for</code> 来监听 DOM 事件，
因为 DOM 会发送无尽的流事件。
如果在同一行使用 <code class="highlighter-rouge">await for</code> 注册两个 DOM 事件，
那么第二个事件永远不会被处理。</p>
</div>

<p>有关 <code class="highlighter-rouge">await</code> 的使用及 Dart 语言的相关信息，参考
<a href="/guides/language/language-tour#asynchrony-support">Asynchrony support</a>。</p>

<h4 id="监听流数据stream-data">监听流数据（stream data）</h4>

<p>使用 <code class="highlighter-rouge">await for</code> 或者使用 <code class="highlighter-rouge">listen()</code> 方法监听 stream，
来获取每个到达的数据流值：</p>

<?code-excerpt "misc/lib/library_tour/async/stream_web.dart (listen)" replace="/await for/[!$&!]/g"?>
<pre class="prettyprint lang-dart">// 通过 ID 获取 button 并添加事件处理函数。
querySelector('#submitInfo').onClick.listen((e) {
  // 当 button 被点击是，该代码会执行。
  submitData();
});</pre>

<p>下面示例中，ID 为 “submitInfo” button 提供的 <code class="highlighter-rouge">onClick</code> 属性是一个 Stream 对象。</p>

<p>如果只关心其中一个事件，可以使用，例如，<code class="highlighter-rouge">first</code>， <code class="highlighter-rouge">last</code>，或 <code class="highlighter-rouge">single</code> 属性来获取。
要在处理时间前对事件进行测试，可以使用，例如 <code class="highlighter-rouge">firstWhere()</code>， <code class="highlighter-rouge">lastWhere()</code>， 或 <code class="highlighter-rouge">singleWhere()</code> 方法。</p>

<p>如果只关心事件中的一个子集，可以使用，例如，<code class="highlighter-rouge">skip()</code>， <code class="highlighter-rouge">skipWhile()</code>，<code class="highlighter-rouge">take()</code>，<code class="highlighter-rouge">takeWhile()</code>， 和 <code class="highlighter-rouge">where()</code>。</p>

<h4 id="传递流数据stream-data">传递流数据（stream data）</h4>

<p>常常，在使用流数据前需要改变数据的格式。
使用 <code class="highlighter-rouge">transform()</code> 方法生成具有不同类型数据的流：</p>

<?code-excerpt "misc/lib/library_tour/async/stream.dart (transform)"?>
<pre class="prettyprint lang-dart">var lines = inputStream
    .transform(utf8.decoder)
    .transform(LineSplitter());</pre>

<p>上面例子中使用了两个 transformer 。
第一个使用 utf8.decoder 将整型流转换为字符串流。
接着，使用了 LineSplitter 将字符串流转换为多行字符串流。
这些 transformer 来自 dart:convert 库
（参考<a href="#dartconvert---decoding-and-encoding-json-utf-8-and-more">dart:convert section</a>）。</p>

<h4 id="处理错误和完成">处理错误和完成</h4>

<p>处理错误和完成代码方式，
取决于使用的是 异步 for 循环（<code class="highlighter-rouge">await for</code>）还是 Stream API 。</p>

<p>如果使用的是异步 for 循环，
那么通过  try-catch 来处理错误。
代码位于异步 for 循环之后，
会在 stream 被关闭后执行。</p>

<?code-excerpt "misc/lib/library_tour/async/stream.dart (readFileAwaitFor)" replace="/try|catch/[!$&!]/g"?>
<pre class="prettyprint lang-dart">Future readFileAwaitFor() async {
  var config = File('config.txt');
  Stream&lt;List&lt;int&gt;&gt; inputStream = config.openRead();

  var lines = inputStream
      .transform(utf8.decoder)
      .transform(LineSplitter());
  <span class="highlight">try</span> {
    await for (var line in lines) {
      print('Got ${line.length} characters from stream');
    }
    print('file is now closed');
  } <span class="highlight">catch</span> (e) {
    print(e);
  }
}</pre>

<p>如果使用的是 Stream API，
那么通过注册 <code class="highlighter-rouge">onError</code> 监听来处理错误。
代码位于注册的 <code class="highlighter-rouge">onDone</code> 中，
会在 stream 被关闭后执行。</p>

<?code-excerpt "misc/lib/library_tour/async/stream.dart (onDone)" replace="/onDone|onError/[!$&!]/g"?>
<pre class="prettyprint lang-dart">var config = File('config.txt');
Stream&lt;List&lt;int&gt;&gt; inputStream = config.openRead();

inputStream
    .transform(utf8.decoder)
    .transform(LineSplitter())
    .listen((String line) {
  print('Got ${line.length} characters from stream');
}, <span class="highlight">onDone</span>: () {
  print('file is now closed');
}, <span class="highlight">onError</span>: (e) {
  print(e);
});</pre>

<h3 id="更多内容">
<a id="更多内容" class="anchor" href="#%E6%9B%B4%E5%A4%9A%E5%86%85%E5%AE%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>更多内容</h3>

<p>更多在 command-line 应用中使用 Future 和 Stream 的实例，参考
<a href="#dartio">dart:io 概览</a>
也可以参考下列文章和教程：</p>

<ul>
  <li><a href="/tutorials/language/futures">Asynchronous Programming: Futures</a></li>
  <li><a href="/guides/libraries/futures-error-handling">Futures and Error Handling</a></li>
  <li><a href="https://webdev.dartlang.org/articles/performance/event-loop">The Event Loop and Dart</a></li>
  <li><a href="/tutorials/language/streams">Asynchronous Programming: Streams</a></li>
  <li><a href="/articles/libraries/creating-streams">Creating Streams in Dart</a></li>
</ul>

<h2 id="dartmath---数学和随机数">
<a id="dartmath---数学和随机数" class="anchor" href="#dartmath---%E6%95%B0%E5%AD%A6%E5%92%8C%E9%9A%8F%E6%9C%BA%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart:math - 数学和随机数</h2>

<p>dart:math 库（<a href="https://api.dartlang.org/stable/dart-math/dart-math-library.html">API reference</a>）
提供通用的功能，例如，正弦和余弦，
最大值和最小值，以及数学常数，例如 <em>pi</em> 和 <em>e</em>。
大多数在 Math 库中的功能是作为顶级函数实现的。</p>

<p>通过 import dart:math 来引入使用该库。
下面的实例中使用 <code class="highlighter-rouge">math</code> 前缀，来说明顶级函数及常量源于 Math 库。</p>

<?code-excerpt "misc/test/library_tour/math_test.dart (import)"?>
<pre class="prettyprint lang-dart">import 'dart:math';</pre>

<h3 id="三角函数">
<a id="三角函数" class="anchor" href="#%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>三角函数</h3>

<p>Math 库提供基本的三角函数：</p>

<?code-excerpt "misc/test/library_tour/math_test.dart (trig)"?>
<pre class="prettyprint lang-dart">// Cosine
assert(cos(pi) == -1.0);

// Sine
var degrees = 30;
var radians = degrees * (pi / 180);
// radians is now 0.52359.
var sinOf30degrees = sin(radians);
// sin 30° = 0.5
assert((sinOf30degrees - 0.5).abs() &lt; 0.01);</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
这些函数参数单位是弧度，不是角度！</p>
</div>

<h3 id="最大值和最小值">
<a id="最大值和最小值" class="anchor" href="#%E6%9C%80%E5%A4%A7%E5%80%BC%E5%92%8C%E6%9C%80%E5%B0%8F%E5%80%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>最大值和最小值</h3>

<p>Math 库提供 <code class="highlighter-rouge">max()</code> 和 <code class="highlighter-rouge">min()</code> 方法：</p>

<?code-excerpt "misc/test/library_tour/math_test.dart (min-max)"?>
<pre class="prettyprint lang-dart">assert(max(1, 1000) == 1000);
assert(min(1, -1000) == -1000);</pre>

<h3 id="数学常数">
<a id="数学常数" class="anchor" href="#%E6%95%B0%E5%AD%A6%E5%B8%B8%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>数学常数</h3>

<p>在 Math 库中可以找到你需要的数学常熟，例如，<em>pi</em>， <em>e</em> 等等：</p>

<?code-excerpt "misc/test/library_tour/math_test.dart (constants)"?>
<pre class="prettyprint lang-dart">// See the Math library for additional constants.
print(e); // 2.718281828459045
print(pi); // 3.141592653589793
print(sqrt2); // 1.4142135623730951</pre>

<h3 id="随机数">
<a id="随机数" class="anchor" href="#%E9%9A%8F%E6%9C%BA%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>随机数</h3>

<p>使用 <a href="https://api.dartlang.org/stable/dart-math/Random-class.html">Random</a> 类产生随机数。
可以为 Random 构造函数提供一个可选的种子参数。</p>

<?code-excerpt "misc/test/library_tour/math_test.dart (Random)"?>
<pre class="prettyprint lang-dart">var random = Random();
random.nextDouble(); // Between 0.0 and 1.0: [0, 1)
random.nextInt(10); // Between 0 and 9.</pre>

<p>也可以产生随机布尔值序列：</p>

<?code-excerpt "misc/test/library_tour/math_test.dart (Random-bool)"?>
<pre class="prettyprint lang-dart">var random = Random();
random.nextBool(); // true or false</pre>

<h3 id="更多内容-1">
<a id="更多内容-1" class="anchor" href="#%E6%9B%B4%E5%A4%9A%E5%86%85%E5%AE%B9-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>更多内容</h3>

<p>完整方法列表参考 <a href="https://api.dartlang.org/stable/dart-math/dart-math-library.html">Math API docs</a>。
在 API 文档中参考 <a href="https://api.dartlang.org/stable/dart-core/num-class.html">num,</a> <a href="https://api.dartlang.org/stable/dart-core/int-class.html">int,</a> 和 <a href="https://api.dartlang.org/stable/dart-core/double-class.html">double</a>。</p>

<h2 id="dartconvert---编解码jsonutf-8等">
<a id="dartconvert---编解码jsonutf-8等" class="anchor" href="#dartconvert---%E7%BC%96%E8%A7%A3%E7%A0%81jsonutf-8%E7%AD%89" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart:convert - 编解码JSON，UTF-8等</h2>

<p>dart:convert 库 （<a href="https://api.dartlang.org/stable/dart-convert/dart-convert-library.html">API reference</a>）提供 JSON 和 UTF-8 转换器，
以及创建其他转换器。
<a href="https://www.json.org/">JSON</a> 是一种用于表示结构化对象和集合的简单文本格式。
<a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> 是一种常见的可变宽度编码，可以表示Unicode字符集中的每个字符。</p>

<p>dart:convert 库可以在 web 及 命令行应用中使用。
使用时，通过 import dart:convert 引入。</p>

<?code-excerpt "misc/test/library_tour/convert_test.dart (import)"?>
<pre class="prettyprint lang-dart">import 'dart:convert';</pre>

<h3 id="编解码json">
<a id="编解码json" class="anchor" href="#%E7%BC%96%E8%A7%A3%E7%A0%81json" aria-hidden="true"><span class="octicon octicon-link"></span></a>编解码JSON</h3>

<p>使用 <code class="highlighter-rouge">jsonDecode()</code> 解码 JSON 编码的字符串为 Dart 对象：</p>

<?code-excerpt "misc/test/library_tour/convert_test.dart (json-decode)"?>
<pre class="prettyprint lang-dart">// 提示：在 JSON 字符串中，必须使用双引号（"）,
// 而不是单引号（'）。
// 下面是 JSON 字符串，非 Dart 字符串。
var jsonString = '''
  [
    {"score": 40},
    {"score": 80}
  ]
''';

var scores = jsonDecode(jsonString);
assert(scores is List);

var firstScore = scores[0];
assert(firstScore is Map);
assert(firstScore['score'] == 40);</pre>

<p>使用 <code class="highlighter-rouge">jsonEncode()</code> 编码 Dart 对象为 JSON 格式的字符串：</p>

<?code-excerpt "misc/test/library_tour/convert_test.dart (json-encode)"?>
<pre class="prettyprint lang-dart">var scores = [
  {'score': 40},
  {'score': 80},
  {'score': 100, 'overtime': true, 'special_guest': null}
];

var jsonText = jsonEncode(scores);
assert(jsonText ==
    '[{"score":40},{"score":80},'
        '{"score":100,"overtime":true,'
        '"special_guest":null}]');</pre>

<p>只有 int， double， String， bool, null, List, 或者 Map 类型对象可以直接编码成 JSON。
List 和 Map 对象进行递归编码。</p>

<p>不能直接编码的对象有两种方式对其编码。
第一种方式是调用 <code class="highlighter-rouge">encode()</code> 时赋值第二个参数，
这个参数是一个函数，
该函数返回一个能够直接编码的对象
第二种方式是省略第二个参数，着这种情况下编码器调用对象的 <code class="highlighter-rouge">toJson()</code> 方法。
更多示例及 JSON 包相关链接，参考 <a href="/guides/json">JSON Support</a> 。</p>

<h3 id="编解码-utf-8-字符">
<a id="编解码-utf-8-字符" class="anchor" href="#%E7%BC%96%E8%A7%A3%E7%A0%81-utf-8-%E5%AD%97%E7%AC%A6" aria-hidden="true"><span class="octicon octicon-link"></span></a>编解码 UTF-8 字符</h3>

<p>使用 <code class="highlighter-rouge">utf8.decode()</code> 解码 UTF8 编码的字符创为 Dart 字符创：</p>

<?code-excerpt "misc/test/library_tour/convert_test.dart (utf8-decode)" replace="/ \/\/line-br.*//g"?>
<pre class="prettyprint lang-dart">List&lt;int&gt; utf8Bytes = [
  0xc3, 0x8e, 0xc3, 0xb1, 0xc5, 0xa3, 0xc3, 0xa9,
  0x72, 0xc3, 0xb1, 0xc3, 0xa5, 0xc5, 0xa3, 0xc3,
  0xae, 0xc3, 0xb6, 0xc3, 0xb1, 0xc3, 0xa5, 0xc4,
  0xbc, 0xc3, 0xae, 0xc5, 0xbe, 0xc3, 0xa5, 0xc5,
  0xa3, 0xc3, 0xae, 0xe1, 0xbb, 0x9d, 0xc3, 0xb1
];

var funnyWord = utf8.decode(utf8Bytes);

assert(funnyWord == 'Îñţérñåţîöñåļîžåţîờñ');</pre>

<p>将 UTF-8 字符串流转换为 Dart 字符串，为 Stream 的 <code class="highlighter-rouge">transform()</code> 方法上指定 <code class="highlighter-rouge">utf8.decoder</code>：</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (utf8-decoder)" replace="/utf8.decoder/[!$&!]/g"?>
<pre class="prettyprint lang-dart">var lines = inputStream
    .transform(<span class="highlight">utf8.decoder</span>)
    .transform(LineSplitter());
try {
  await for (var line in lines) {
    print('Got ${line.length} characters from stream');
  }
  print('file is now closed');
} catch (e) {
  print(e);
}</pre>

<p>使用 <code class="highlighter-rouge">utf8.encode()</code> 将 Dart 字符串编码为一个 UTF8 编码的字节流：</p>

<?code-excerpt "misc/test/library_tour/convert_test.dart (utf8-encode)" replace="/ \/\/line-br.*//g"?>
<pre class="prettyprint lang-dart">List&lt;int&gt; encoded = utf8.encode('Îñţérñåţîöñåļîžåţîờñ');

assert(encoded.length == utf8Bytes.length);
for (int i = 0; i &lt; encoded.length; i++) {
  assert(encoded[i] == utf8Bytes[i]);
}</pre>

<h3 id="其他功能">
<a id="其他功能" class="anchor" href="#%E5%85%B6%E4%BB%96%E5%8A%9F%E8%83%BD" aria-hidden="true"><span class="octicon octicon-link"></span></a>其他功能</h3>

<p>dart:convert 库同样包含 ASCII 和 ISO-8859-1 (Latin1) 转换器。
更多详情，参考 <a href="https://api.dartlang.org/stable/dart-convert/dart-convert-library.html">API docs for the dart:convert library。</a></p>

<h2 id="darthtml">
<a id="darthtml" class="anchor" href="#darthtml" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart:html - 基于浏览器应用</h2>

<p>在浏览器上使用 <a href="https://api.dartlang.org/stable/dart-html/dart-html-library.html">dart:html</a> 库编程，操作 DOM 中的对象和元素，以及访问 HTML5 API 。
DOM 全称为 <strong>Document Object Model</strong> ，用来描述 HTML 页面的层次结构。</p>

<p><a href="https://api.dartlang.org/stable/dart-html/dart-html-library.html">dart:html</a> 的其他常见用途是操作样式（<em>CSS</em>），获取 HTTP 请求数据，以及使用
<a href="#sending-and-receiving-real-time-data-with-websockets">WebSockets</a> 交换数据。
HTML5（和 dart:html）有许多其他 API 本章节无法全部涵盖，本节未涵盖这些API。 dart:html 只能
被用于 Web 应用，命令行应用无法使用。</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
对于 Web 应用 UI 的高级处理方式，可以使用 Web 框架，例如：
<a href="https://webdev.dartlang.org/angular">AngularDart.</a></p>
</div>

<p>在 Web 应用中使用 HTML 库，导入 dart:html ：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'dart:html'</span><span class="o">;</span>
</code></pre></div></div>

<h3 id="dom-操作">
<a id="dom-操作" class="anchor" href="#dom-%E6%93%8D%E4%BD%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>DOM 操作</h3>

<p>在操作 DOM 前，需要对 <em>windows</em>， <em>documents</em>,
<em>elements</em>， 以及 <em>nodes</em> 有所了解。</p>

<p><a href="https://api.dartlang.org/stable/dart-html/Window-class.html">Window</a> 对象表示 Web 浏览器的实际窗口。
每个 Window 都有一个 Document 对象，该对象指向当前加载的文档。
Window 对象还包括各种 API 的访问器，例如 IndexedDB（用于存储数据），
requestAnimationFrame（用于动画）等。
在选项卡式浏览器中，每个选项卡都有自己的 Window 对象。</p>

<p>使用 <a href="https://api.dartlang.org/stable/dart-html/Document-class.html">Document</a> 对象，可以在文档中创建和操作 <a href="https://api.dartlang.org/stable/dart-html/Element-class.html">Element</a> 对象。
需要注意的是，文档本身也是一个元素，可以被操作。</p>

<p>DOM 模拟一棵树的<a href="https://api.dartlang.org/stable/dart-html/Node-class.html">结点</a>。这些节点通常是元素，
但也可以是属性，文本，注释和其他 DOM 类型。
除了根节点（该节点没有父节点）之外，
DOM 中的每个节点都有一个父节点，且可能有许多子节点。</p>

<h4 id="查找元素">查找元素</h4>

<p>在操作元素钱，首先需要一个能够表示它的对象。
我们可以通过查找获取这个对象。</p>

<p>查找一个或多个元素可以使用顶级函数 <code class="highlighter-rouge">querySelector()</code> 和 <code class="highlighter-rouge">querySelectorAll()</code> 。
我们可以按ID，类，标签，名称或这些的任意组合进行查询。
<a href="http://www.w3.org/TR/css3-selectors/">CSS 选择器规范指南</a>
定义了选择器的格式，例如使用 # 前缀指定 ID 和点 (.) 前缀指定类。</p>

<p><code class="highlighter-rouge">querySelector()</code> 函数返回与选择器匹配的第一个元素，
而 <code class="highlighter-rouge">querySelectorAll()</code> 返回与选择器匹配的元素集合。</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Find an element by id (an-id).</span>
  <span class="n">Element</span> <span class="n">elem1</span> <span class="o">=</span> <span class="n">querySelector</span><span class="o">(</span><span class="s">'#an-id'</span><span class="o">);</span>

  <span class="c1">// Find an element by class (a-class).</span>
  <span class="n">Element</span> <span class="n">elem2</span> <span class="o">=</span> <span class="n">querySelector</span><span class="o">(</span><span class="s">'.a-class'</span><span class="o">);</span>

  <span class="c1">// Find all elements by tag (&lt;div&gt;).</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">elems1</span> <span class="o">=</span> <span class="n">querySelectorAll</span><span class="o">(</span><span class="s">'div'</span><span class="o">);</span>

  <span class="c1">// Find all text inputs.</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">elems2</span> <span class="o">=</span> <span class="n">querySelectorAll</span><span class="o">(</span>
    <span class="s">'input[type="text"]'</span><span class="o">,</span>
  <span class="o">);</span>

  <span class="c1">// Find all elements with the CSS class 'class'</span>
  <span class="c1">// inside of a &lt;p&gt; that is inside an element with</span>
  <span class="c1">// the ID 'id'.</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">elems3</span> <span class="o">=</span> <span class="n">querySelectorAll</span><span class="o">(</span><span class="s">'#id p.class'</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="操作元素">操作元素</h4>

<p>元素的状态可以通过属性来修改。节点和它的子元素定义所有元素具有的属性。
例如，所有元素都具有可用于设置的 <code class="highlighter-rouge">classes</code> ， <code class="highlighter-rouge">hidden</code> ， <code class="highlighter-rouge">id</code> ， <code class="highlighter-rouge">style</code> 以及
<code class="highlighter-rouge">title</code> 属性。子元素定义一些附加的属性，例如 <a href="https://api.dartlang.org/stable/dart-html/AnchorElement-class.html">AnchorElement.</a> 的 <code class="highlighter-rouge">href</code> 属性。</p>

<p>思考下面示例 - 在 HTML 中指定锚元素：</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">id=</span><span class="s">"example"</span> <span class="na">href=</span><span class="s">"http://example.com"</span><span class="nt">&gt;</span>link text<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p>这个 &lt;a&gt; 标签指定具有 <code class="highlighter-rouge">href</code> 属性的元素并包含字符串 “linktext” 的文本节点（可通过 <code class="highlighter-rouge">text</code> 属性访问）。
这里可以使用 AnchorElement 的 <code class="highlighter-rouge">href</code> 属性来修改链接转到的 URL ：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="n">anchor</span> <span class="o">=</span> <span class="n">querySelector</span><span class="o">(</span><span class="s">'#example'</span><span class="o">)</span> <span class="k">as</span> <span class="n">AnchorElement</span><span class="o">;</span>
<span class="n">anchor</span><span class="o">.</span><span class="na">href</span> <span class="o">=</span> <span class="s">'http://dartlang.org'</span><span class="o">;</span>
</code></pre></div></div>

<p>我们常常需要设置多个元素的属性。
例如，以下代码中 “mac”, “win”, 或 “linux” 这些类的元素集合中都包含 <code class="highlighter-rouge">hidden</code> 属性。
将 <code class="highlighter-rouge">hidden</code> 属性设置为 true 和将 <code class="highlighter-rouge">display:none</code> 添加到 CSS 具有相同的效果。</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="o">&lt;!--</span> <span class="n">In</span> <span class="nl">HTML:</span> <span class="o">--&gt;</span>
  <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">span</span> <span class="kd">class</span><span class="err">="</span><span class="nc">linux</span><span class="s">"&gt;Words for Linux&lt;/span&gt;
    &lt;span class="</span><span class="n">macos</span><span class="s">"&gt;Words for Mac&lt;/span&gt;
    &lt;span class="</span><span class="n">windows</span><span class="s">"&gt;Words for Windows&lt;/span&gt;
  &lt;/p&gt;
</span></code></pre></div></div>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// In Dart:</span>
  <span class="kd">final</span> <span class="n">osList</span> <span class="o">=</span> <span class="o">[</span><span class="s">'macos'</span><span class="o">,</span> <span class="s">'windows'</span><span class="o">,</span> <span class="s">'linux'</span><span class="o">];</span>
  <span class="kd">final</span> <span class="n">userOs</span> <span class="o">=</span> <span class="n">determineUserOs</span><span class="o">();</span>

  <span class="c1">// For each possible OS...</span>
  <span class="k">for</span> <span class="o">(</span><span class="kd">var</span> <span class="n">os</span> <span class="k">in</span> <span class="n">osList</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Matches user OS?</span>
    <span class="kt">bool</span> <span class="n">shouldShow</span> <span class="o">=</span> <span class="o">(</span><span class="n">os</span> <span class="o">==</span> <span class="n">userOs</span><span class="o">);</span>

    <span class="c1">// Find all elements with class=os. For example, if</span>
    <span class="c1">// os == 'windows', call querySelectorAll('.windows')</span>
    <span class="c1">// to find all elements with the class "windows".</span>
    <span class="c1">// Note that '.$os' uses string interpolation.</span>
    <span class="k">for</span> <span class="o">(</span><span class="kd">var</span> <span class="n">elem</span> <span class="k">in</span> <span class="n">querySelectorAll</span><span class="o">(</span><span class="s">'.</span><span class="si">$os</span><span class="s">'</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">elem</span><span class="o">.</span><span class="na">hidden</span> <span class="o">=</span> <span class="o">!</span><span class="n">shouldShow</span><span class="o">;</span> <span class="c1">// Show or hide.</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>当右侧属性不可用或不方便时，可以使用元素的 <code class="highlighter-rouge">attributes</code> 属性。
此属性是 <code class="highlighter-rouge">Map&lt;String, String&gt;</code> ，其中键是属性名称。
有关属性名称及其描述列表，请参阅
<a href="https://developer.mozilla.org/en/HTML/Attributes">MDN 属性页面</a> 。
以下是设置 <code class="highlighter-rouge">attributes</code> 值的示例：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">elem</span><span class="o">.</span><span class="na">attributes</span><span class="o">[</span><span class="s">'someAttribute'</span><span class="o">]</span> <span class="o">=</span> <span class="s">'someValue'</span><span class="o">;</span>
</code></pre></div></div>

<h4 id="创建元素">创建元素</h4>

<p>在已有的 HTML 上，你可以创建元素并将它们添加到 DOM 中。
下面是一个创建段落元素 (&lt;p&gt;) 的实例：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">ParagraphElement</span><span class="o">();</span>
  <span class="n">elem</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Creating is easy!'</span><span class="o">;</span>
</code></pre></div></div>
<p>同样你可以通过解析 HTML 文本来创建元素。
元素的其他的子元素也将被解析和创建。</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">elem2</span> <span class="o">=</span> <span class="n">Element</span><span class="o">.</span><span class="na">html</span><span class="o">(</span>
    <span class="s">'&lt;p&gt;Creating &lt;em&gt;is&lt;/em&gt; easy!&lt;/p&gt;'</span><span class="o">,</span>
  <span class="o">);</span>
</code></pre></div></div>

<p>请注意， <code class="highlighter-rouge">elem2</code> 是前面示例中的 <code class="highlighter-rouge">ParagraphElement</code> 。、</p>

<p>你可以向任何现有元素的子元素添加元素。
在以下示例中，<code class="highlighter-rouge">body</code> 是一个元素，其子元素可以从 <code class="highlighter-rouge">children</code> 属性访问（类型为 List&lt;Element&gt;）。</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">.</span><span class="na">children</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">elem2</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="增加替换以及移除节点">增加，替换，以及移除节点</h4>

<p>回忆一下，元素只是节点的一种。你可以使用节点的 <code class="highlighter-rouge">nodes</code> 属性找到该节点的所有子节点，
该属性返回 List&lt;Node&gt;（与 <code class="highlighter-rouge">children</code> 不同， <code class="highlighter-rouge">children</code> 省略了非元素节点（non-Element nodes））。
获得此列表后，可以使用常用的 List 方法和运算符来操作这些子节点。</p>

<p>使用 List 的 <code class="highlighter-rouge">add()</code> 方法，在父节点的最后一个子节点：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">querySelector</span><span class="o">(</span><span class="s">'#inputs'</span><span class="o">).</span><span class="na">nodes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">elem</span><span class="o">);</span>
</code></pre></div></div>

<p>使用 <code class="highlighter-rouge">replaceWith()</code> 方法，替换一个节点：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">querySelector</span><span class="o">(</span><span class="s">'#status'</span><span class="o">).</span><span class="na">replaceWith</span><span class="o">(</span><span class="n">elem</span><span class="o">);</span>
</code></pre></div></div>

<p>使用 <code class="highlighter-rouge">remove()</code> 方法，移除一个节点：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Find a node by ID, and remove it from the DOM.</span>
  <span class="n">querySelector</span><span class="o">(</span><span class="s">'#expendable'</span><span class="o">).</span><span class="na">remove</span><span class="o">();</span>
</code></pre></div></div>

<h4 id="操作-css-样式">操作 CSS 样式</h4>

<p>CSS ，也称为<em>级联样式表</em>，用来定义 DOM 元素的显示风格。
你可以通过将 ID 和类属性附加到元素上来更改元素的外观。</p>

<p>每个元素都有一个 List 类型的 <code class="highlighter-rouge">classes</code> 字段。
只要在这个 List 中添加或删除字符串即可实现 CSS 类的添加和删除。 
例如，以下示例将 <code class="highlighter-rouge">warning</code> 类添加到元素中：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">elem</span> <span class="o">=</span> <span class="n">querySelector</span><span class="o">(</span><span class="s">'#message'</span><span class="o">);</span>
  <span class="n">elem</span><span class="o">.</span><span class="na">classes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">'warning'</span><span class="o">);</span>
</code></pre></div></div>

<p>通常使用 ID 查找元素是非常高效的。
使用 <code class="highlighter-rouge">id</code> 属性可以动态设置元素的 ID ：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">message</span> <span class="o">=</span> <span class="n">DivElement</span><span class="o">();</span>
  <span class="n">message</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="s">'message2'</span><span class="o">;</span>
  <span class="n">message</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Please subscribe to the Dart mailing list.'</span><span class="o">;</span>
</code></pre></div></div>

<p>You can reduce the redundant text in this example by using method
cascades:</p>

<p>使用方法级联可以简化上述代码：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">message</span> <span class="o">=</span> <span class="n">DivElement</span><span class="o">()</span>
    <span class="o">..</span><span class="na">id</span> <span class="o">=</span> <span class="s">'message2'</span>
    <span class="o">..</span><span class="na">text</span> <span class="o">=</span> <span class="s">'Please subscribe to the Dart mailing list.'</span><span class="o">;</span>
</code></pre></div></div>

<p>While using IDs and classes to associate an element with a set of styles
is best practice, sometimes you want to attach a specific style directly
to the element:</p>

<p>虽然使用 ID 和 classes 将元素与一组样式相关联是非常有效的方法，
但有时你也可以为元素直接指定特定的样式：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">message</span><span class="o">.</span><span class="na">style</span>
    <span class="o">..</span><span class="na">fontWeight</span> <span class="o">=</span> <span class="s">'bold'</span>
    <span class="o">..</span><span class="na">fontSize</span> <span class="o">=</span> <span class="s">'3em'</span><span class="o">;</span>
</code></pre></div></div>

<h4 id="处理事件">处理事件</h4>

<p>通过添加事件监听来实现对外部事件的响应，例如：点击，焦点更改，选择等。
事件监听可以添加到页面的任意元素上。事件的传播和分发的原理比较复杂，
如果你的 Web 新手，<a href="http://www.w3.org/TR/DOM-Level-3-Events/#dom-event-architecture">可以在这里了解更多细节</a>。</p>

<p>使用 <code><em>element</em>.on<em>Event</em>.listen(<em>function</em>)</code> 添加事件处理程序，
其中 <code><em>Event</em></code> 是事件名称，
<code><em>function</em></code> 是事件处理程序。</p>

<p>例如，下面是处理按钮点击的示例：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// Find a button by ID and add an event handler.</span>
  <span class="n">querySelector</span><span class="o">(</span><span class="s">'#submitInfo'</span><span class="o">).</span><span class="na">onClick</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// When the button is clicked, it runs this code.</span>
    <span class="n">submitData</span><span class="o">();</span>
  <span class="o">});</span>
</code></pre></div></div>

<p>事件可以通过 DOM 树向上或向下传播。可以使用 <code class="highlighter-rouge">e.target</code> 要找到最初触发事件的元素：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">document</span><span class="o">.</span><span class="na">body</span><span class="o">.</span><span class="na">onClick</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">final</span> <span class="n">clickedElem</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">target</span><span class="o">;</span>
    <span class="c1">// ...</span>
  <span class="o">});</span>
</code></pre></div></div>

<p>要查看所有可以注册的监听器事件，可以在 <a href="https://api.dartlang.org/stable/dart-html/Element-class.html">Element</a> 及其子类的 API 文档中查找 “onEventType” 属性来获取事件类型。
下面是一些常见的事件：</p>

<ul>
  <li>change</li>
  <li>blur</li>
  <li>keyDown</li>
  <li>keyUp</li>
  <li>mouseDown</li>
  <li>mouseUp</li>
</ul>

<h3 id="通过-httprequest-访问-http-资源">
<a id="通过-httprequest-访问-http-资源" class="anchor" href="#%E9%80%9A%E8%BF%87-httprequest-%E8%AE%BF%E9%97%AE-http-%E8%B5%84%E6%BA%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>通过 HttpRequest 访问 HTTP 资源</h3>

<p><a href="https://api.dartlang.org/stable/dart-html/HttpRequest-class.html">HttpRequest</a> 之前被称为 XMLHttpRequest ，在浏览器应用中可以通过
<a href="https://api.dartlang.org/stable/dart-html/HttpRequest-class.html">HttpRequest</a> 来访问 HTTP 资源。
在传统的 AJAX 风格应用程序中会大量使用 HttpRequest 。
使用 HttpRequest 可以从 Web 服务器动态加载 JSON 数据以及其他资源。
也还可以将数据动态发送到 Web 服务器。</p>

<h4 id="从服务器获取数据">从服务器获取数据</h4>

<p>HttpRequest 静态方法 <code class="highlighter-rouge">getString()</code> 是从 Web 服务器获取数据的一种简便方法。
配合 <code class="highlighter-rouge">await</code> 使用，可以确保获得请求数据之后，再继续执行后续操作。</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">Future</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="kt">String</span> <span class="n">pageHtml</span> <span class="o">=</span> <span class="o">[!</span><span class="n">await</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">url</span><span class="o">);!]</span>
    <span class="c1">// Do something with pageHtml...</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>使用 Try-Catch 来捕获处理错误：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">try</span> <span class="o">{</span>
    <span class="kd">var</span> <span class="n">data</span> <span class="o">=</span> <span class="n">await</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">jsonUri</span><span class="o">);</span>
    <span class="c1">// Process data...</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Handle exception...</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>HttpRequest 请求不仅仅可以通过 <code class="highlighter-rouge">getString()</code> 检索文本数据，
这里可以使用 <code class="highlighter-rouge">request()</code> 访问更丰富的 HTTP 资源。
下面是读取 XML 数据的示例：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">Future</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="n">HttpRequest</span> <span class="n">req</span> <span class="o">=</span> <span class="n">await</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">request</span><span class="o">(</span>
      <span class="n">url</span><span class="o">,</span>
      <span class="nl">method:</span> <span class="s">'HEAD'</span><span class="o">,</span>
    <span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">req</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Successful URL access...</span>
    <span class="o">}</span>
    <span class="c1">// ···</span>
  <span class="o">}</span>
</code></pre></div></div>

<p>使用完整的 API 可以处理更复杂的情况。比如，我们可以设置任意请求头（Header） 。</p>

<p>一般使用 HttpRequest 完整 API 的流程如下：</p>

<ol>
  <li>创建 HttpRequest 对象。</li>
  <li>使用 <code class="highlighter-rouge">GET</code> 或 <code class="highlighter-rouge">POST</code> 方式打开 URL。</li>
  <li>添加附加的事件处理程序。</li>
  <li>发送请求。</li>
</ol>

<p>例如：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="o">();</span>
  <span class="n">request</span>
    <span class="o">..</span><span class="na">open</span><span class="o">(</span><span class="s">'POST'</span><span class="o">,</span> <span class="n">url</span><span class="o">)</span>
    <span class="o">..</span><span class="na">onLoadEnd</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">requestComplete</span><span class="o">(</span><span class="n">request</span><span class="o">))</span>
    <span class="o">..</span><span class="na">send</span><span class="o">(</span><span class="n">encodedData</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="向服务器发送数据">向服务器发送数据</h4>

<p>HttpRequest 可以通过 HTTP POST 方式将数据发送到服务器。
例如，动态的提交表单数据。另一个常见情况是将 JSON 数据发送到 RESTful Web 服务。</p>

<p>提交表单数据要求提供键-值对的 URI 编码字符串。
（有关 URI 类的信息位于 <a href="/guides/libraries/library-tour">Dart 概览</a>的 <a href="/guides/libraries/library-tour#uris">URIs 章节</a>。）
如果要将数据发送给表单处理程序，还必须将 <code class="highlighter-rouge">Content-type</code> Header 设置为 <code class="highlighter-rouge">application/x-www-form-urlencode</code> 。</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">String</span> <span class="nf">encodeMap</span><span class="p">(</span><span class="n">Map</span> <span class="n">data</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">data</span><span class="o">.</span><span class="na">keys</span>
      <span class="o">.</span><span class="na">map</span><span class="o">((</span><span class="n">k</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="s">'</span><span class="si">${Uri.encodeComponent(k)}</span><span class="s">=</span><span class="si">${Uri.encodeComponent(data[k])}</span><span class="s">'</span><span class="o">)</span>
      <span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s">'&amp;'</span><span class="o">);</span>

  <span class="n">Future</span> <span class="n">main</span><span class="o">()</span> <span class="n">async</span> <span class="o">{</span>
    <span class="kd">var</span> <span class="n">data</span> <span class="o">=</span> <span class="o">{</span><span class="s">'dart'</span><span class="o">:</span> <span class="s">'fun'</span><span class="o">,</span> <span class="s">'angular'</span><span class="o">:</span> <span class="s">'productive'</span><span class="o">};</span>

    <span class="kd">var</span> <span class="n">request</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="o">();</span>
    <span class="n">request</span>
      <span class="o">..</span><span class="na">open</span><span class="o">(</span><span class="s">'POST'</span><span class="o">,</span> <span class="n">url</span><span class="o">)</span>
      <span class="o">..</span><span class="na">setRequestHeader</span><span class="o">(</span>
        <span class="s">'Content-type'</span><span class="o">,</span>
        <span class="s">'application/x-www-form-urlencoded'</span><span class="o">,</span>
      <span class="o">)</span>
      <span class="o">..</span><span class="na">send</span><span class="o">(</span><span class="n">encodeMap</span><span class="o">(</span><span class="n">data</span><span class="o">));</span>

    <span class="n">await</span> <span class="n">request</span><span class="o">.</span><span class="na">onLoadEnd</span><span class="o">.</span><span class="na">first</span><span class="o">;</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// Successful URL access...</span>
    <span class="o">}</span>
    <span class="c1">// ···</span>
  <span class="o">}</span>
</code></pre></div></div>

<h3 id="通过-websocket-发送和接收实时数据">
<a id="通过-websocket-发送和接收实时数据" class="anchor" href="#%E9%80%9A%E8%BF%87-websocket-%E5%8F%91%E9%80%81%E5%92%8C%E6%8E%A5%E6%94%B6%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE" aria-hidden="true"><span class="octicon octicon-link"></span></a>通过 WebSocket 发送和接收实时数据</h3>

<p>WebSocket 允许 Web 应用程序以交互方式与服务器交换数据，且无需轮询。
服务器创建 WebSocket 并侦听以 <strong>ws://</strong> 开头的 URL 请求 - 例如，ws://127.0.0.1:1337/ws 。
通过 WebSocket 传输的数据可以是字符串或 blob 。通常，数据为 JSON 格式的字符串。</p>

<p>要在 Web 应用程序中使用 WebSocket ，
使用 WebSocket URL 作为一个参数创建一个 <a href="https://api.dartlang.org/stable/dart-io/WebSocket-class.html">WebSocket</a> 对象：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="n">ws</span> <span class="o">=</span> <span class="n">WebSocket</span><span class="o">(</span><span class="s">'ws://echo.websocket.org'</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="发送数据">发送数据</h4>

<p>使用 <code class="highlighter-rouge">send()</code> 方法在 WebSocket 发送字符串数据：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">ws</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">'Hello from Dart!'</span><span class="o">);</span>
</code></pre></div></div>

<p>注册监听事件，来接收 WebSocket 数据：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">MessageEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">print</span><span class="o">(</span><span class="s">'Received message: </span><span class="si">${e.data}</span><span class="s">'</span><span class="o">);</span>
  <span class="o">});</span>
</code></pre></div></div>

<p>消息处理时间会接收到一个 <a href="https://api.dartlang.org/stable/dart-html/MessageEvent-class.html">MessageEvent</a> 对象。
该对象的 <code class="highlighter-rouge">data</code> 字段包含来自服务器的数据。</p>

<h4 id="处理-websocket-事件">处理 WebSocket 事件</h4>

<p>应用能够处理以下 WebSocket 事件：打开，关闭，错误和（如前所示的）消息。
下面是一个创建 WebSocket 对象并为打开，关闭，错误和消息事件注册处理程序的示例：</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">void</span> <span class="nf">initWebSocket</span><span class="p">(</span><span class="o">[</span><span class="kt">int</span> <span class="n">retrySeconds</span> <span class="o">=</span> <span class="mi">1</span><span class="o">])</span> <span class="o">{</span>
    <span class="kd">var</span> <span class="n">reconnectScheduled</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="n">print</span><span class="o">(</span><span class="s">"Connecting to websocket"</span><span class="o">);</span>

    <span class="kt">void</span> <span class="n">scheduleReconnect</span><span class="o">()</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(!</span><span class="n">reconnectScheduled</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Timer</span><span class="o">(</span><span class="n">Duration</span><span class="o">(</span><span class="nl">seconds:</span> <span class="n">retrySeconds</span><span class="o">),</span>
            <span class="o">()</span> <span class="o">=&gt;</span> <span class="n">initWebSocket</span><span class="o">(</span><span class="n">retrySeconds</span> <span class="o">*</span> <span class="mi">2</span><span class="o">));</span>
      <span class="o">}</span>
      <span class="n">reconnectScheduled</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">onOpen</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">'Connected'</span><span class="o">);</span>
      <span class="n">ws</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">'Hello from Dart!'</span><span class="o">);</span>
    <span class="o">});</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">onClose</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">'Websocket closed, retrying in '</span> <span class="o">+</span> <span class="s">'</span><span class="si">$retrySeconds</span><span class="s"> seconds'</span><span class="o">);</span>
      <span class="n">scheduleReconnect</span><span class="o">();</span>
    <span class="o">});</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">onError</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">"Error connecting to ws"</span><span class="o">);</span>
      <span class="n">scheduleReconnect</span><span class="o">();</span>
    <span class="o">});</span>

    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">.</span><span class="na">listen</span><span class="o">((</span><span class="n">MessageEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">print</span><span class="o">(</span><span class="s">'Received message: </span><span class="si">${e.data}</span><span class="s">'</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>
</code></pre></div></div>

<h3 id="更多内容-2">
<a id="更多内容-2" class="anchor" href="#%E6%9B%B4%E5%A4%9A%E5%86%85%E5%AE%B9-2" aria-hidden="true"><span class="octicon octicon-link"></span></a>更多内容</h3>

<p>本章只是介绍了 dart:html 库使用的一些皮毛。更多内容，参见 <a href="https://api.dartlang.org/stable/dart-html/dart-html-library.html">dart:html</a> 文档。
Dart 一些额外的库提供了更专业的 Web API ，
例如 <a href="https://api.dartlang.org/stable/dart-web_audio/dart-web_audio-library.html">Web Audio</a> , <a href="https://api.dartlang.org/stable/dart-indexed_db/dart-indexed_db-library.html">IndexedDB</a>, 以及 <a href="https://api.dartlang.org/stable/dart-web_gl/dart-web_gl-library.html">WebGL</a> 。</p>

<p>更多关于 Dart Web 库的内容，参见 <a href="/web/libraries">Web 库综述</a> 。</p>

<h2 id="dartio">
<a id="dartio" class="anchor" href="#dartio" aria-hidden="true"><span class="octicon octicon-link"></span></a>dart:io - 服务器和命令行应用程序的 I/O 。</h2>

<?code-excerpt plaster="none"?>

<p><a href="https://api.dartlang.org/stable/dart-io/dart-io-library.html">dart:io</a> 库提供处理文件，目录，进程，套接字， WebSocket ，以及 HTTP 客户端和服务端
的 API 。</p>

<div class="alert alert-warning">
  <p><strong>重要：</strong>
  <code class="highlighter-rouge">dart:io</code> 只能被 <a href="https://flutterchina.club">Flutter 移动应用</a>，命令行脚本，以及服务端应用引入和使用，
  Web 应用无法使用。</p>
</div>

<p>通常，dart:io 库提供的 API 为异步调用方法。同步方法常常会导致应用阻塞，且难以扩展。
因此，大多数操作的返回值为 Future 或 Stream 对象，
此模式与 Node.js 等现代服务器平台的模式相同。</p>

<p>dart:io 库中包含少量的同步方法，这些方法名后会明确标有 Sync 后缀。本节内容不涉及同步方法。</p>

<p>使用 dart:io 库前必须导入：
<?code-excerpt "misc/test/library_tour/io_test.dart (import)"?></p>
<pre class="prettyprint lang-dart">import 'dart:io';</pre>

<h3 id="文件和目录">
<a id="文件和目录" class="anchor" href="#%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>文件和目录</h3>

<p>命令行应用程序通过 I/O 库读取和写入文件以及浏览目录。
这里有两种读取文件内容的方式：一次性读取或使用 Stream 方式操作。
一次文件读取需要足够的内存来存储要读取文件的全部内容。
如果文件非常大或者在读取文件时想对其进行一些其他处理，
此时应该使用 Stream 方式，使用方式介绍见<a href="#streaming-file-contents">流式文件操作</a>。</p>

<h4 id="以文本方式读取文件">以文本方式读取文件</h4>

<p>读取 UTF-8 编码的文本文件时，可以使用 <code class="highlighter-rouge">readAsString()</code> 读取整个文件内容，
使用 <code class="highlighter-rouge">readAsLines()</code> 按行读取。
以上两种读取方式都会返回一个 Future 对象， 文件内容通过Future 对象以一个或多个字符串的方式提供。</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (readAsString)" replace="/\btest_data\///g"?>
<pre class="prettyprint lang-dart">Future main() async {
  var config = File('config.txt');
  var contents;

  // 将整个文件内容读取到一个字符串中。
  contents = await config.readAsString();
  print('The file is ${contents.length} characters long.');

  // 将整个文件内容按行读取。
  contents = await config.readAsLines();
  print('The file is ${contents.length} lines long.');
}</pre>

<h4 id="以库的方式读取文件">以库的方式读取文件</h4>

<p>以下代码将整个文件按字节读取到整数 List 中。
<code class="highlighter-rouge">readAsBytes()</code> 函数返回一个 Future 对象，
当 Future 对象有效时，
由 Future 对象提供读取内容。</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (readAsBytes)" replace="/\btest_data\///g"?>
<pre class="prettyprint lang-dart">Future main() async {
  var config = File('config.txt');

  var contents = await config.readAsBytes();
  print('The file is ${contents.length} bytes long.');
}</pre>

<h4 id="错误处理">错误处理</h4>

<p>为了防止产生未捕获异常，应该对错误进行捕获。
错误捕获可以通过对 Future 注册 <code class="highlighter-rouge">catchError</code> 处理函数，
或者（在异步方法中）使用 Try-Catch 进行处理。</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (try-catch)" replace="/does-not-exist/config/g"?>
<pre class="prettyprint lang-dart">Future main() async {
  var config = File('config.txt');
  try {
    var contents = await config.readAsString();
    print(contents);
  } catch (e) {
    print(e);
  }
}</pre>

<h4 id="流式文件操作">流式文件操作</h4>

<p>使用 Stream 一次读取一个文件，可以每次只读取文件的一小部分。
操作可以使用 <a href="/guides/libraries/library-tour#stream">Stream API</a> 
或 <code class="highlighter-rouge">await for</code> ，这些异步操作包含在 Dart <a href="/guides/language/language-tour#asynchrony-support">异步支持中</a>。</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (read-from-stream)" replace="/_?test_\w*\/?//g"?>
<pre class="prettyprint lang-dart">import 'dart:io';
import 'dart:convert';

Future main() async {
  var config = File('config.txt');
  Stream&lt;List&lt;int&gt;&gt; inputStream = config.openRead();

  var lines = inputStream
      .transform(utf8.decoder)
      .transform(LineSplitter());
  try {
    await for (var line in lines) {
      print('Got ${line.length} characters from stream');
    }
    print('file is now closed');
  } catch (e) {
    print(e);
  }
}</pre>

<h4 id="写入文件内容">写入文件内容</h4>

<p>文件数据的写入使用 <a href="https://api.dartlang.org/stable/dart-io/IOSink-class.html">IOSink</a> 对象。 <a href="https://api.dartlang.org/stable/dart-io/IOSink-class.html">IOSink</a> 对象可以通过 File 对象的 <code class="highlighter-rouge">openWrite()</code> 获取，
获取 IOSink][] 后即可通过它想文件写入数据。
文件写入的默认模式为 <code class="highlighter-rouge">FileMode.write</code> ，写入数据将完全覆盖文件现有内容。</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (write-file)" replace="/\btest_data\///g"?>
<pre class="prettyprint lang-dart">var logFile = File('log.txt');
var sink = logFile.openWrite();
sink.write('FILE ACCESSED ${DateTime.now()}\n');
await sink.flush();
await sink.close();</pre>

<p>要在文件末尾追加内容，需要指定 <code class="highlighter-rouge">openWrite()</code> 的可选参数 <code class="highlighter-rouge">mode</code> 为 <code class="highlighter-rouge">FileMode.append</code> 模式：</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (append)" replace="/_?test_\w*\/?//g"?>
<pre class="prettyprint lang-dart">var sink = logFile.openWrite(mode: FileMode.append);</pre>

<p>使用 <code class="highlighter-rouge">add(List&lt;int&gt; data)</code> 方法为文件写入二进制数据。</p>

<h4 id="获取目录中的文件列表">获取目录中的文件列表</h4>

<p>查找目录的所有文件和子目录是一个异步操作。<code class="highlighter-rouge">list()</code> 返回一个 Stream 对象。
当异步检索到一个文件或目录时，会得到一个文件或目录的实体对象（FileSystemEntity）。</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (list-dir)" replace="/\btest_data\b/tmp/g"?>
<pre class="prettyprint lang-dart">Future main() async {
  var dir = Directory('tmp');

  try {
    var dirList = dir.list();
    await for (FileSystemEntity f in dirList) {
      if (f is File) {
        print('Found file ${f.path}');
      } else if (f is Directory) {
        print('Found dir ${f.path}');
      }
    }
  } catch (e) {
    print(e.toString());
  }
}</pre>

<h4 id="其他公共方法">其他公共方法</h4>

<p>File 和 Directory 类中包含的其他方法，方法包括但不限于以下内容：</p>

<ul>
  <li>在 File 和 Directory 中使用 <code class="highlighter-rouge">create()</code> 方法创建一个文件或目录</li>
  <li>在 File 和 Directory 中使用 <code class="highlighter-rouge">delete()</code> 方法删除一个文件或目录</li>
  <li>在 File 中使用 <code class="highlighter-rouge">length()</code> 方法获取一个文件的长度。</li>
  <li>在 File 中使用 <code class="highlighter-rouge">open()</code> 方法随机访问一个文件。</li>
</ul>

<p>全部方法列表参考 <a href="https://api.dartlang.org/stable/dart-io/File-class.html">File</a> 和 <a href="https://api.dartlang.org/stable/dart-io/Directory-class.html">Directory</a> API 文档。</p>

<h3 id="http-客户端和服务端">
<a id="http-客户端和服务端" class="anchor" href="#http-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%92%8C%E6%9C%8D%E5%8A%A1%E7%AB%AF" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTTP 客户端和服务端</h3>

<p>dart:io 库提供 HTTP 相关的类，基于这些类命令行应用可以访问 HTTP 资源及运行 HTTP 服务。</p>

<h4 id="http-服务">HTTP 服务</h4>

<p><a href="https://api.dartlang.org/stable/dart-io/HttpServer-class.html">HttpServer</a> 类提供用于构建 Web 服务的底层方法。 
该类用于匹配请求处理程序，设置 Header ，Stream 数据等。</p>

<p>下面 Web 服务示例返回简单文本信息。
服务侦听端口 8888 和地址 127.0.0.1（localhost），响应 <code class="highlighter-rouge">/dart</code> 路径的请求。
对于任何其他路径，响应状态码 404（找不到页面）。</p>

<?code-excerpt "misc/lib/library_tour/io/http_server.dart" replace="/\b_//g"?>
<pre class="prettyprint lang-dart">Future main() async {
  final requests = await HttpServer.bind('localhost', 8888);
  await for (var request in requests) {
    processRequest(request);
  }
}

void processRequest(HttpRequest request) {
  print('Got request for ${request.uri.path}');
  final response = request.response;
  if (request.uri.path == '/dart') {
    response
      ..headers.contentType = ContentType(
        'text',
        'plain',
      )
      ..write('Hello from the server');
  } else {
    response.statusCode = HttpStatus.notFound;
  }
  response.close();
}</pre>

<h4 id="http-客户端">HTTP 客户端</h4>

<p>通过 HttpClient 类从 Dart 命令行或服务端应用程序访问 HTTP 资源。
该类可以设置 Header ，HTTP 访问方式（GET，POST）以及读取和写入数据。
HttpClient 类无法在浏览器的应用中使用。
为浏览器编写应用时，应该使用<a href="https://api.dartlang.org/stable/dart-html/HttpRequest-class.html">dart:html HttpRequest 类</a>。
下面是 HttpClient 的使用示例：</p>

<?code-excerpt "misc/test/library_tour/io_test.dart (client)"?>
<pre class="prettyprint lang-dart">Future main() async {
  var url = Uri.parse('http://localhost:8888/dart');
  var httpClient = HttpClient();
  var request = await httpClient.getUrl(url);
  var response = await request.close();
  var data = await response.transform(utf8.decoder).toList();
  print('Response ${response.statusCode}: $data');
  httpClient.close();
}</pre>

<h3 id="更多内容-3">
<a id="更多内容-3" class="anchor" href="#%E6%9B%B4%E5%A4%9A%E5%86%85%E5%AE%B9-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>更多内容</h3>

<p>本章只是介绍了 <a href="https://api.dartlang.org/stable/dart-io/dart-io-library.html">dart:io</a> 库主要功能的使用。除了本章中提到的 API 以外，dart:io 库还提供了
<a href="https://api.dartlang.org/stable/dart-io/Process-class.html">进程</a>， <a href="https://api.dartlang.org/stable/dart-io/Socket-class.html">套接字</a>，以及 <a href="https://api.dartlang.org/stable/dart-io/WebSocket-class.html">WebSocket</a> 的 API 。
有关服务端和命令行应用程序开发的更多内容，请参阅<a href="/server">服务端 Dart 综述</a>。</p>

<p>有关其他 dart:* 库的内容，请参阅<a href="/guides/libraries/library-tour">库概览</a>。</p>

<h2 id="总结">
<a id="总结" class="anchor" href="#%E6%80%BB%E7%BB%93" aria-hidden="true"><span class="octicon octicon-link"></span></a>总结</h2>

<p>本页向您介绍了 Dart 内置库中最常用的功能。
但是，并没有涵盖所有内置库。
您可能想要查看的其他内容包括 <a href="https://api.dartlang.org/stable/dart-collection/dart-collection-library.html">dart:collection</a> 和 <a href="https://api.dartlang.org/stable/dart-typed_data/dart-typed_data-library.html">dart:typed_data,</a> ，
以及特定于平台的库，如 <a href="/web/libraries">Dart web development libraries</a> 和 <a href="https://api.flutter.dev">Flutter libraries.</a> 。</p>

<p>您可以使用 <a href="/guides/packages">pub 包管理</a> 工具获得更多库。
<a href="https://pub.dev/packages/collection">collection,</a>
<a href="https://pub.dev/packages/crypto">crypto,</a>
<a href="https://pub.dev/packages/http">http,</a>
<a href="https://pub.dev/packages/intl">intl,</a> 以及
<a href="https://pub.dev/packages/test">test</a>
以上只是简单的列举了一些可以通过 pub 安装的库。</p>

<p>要了解有关 Dart 语言的更多信息，请参考
<a href="/guides/language/language-tour">language tour</a>。</p>


          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="container">
    <div class="content">
      <div class="text-center" martdown="1">
        <style>.menu .material-icons { font-size: 14px; }</style><ul class="menu">
          <li><a href="/terms">Terms</a></li>
          <li><a href="/security">Security</a></li>
          <li><a href="http://www.google.com/intl/en/policies/privacy/" class="no-automatic-external">Privacy</a></li>
          <li>Site&nbsp;<a href="http://creativecommons.org/licenses/by/3.0/" class="no-automatic-external">CC&nbsp;BY&nbsp;3.0</a></li>
          <li><a href="/about_zh_CN">关于 dart.dev 中文版</a></li>
          <li>
            <a href="https://github.com/dartchina/site-www-cn"
               title="该站在 GitHub 开源"
               class="no-automatic-external"><i class="fab fa-github fa-sm"></i></a>
            &nbsp;
            <a href="https://github.com/dartchina/site-www-cn/issues"
               title="为该站提交 issue"
               class="no-automatic-external"><i class="fas fa-bug fa-sm"></i></a>
            &nbsp;
            <a 
               title="Site built on 2019/06/05 02:01 PDT"
               
               class="no-automatic-external"><i class="fas fa-wrench fa-sm"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
