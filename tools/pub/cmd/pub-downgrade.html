<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en_US" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Use pub downgrade to get the lowest versions of all dependencies used by your Dart application.">
  <title>pub downgrade | Dart</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/touch-icon-iphone-a46c306c4fbfae0b28d63f512b01d7cb2ccf1e4ca9d7f3aab15ba1170beed4a0.png" rel="apple-touch-icon">
  <link href="/assets/touch-icon-ipad-d0181720760b3912858b6d40da1d5586b1e92c7c8656a485ea41005674401e6b.png" rel="apple-touch-icon" sizes="76x76">
  <link href="/assets/touch-icon-iphone-retina-3d9821a631425376ac6203dea3c23c1940ab7b5c506a25406662fab76cee2e0b.png" rel="apple-touch-icon" sizes="120x120">
  <link href="/assets/touch-icon-ipad-retina-b9715401952522f1daee2b4a4064a1bbfb5ffab78d0a47a7226dc87444d51c32.png" rel="apple-touch-icon" sizes="152x152">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="pub downgrade" />
  <meta name="twitter:description" content="Use pub downgrade to get the lowest versions of all dependencies used by your Dart application." />

  <!-- Open Graph -->
  <meta property="og:title" content="pub downgrade" />
  <meta property="og:description" content="Use pub downgrade to get the lowest versions of all dependencies used by your Dart application." />
  <meta property="og:url" content="https://www.dartlang.org/tools/pub/cmd/pub-downgrade" />
  <meta property="og:image" content="https://www.dartlang.org/assets/shared/dart-logo-for-shares.png?2" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/assets/main-ae5a1f5445adb3a3d545e29df5118c4a74530bb3bf24d53b35897ced883dae0f.css">
  <script src="/assets/main-3e89b739cc750412e013252d8b4ced20af281589ffe69a156e6c279177f81069.js" type="text/javascript"></script>
  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


</head>

  <body class="default">
    <header id="page-header">
  <nav id="mainnav">
  <div id="menu-toggle"><i class="icon icon-menu"></i></div>
  <a href="/" class="brand" title="Dart">
    <img src="/assets/shared/dart/logo+text/horizontal/default-363c9c133ffb7780463d3d638632b64cc8221d74d93cd1002fb1efbbe9983bc9.svg" alt="Dart">
  </a>
  <ul>
    <li class="mainnav__get-started"><a href="/guides/get-started"><span>入门</span></a></li>
    <li><a href="/guides/language">语言</a></li>
    <li><a href="/guides/libraries">库</a></li>
    <li><a href="/tools">工具</a></li>
    
    
    <li class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dart 2</a>
      <ul class="dropdown-menu">
        

<li><a href="https://v1-dartlang-org.firebaseapp.com/tools/pub/cmd/pub-downgrade" class="dropdown-item no-automatic-external">1.24.3&nbsp;&nbsp;(archive)</a></li><li><a class="active dropdown-item">2.1.0&nbsp;&nbsp;(stable)</a></li>

        <li role="separator" class="dropdown-divider"></li>
        <li><a class="dropdown-item" href="/dart-2#migration">迁移指南</a></li>
      </ul>
    </li>
    
    <li class="searchfield">
      <form class="navbar-search" action="/search" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input type="search" name="q" id="q" autocomplete="off" placeholder="Search">
        <button type="submit"><i class="icon icon-search"></i></button>
      </form>
    </li>
  </ul>
</nav>

  
</header>

    <main id="page-content">
      <div id="sidenav" class="">
  <div class="content">
    <a href="/" class="brand" title="Dart">
      <img src="/assets/shared/dart/logo+text/horizontal/default-363c9c133ffb7780463d3d638632b64cc8221d74d93cd1002fb1efbbe9983bc9.svg" alt="Dart">
    </a>

    <div class="sidenav__search">
      <p>
        <a href="/search">Search <i class="icon icon-search"></i></a>
      </p>
    </div>

    <ul>
      <li>
        <a class="btn btn-light" href="/guides/get-started">入门</a>
      </li>
    </ul>
    <h4 ><a href="/guides/language" title="语言">语言</a></h4>
  <ul><li >
          <a href="/guides/language/language-tour" title="概览">概览</a>
        </li>
        
        <li >
          <a href="/guides/language/effective-dart" title="Effective Dart">Effective Dart</a>
          <i class="icon icon-arrow"></i>
          <ul><li >
                <a href="/guides/language/effective-dart/style" title="风格">风格</a>
              </li><li >
                <a href="/guides/language/effective-dart/documentation" title="文档">文档</a>
              </li><li >
                <a href="/guides/language/effective-dart/usage" title="使用">使用</a>
              </li><li >
                <a href="/guides/language/effective-dart/design" title="设计">设计</a>
              </li>
          </ul><li >
          <a href="/samples" title="示例代码">示例代码</a>
        </li>
  </ul><h4 ><a href="/guides/libraries" title="库">库</a></h4>
  <ul><li >
          <a href="/guides/libraries/library-tour" title="概览">概览</a>
        </li>
  </ul><h4 ><a href="/guides/platforms" title="平台">平台</a></h4>
  <ul><li >
          <a href="https://flutterchina.club" title="移动端 (Flutter中文网)">移动端 (Flutter中文网)</a>
        </li><li >
          <a href="https://webdev.dartlang.org" title="Web">Web</a>
        </li><li >
          <a href="/server" title="服务器">服务器</a>
        </li>
  </ul><h4 ><a href="/guides/testing" title="测试">测试</a></h4>
  <ul>
  </ul><h4 >资源</h4>
  <ul><li >
          <a href="/install" title="安装">安装</a>
        </li><li >
          <a href="/codelabs" title="Codelab">Codelab</a>
        </li><li >
          <a href="/tutorials" title="学习指南">学习指南</a>
        </li><li >
          <a href="/articles" title="文章">文章</a>
        </li><li class="active">
          <a href="/tools" title="工具">工具</a>
        </li><li >
          <a href="/community" title="社区支持">社区支持</a>
        </li>
  </ul>
  </div>
</div>

      
<div id="toc">
  <div class="content">
    <header class="h4 text-uppercase">
      目录
      <a title="Back to top" class="back-to-top float-right mr-3">
        <i class="fas fa-angle-up"></i>
      </a>
    </header>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#downgrading-specific-dependencies">Downgrading specific dependencies</a></li>
<li class="toc-entry toc-h2"><a href="#getting-a-new-dependency">Getting a new dependency</a></li>
<li class="toc-entry toc-h2"><a href="#removing-a-dependency">Removing a dependency</a></li>
<li class="toc-entry toc-h2"><a href="#downgrading-while-offline">Downgrading while offline</a></li>
<li class="toc-entry toc-h2"><a href="#options">Options</a></li>
</ul>
  </div>
</div>


      <article>
        <div class="content">
          
          

          

<nav aria-label="breadcrumb">
  <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
  <li class="breadcrumb-item"
      property="itemListElement" typeof="ListItem"><a href="/tools" property="item" typeof="WebPage"><span property="name">工具</span>
      </a>
      <meta property="position" content="1" />
    </li>
  <li class="breadcrumb-item"
      property="itemListElement" typeof="ListItem"><a href="/tools/pub" property="item" typeof="WebPage"><span property="name">Pub</span>
      </a>
      <meta property="position" content="2" />
    </li>
  <li class="breadcrumb-item"
      property="itemListElement" typeof="ListItem"><a href="/tools/pub/cmd" property="item" typeof="WebPage"><span property="name">Pub Commands</span>
      </a>
      <meta property="position" content="3" />
    </li>
  <li class="breadcrumb-item active"
      property="itemListElement" typeof="ListItem" aria-current="page"><a href="/tools/pub/cmd/pub-downgrade" property="item" typeof="WebPage"><span property="name">pub downgrade</span>
      </a>
      <meta property="position" content="4" />
    </li>
  
  </ol>
</nav>
          <div>
            <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/tools/pub/cmd/pub-downgrade.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/dartchina/site-www-cn/issues/new?title='pub downgrade' page issue&body=
Page URL: https://www.dartlang.org/tools/pub/cmd/pub-downgrade%0D%0A
Page source: https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/tools/pub/cmd/pub-downgrade.md%0D%0A
%0D%0A
<!-- ADD YOUR DESCRIPTION OF THE PAGE ISSUE HERE: -->" class="btn no-automatic-external" title="Report a issue with this page"
    target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

            <h1>pub downgrade</h1>
          </div>
          <p><em>Downgrade</em> is one of the commands of the <em>pub</em> tool.
<a href="/tools/pub">Learn more about pub</a>.</p>

<pre class="prettyprint lang-sh">$ pub downgrade [args] [dependencies]</pre>

<p>Without any additional arguments, <code class="highlighter-rouge">pub downgrade</code> gets the lowest versions of
all the dependencies listed in the <a href="/tools/pub/pubspec"><code class="highlighter-rouge">pubspec.yaml</code></a> file
in the current working directory, as well as their <a href="/tools/pub/glossary#transitive-dependency">transitive
dependencies</a>.
For example:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> pub downgrade
<span class="go">Resolving dependencies... (1.2s)
+ barback 0.13.0
+ collection 0.9.1
+ path 1.2.0
+ source_maps 0.9.0
+ source_span 1.0.0
+ stack_trace 0.9.1
Changed 6 dependencies!
</span></code></pre></div></div>

<p>The <code class="highlighter-rouge">pub downgrade</code> command creates a lockfile. If one already exists,
pub ignores that file and generates a new one from scratch, using the lowest
versions of all dependencies.</p>

<p>See the <a href="/tools/pub/cmd/pub-get"><code class="highlighter-rouge">pub get</code> documentation</a> for more information
on package resolution and the system package cache.</p>

<h2 id="downgrading-specific-dependencies">
<a id="downgrading-specific-dependencies" class="anchor" href="#downgrading-specific-dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Downgrading specific dependencies</h2>

<p>It’s possible to tell <code class="highlighter-rouge">pub downgrade</code> to downgrade specific dependencies to the
lowest version while leaving the rest of the dependencies alone as much as
possible. For example:</p>

<div class="language-terminal highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> pub downgrade <span class="nb">test</span>
<span class="go">Resolving dependencies...
  barback 0.15.2+2
  bot 0.27.0+2
  browser 0.10.0+2
  chrome 0.6.5
  collection 1.1.0
  path 1.3.0
  pool 1.0.1
  source_span 1.0.2
&lt; stack_trace 0.9.2 (was 1.1.1)
  stagexl 0.10.2
&lt; test 0.10.0 (was 0.11.4)
These packages are no longer being depended on:
- matcher 0.11.3
Changed 3 dependencies!
</span></code></pre></div></div>

<p>If you are downgrading a specific dependency, pub tries to find the
highest versions of any transitive dependencies that fit the new dependency
constraints. Any transitive dependencies are usually also downgraded
as a result.</p>

<h2 id="getting-a-new-dependency">
<a id="getting-a-new-dependency" class="anchor" href="#getting-a-new-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting a new dependency</h2>

<p>If a dependency is added to the pubspec before <code class="highlighter-rouge">pub downgrade</code> is run,
it gets the new dependency and any of its transitive dependencies,
placing them in the <code class="highlighter-rouge">.packages</code> file. This
is the same behavior as <code class="highlighter-rouge">pub get</code>.</p>

<h2 id="removing-a-dependency">
<a id="removing-a-dependency" class="anchor" href="#removing-a-dependency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Removing a dependency</h2>

<p>If a dependency is removed from the pubspec before <code class="highlighter-rouge">pub downgrade</code> is
run, it removes the dependency from the <code class="highlighter-rouge">.packages</code> file,
thus making the dependency unavailable for
importing. Any transitive dependencies of the removed dependency are
also removed, as long as no remaining immediate dependencies also
depend on them. This is the same behavior as <code class="highlighter-rouge">pub get</code>.</p>

<h2 id="downgrading-while-offline">
<a id="downgrading-while-offline" class="anchor" href="#downgrading-while-offline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Downgrading while offline</h2>

<p>If you don’t have network access, you can still run <code class="highlighter-rouge">pub downgrade</code>.
Because pub downloads packages to a central cache shared by all packages
on your system, it can often find previously downloaded packages
without needing to use the network.</p>

<p>However, by default, <code class="highlighter-rouge">pub downgrade</code> tries to go online if you
have any hosted dependencies.
If you don’t want pub to do that, pass it the <code class="highlighter-rouge">--offline</code> flag.
In offline mode, pub looks only in your local package cache,
trying to find a set of versions that work with your package from what’s already
available.</p>

<h2 id="options">
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h2>

<p>The <code class="highlighter-rouge">pub downgrade</code> command supports the
<a href="/tools/pub/cmd/pub-get#options"><code class="highlighter-rouge">pub get</code> options</a>.</p>

<p>For options that apply to all pub commands, see
<a href="/tools/pub/cmd#global-options">Global options</a>.</p>

<aside class="alert alert-info">
  <p><em>Problems?</em> See <a href="/tools/pub/troubleshoot">Troubleshooting Pub</a>.</p>
</aside>

          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-md-12 col-lg-3">
        <div class="content">
          <div class="brand">
            <img src="/assets/shared/dart/logo+text/horizontal/mono-004b4974b3112e2d9136b1c457037dfd9fe54e2e69e850d777891e5c2a57a78d.svg" alt="Dart logo" class="brand"/>
          </div>
          <h4><a href="/terms">Terms</a> | <a href="https://policies.google.com/privacy">Privacy</a></h4>
          <style>.menu .material-icons { font-size: 14px; }</style><ul class="menu">
            <li>Site&nbsp;<a href="http://creativecommons.org/licenses/by/3.0/" class="no-automatic-external">CC&nbsp;BY&nbsp;3.0</a></li>
            <li>
              <a href="https://github.com/dartchina/site-www-cn"
                 title="This site's source is on GitHub."
                 class="no-automatic-external"><i class="fab fa-github fa-sm"></i></a>
              &nbsp;
              <a href="https://github.com/dartchina/site-www-cn/issues"
                 title="File an issue about this site."
                 class="no-automatic-external"><i class="fas fa-bug fa-sm"></i></a>
              &nbsp;
              <a 
                 title="Site built on 2019/01/07 11:51 CST"
                 
                 class="no-automatic-external"><i class="material-icons">build</i></a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-md-4 col-lg-3">
        <div class="content">
          <h4>技术</h4>
          <ul>
            <li><a href="https://flutterchina.club">Dart 移动开发 (Flutter)</a></li>
            <li><a href="https://webdev.dartlang.org">Dart web 开发</a></li>
            <li><a href="/server">Dart 服务器开发</a></li>
            <li><a href="https://dart-lang.github.io/observatory/">Observatory 工具</a></li>
            <li><a href="/guides/libraries">Dart 库</a></li>
            <li><a href="/guides/language">Dart 编程语言</a></li>
          </ul>
        </div>
      </div>

      <div class="col-md-4 col-lg-3">
        <div class="content">
          <h4>资源</h4>
          <ul>
            <li><a href="https://api.dartlang.org/stable">API 参考</a></li>
            <li><a href="https://dartpad.dartlang.org/">DartPad</a></li>
            <li><a href="https://pub.dartlang.org/">Pub packages</a></li>
            <li><a href="http://news.dartlang.org/">Dart 新闻</a></li>
            <li><a href="https://github.com/dart-lang/sdk/issues">Dart bugs 和 <br> 新需求</a></li>
          </ul>
        </div>
      </div>

      <div class="col-md-4 col-lg-3">
        <div class="content">
          <h4>社区</h4>
          <ul>
            <li><a href="/community">支持和邮件列表</a></li>
            <li><a href="/community/who-uses-dart">谁在用Dart</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a></li>
            <li>G+ <a href="https://plus.google.com/communities/114566943291919232850">社区</a> &
                <a href="https://plus.google.com/b/109866369054280216564/+dartlang">公告组</a></li>
            <li><a href="https://gitter.im/dart-lang/home">Gitter聊天室</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>
