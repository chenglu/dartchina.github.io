<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en_US" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="如何编写健全的 Dart 代码。">
  <title>The Dart 类型系统 | Dart</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/touch-icon-iphone-a46c306c4fbfae0b28d63f512b01d7cb2ccf1e4ca9d7f3aab15ba1170beed4a0.png" rel="apple-touch-icon">
  <link href="/assets/touch-icon-ipad-d0181720760b3912858b6d40da1d5586b1e92c7c8656a485ea41005674401e6b.png" rel="apple-touch-icon" sizes="76x76">
  <link href="/assets/touch-icon-iphone-retina-3d9821a631425376ac6203dea3c23c1940ab7b5c506a25406662fab76cee2e0b.png" rel="apple-touch-icon" sizes="120x120">
  <link href="/assets/touch-icon-ipad-retina-b9715401952522f1daee2b4a4064a1bbfb5ffab78d0a47a7226dc87444d51c32.png" rel="apple-touch-icon" sizes="152x152">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="The Dart 类型系统" />
  <meta name="twitter:description" content="如何编写健全的 Dart 代码。" />

  <!-- Open Graph -->
  <meta property="og:title" content="The Dart 类型系统" />
  <meta property="og:description" content="如何编写健全的 Dart 代码。" />
  <meta property="og:url" content="https://www.dartlang.org/guides/language/sound-dart" />
  <meta property="og:image" content="https://www.dartlang.org/assets/shared/dart-logo-for-shares.png?2" />
  <link href="https://fonts.googleapis.com/css?family=Google+Sans:300,400,500|Google+Sans+Display:400|Roboto:300,400,500|Roboto+Mono:300,400,700|Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" integrity="sha256-lvdbRd5XL46Jdp5k8t0obwZZImb/IxNQqdFjAKAsnb0=" crossorigin="anonymous" href="/assets/main-96f75b45de572f8e89769e64f2dd286f06592266ff231350a9d16300a02c9dbd.css">
  <script src="/assets/main-81783b1b9a1d39209aa2ec2eab702b1f7908b15082a3aef81ba13f2255d48ec4.js" integrity="sha256-gXg7G5odOSCaouwuq3ArH3kIsVCCo674G6E/IlXUjsQ=" crossorigin="anonymous" type="text/javascript"></script>
  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


 </head>
  <body class="default show_banner">
    <header id="page-header" class="site-header">
  <nav id="mainnav" class="site-header">
  <div id="menu-toggle"><i class="icon icon-menu"></i></div>
  <a href="/" class="brand" title="Dart">
    <img src="/assets/shared/dart/logo+text/horizontal/white-e71fb382ad5229792cc704b3ee7a88f8013e986d6e34f0956d89c453b454d0a5.svg" alt="Dart">
  </a>
  <ul class="navbar">
    <li class="mainnav__get-started">
      <a href="/docs" class="nav-link active"><span>文档</span></a>
    </li>
    <li>
      <a href="/platforms" class="nav-link">平台</a>
    </li>
    <li>
      <a href="/community" class="nav-link">社区</a>
    </li>
    <li>
      <a href="https://dartpad.cn/" target="_blank" class="nav-link no-automatic-external">体验 Dart</a>
    </li>
    <li>
      <a href="/get-dart" class="nav-link">安装 Dart</a>
    </li>
    <li>
      <a href="/about_zh_CN" class="nav-link">关于</a>
    </li>
    <li class="searchfield">
      <form action="/search" class="site-header__search form-inline" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
      </form>
    </li>
  </ul>
</nav>

  
</header>
 <div class="banner">
  <p class="banner__text">
    
    
    Dart 2.3 发布，针对构建用户界面进行了优化。
    <a class="external" href="https://medium.com/dartlang/announcing-dart-2-3-optimized-for-building-user-interfaces-e84919ca1dff">了解更多。</a>
  </p>
</div>
 

    <div id="sidenav" class="">
  <form action="/search/" class="site-header__search form-inline">
    <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
  </form>

  <div class="site-sidebar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/platforms" class="nav-link">平台</a>
      </li>
      <li class="nav-item">
        <a href="/community" class="nav-link">社区</a>
      </li>
      <li class="nav-item">
        <a href="https://dartpad.cn" class="nav-link">体验 Dart</a>
      </li>
      <li class="nav-item">
        <a href="/guides" class="nav-link active">文档</a>
      </li>
      <li>
        <a href="/about_zh_CN" class="nav-link">关于</a>
      </li>
    </ul>

    <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button"
        aria-expanded="false" aria-controls="sidenav-1"
      >示例 & 教程</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/samples">示例程序</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs">Codelab</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials">教程</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-2" role="button"
        aria-expanded="true" aria-controls="sidenav-2"
      >语言</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="/guides/language/language-tour">概览</a>
  </li><li class="nav-item">
    <a class="nav-link active" href="/guides/language/sound-dart">类型系统</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/spec">规范</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart">Effective Dart</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-3" role="button"
        aria-expanded="false" aria-controls="sidenav-3"
      >核心库</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link" href="/guides/libraries">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/library-tour">概览</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-3"
      href="#sidenav-3-3" role="button"
      aria-expanded="false" aria-controls="sidenav-3-3"
    >文章
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/articles/libraries/dart-io">Intro to dart:io</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/articles/libraries/creating-streams">Creating streams</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button"
        aria-expanded="false" aria-controls="sidenav-4"
      >包</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/guides/packages">如何使用包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/useful-libraries">常用的包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/create-library-packages">创建包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/publishing">发布包</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-4-5"
      href="#sidenav-4-5" role="button"
      aria-expanded="false" aria-controls="sidenav-4-5"
    >引用包
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4-5">
      <li class="nav-item">
    <a class="nav-link" href="/tools/pub/dependencies">依赖</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/glossary">术语</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/package-layout">包的设计约定</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/environment-variables">Pub 环境变量</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/pubspec">Pubspec 文件</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/troubleshoot">Pub 问题分析与解决</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/versioning">版本</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button"
        aria-expanded="false" aria-controls="sidenav-5"
      >开发</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/tutorials/language/futures">Futures & Async-Await</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/json">使用 JSON</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/language/streams">Stream</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/mobile">移动应用</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-5"
      href="#sidenav-5-5" role="button"
      aria-expanded="false" aria-controls="sidenav-5-5"
    >命令行应用 & 服务应用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-5">
      <li class="nav-item">
    <a class="nav-link" href="/server">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/get-started">入门</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/cmdline">编写命令行应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/httpserver">编写 HTTP 客户端和服务端应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/c-interop">C & C++ 交互</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/libraries">库和包</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-6"
      href="#sidenav-5-6" role="button"
      aria-expanded="false" aria-controls="sidenav-5-6"
    >Web 应用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-6">
      <li class="nav-item">
    <a class="nav-link" href="/web">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/get-started">入门</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/fetch-data">动态获取数据</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-6-4"
      href="#sidenav-5-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-5-6-4"
    >底层 Web 编程
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/connect-dart-html">Dart 和 HTML 关联</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/add-elements">在 DOM 中增加 Element</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/remove-elements">在 DOM 中移除 Element</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/web/js-interop">JS/TS 交互</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/deployment">开发</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/libraries">库和包</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-6" role="button"
        aria-expanded="false" aria-controls="sidenav-6"
      >工具 & 技巧</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/tools">综述</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-2"
      href="#sidenav-6-2" role="button"
      aria-expanded="false" aria-controls="sidenav-6-2"
    >编辑 & 调试
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/dart-devtools">Dart DevTool</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/dartpad">DartPad</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/jetbrains-plugin">IntelliJ & Android Studio</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">VS Code</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-3"
      href="#sidenav-6-3" role="button"
      aria-expanded="false" aria-controls="sidenav-6-3"
    >命令行工具
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-3">
      <li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-1"
      href="#sidenav-6-3-1" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-1"
    >Dart SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/tools/sdk">综述</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-vm">dart (Dart VM)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart2aot">dart2aot & dartaotruntime</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart2js">dart2js (prod JS)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartanalyzer">dartanalyzer</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartdevc">dartdevc (dev JS)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartdoc">dartdoc</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartfmt">dartfmt</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/pub/cmd">pub</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-2"
      href="#sidenav-6-3-2" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-2"
    >其他命令行工具
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/build_runner">build_runner</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/webdev">webdev</a>
  </li>
  </ul>
  </li>
</ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-4"
      href="#sidenav-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-6-4"
    >源码管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/formatting">格式化代码</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/private-files">哪些内容不应该被提交</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-5"
      href="#sidenav-6-5" role="button"
      aria-expanded="false" aria-controls="sidenav-6-5"
    >静态分析
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-5">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/analysis-options">Customizing static analysis</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/sound-problems">Fixing common type problems</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-6"
      href="#sidenav-6-6" role="button"
      aria-expanded="false" aria-controls="sidenav-6-6"
    >测试 & 优化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-6">
      <li class="nav-item">
    <a class="nav-link" href="/guides/testing">测试</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/debugging">调试 Web 应用</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-7" role="button"
        aria-expanded="false" aria-controls="sidenav-7"
      >资源</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/code-of-conduct">行为守则</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/faq">FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-7-3"
      href="#sidenav-7-3" role="button"
      aria-expanded="false" aria-controls="sidenav-7-3"
    >历史
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7-3">
      <li class="nav-item">
    <a class="nav-link" href="/dart-2">迁移到 Dart&nbsp;2</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/dart-2">迁移 Web 应用到 Dart&nbsp;2</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/obsolete">过时的 Pub 功能</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-8" role="button"
        aria-expanded="true" aria-controls="sidenav-8"
      >相关网站</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-8">
        <li class="nav-item">
    <a class="nav-link" href="https://api.dartlang.org" target="_blank" rel="noopener">API 参考<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://medium.com/dartlang" target="_blank" rel="noopener">Blog<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dartpad.cn" target="_blank" rel="noopener">DartPad (在线编辑器)<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.dev" target="_blank" rel="noopener">Flutter<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev" target="_blank" rel="noopener">Pub 包资源<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

  </div>
</div>

    <main id="page-content">
      







<div id="site-toc--side" class="site-toc ">
  <header class="site-toc__title">
    大纲
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
  </header>
  <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#什么是类型安全">什么是类型安全</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#类型安全的好处">类型安全的好处</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#tips-for-passing-static-analysis">Tips for passing static analysis</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#use-sound-return-types-when-overriding-methods">Use sound return types when overriding methods</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#use-sound-parameter-types-when-overriding-methods">Use sound parameter types when overriding methods</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#dont-use-a-dynamic-list-as-a-typed-list">Don’t use a dynamic list as a typed list</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#runtime-checks">Runtime checks</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#type-inference">Type inference</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#field-and-method-inference">Field and method inference</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#static-field-inference">Static field inference</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#local-variable-inference">Local variable inference</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#type-argument-inference">Type argument inference</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#substituting-types">Substituting types</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#simple-type-assignment">Simple type assignment</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#generic-type-assignment">Generic type assignment</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#methods">Methods</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#other-resources">Other resources</a></li>
</ul>
</div>


      <article>
        <div class="content">
          

          <div>
            <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/_guides/language/sound-dart.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/dartchina/site-www-cn/issues/new?title='The Dart 类型系统' page issue&body=
Page URL: https://www.dartlang.org/guides/language/sound-dart%0D%0A
Page source: https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/_guides/language/sound-dart.md%0D%0A
%0D%0A
Found a typo? You can fix it yourself by going to the page source and clicking the pencil icon. Or finish creating this issue.%0D%0A
%0D%0A
Description of issue:" class="btn no-automatic-external" title="Report an issue with this page"
    target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

            <h1>The Dart 类型系统</h1>
          </div>
          







<div id="site-toc--inline" class="site-toc toc-collapsible toc-collapsed">
  <header class="site-toc__title">
    大纲
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
      <span class="site-toc--inline__toggle toc-toggle-down"><i class="fas fa-chevron-down fa-m"></i></span>
      <span class="site-toc--inline__toggle toc-toggle-up"><i class="fas fa-chevron-up fa-m"></i></span>
    
  </header>
  <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#什么是类型安全">什么是类型安全</a></li>
<li class="toc-entry toc-h2"><a href="#类型安全的好处">类型安全的好处</a></li>
<li class="toc-entry toc-h2"><a href="#tips-for-passing-static-analysis">Tips for passing static analysis</a>
<ul>
<li class="toc-entry toc-h3"><a href="#use-sound-return-types-when-overriding-methods">Use sound return types when overriding methods</a></li>
<li class="toc-entry toc-h3"><a href="#use-sound-parameter-types-when-overriding-methods">Use sound parameter types when overriding methods</a></li>
<li class="toc-entry toc-h3"><a href="#dont-use-a-dynamic-list-as-a-typed-list">Don’t use a dynamic list as a typed list</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#runtime-checks">Runtime checks</a></li>
<li class="toc-entry toc-h2"><a href="#type-inference">Type inference</a>
<ul>
<li class="toc-entry toc-h3"><a href="#field-and-method-inference">Field and method inference</a></li>
<li class="toc-entry toc-h3"><a href="#static-field-inference">Static field inference</a></li>
<li class="toc-entry toc-h3"><a href="#local-variable-inference">Local variable inference</a></li>
<li class="toc-entry toc-h3"><a href="#type-argument-inference">Type argument inference</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#substituting-types">Substituting types</a>
<ul>
<li class="toc-entry toc-h3"><a href="#simple-type-assignment">Simple type assignment</a></li>
<li class="toc-entry toc-h3"><a href="#generic-type-assignment">Generic type assignment</a></li>
<li class="toc-entry toc-h3"><a href="#methods">Methods</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#other-resources">Other resources</a></li>
</ul>
</div>


          <?code-excerpt replace="/([A-Z]\w*)\d\b/$1/g; /\b(main)\d\b/$1/g"?>

<p>Dart 类型安全的语言：Dart 使用静态类型检查和
<a href="#runtime-checks">运行时检查</a>
的组合来确保变量的值始终与变量的静态类型匹配。尽管类型是必需的，但由于
<a href="#type-inference">类型推断</a>
，类型的注释是可选的。</p>

<p>本章重点介绍 Dart 2 中添加的类型安全功能。有关 Dart 语言的完整介绍（包括类型），
请参阅<a href="/guides/language/language-tour">语言概览</a>。</p>

<aside class="alert alert-info">
  <p><strong>术语说明：</strong>
  术语 <strong>sound</strong> Dart 和 <strong>type safe</strong> Dart 通常可互换使用。
  你可能还会看到术语 <strong>strong mode</strong> 。 
  <strong>strong mode</strong> 是一种在Dart 1.x中可选的功能，
  可为类型安全提供部分支持。</p>
</aside>

<p>静态类型检查的一个好处是能够使用 Dart 的
<a href="/guides/language/analysis-options">静态分析器</a>
在编译时找到错误。</p>

<p>可以向泛型类添加类型注释来修复大多数静态分析错误。最常见的泛型类是集合类型 <code class="highlighter-rouge">List&lt;T&gt;</code> 和 <code class="highlighter-rouge">Map&lt;K,V&gt;</code> 。</p>

<p>例如，在下面的代码中，<code class="highlighter-rouge">main()</code> 创建一个列表并将其传递给 <code class="highlighter-rouge">printInts()</code> ，由 <code class="highlighter-rouge">printInts()</code> 函数打印这个整数列表。</p>

<?code-excerpt "strong/lib/strong_analysis.dart (opening-example)" replace="/list(?=\))/[!$&!]/g"?>
<pre class="prettyprint lang-dart fails-sa">void printInts(List&lt;int&gt; a) =&gt; print(a);

void main() {
  var list = [];
  list.add(1);
  list.add("2");
  printInts(<span class="highlight">list</span>);
}</pre>

<p>上面的代码在调用 <code class="highlighter-rouge">printInts(list)</code> 时会在 <code class="highlighter-rouge">list</code> （高亮提示）上产生类型错误：</p>

<?code-excerpt "strong/analyzer-2-results.txt" retain="/List.*strong_analysis.*argument_type_not_assignable/" replace="/ at (lib|test)\/\w+\.dart:\d+:\d+//g"?>
<pre class="console-output"><code class="language-nocode">error • The argument type 'List' can't be assigned to the parameter type 'List&lt;int&gt;' • argument_type_not_assignable
</code></pre>

<p>高亮错误是因为产生了从 <code class="highlighter-rouge">List&lt;dynamic&gt;</code> 到 <code class="highlighter-rouge">List&lt;int&gt;</code> 的不正确的隐式转换。
<code class="highlighter-rouge">list</code> 变量是 <code class="highlighter-rouge">List&lt;dynamic&gt;</code> 静态类型。这是因为 <code class="highlighter-rouge">list</code> 变量的初始化声明 <code class="highlighter-rouge">var list = []</code>
没有为分析器提供足够的信息来推断比 <code class="highlighter-rouge">dynamic</code> 更具体的类型参数。
<code class="highlighter-rouge">printInts()</code> 函数需要 <code class="highlighter-rouge">List&lt;int&gt;</code> 类型的参数，因此导致类型不匹配。</p>

<p>在创建 <code class="highlighter-rouge">list</code> 时添加类型注释 <code class="highlighter-rouge">&lt;int&gt;</code>（代码中高亮显示部分）后，分析器会提示无法将字符串参数分配给 <code class="highlighter-rouge">int</code> 参数。
删除 <code class="highlighter-rouge">list.add("2")</code> 中的字符串引号使代码通过静态分析并能够正常执行。</p>

<?code-excerpt "strong/test/strong_test.dart (opening-example)" replace="/<int.(?=\[)|2/[!$&!]/g"?>
<pre class="prettyprint lang-dart passes-sa">void printInts(List&lt;int&gt; a) =&gt; print(a);

void main() {
  var list = <span class="highlight">&lt;int&gt;</span>[];
  list.add(1);
  list.add(<span class="highlight">2</span>);
  printInts(list);
}</pre>

<p><a href="https://dartpad.cn/f64e963cb5f894e2146c2b28d5efa4ed">尝试在 DartPad 中练习</a>.</p>

<h2 id="什么是类型安全">
<a id="什么是类型安全" class="anchor" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>什么是类型安全</h2>

<p>类型安全是为了确保程序不会进入某些无效状态。
安全类型系统意味着程序永远不会进入表达式求值为与表达式的静态类型不匹配的值的状态。
例如，如果表达式的静态类型是 <code class="highlighter-rouge">String</code> ，则在运行时保证在评估它的时候只会获取字符串。</p>

<p>Dart 的类型系统，同 Java 和 C＃ 中的类型系统类似，是安全的。
它使用静态检查（编译时错误）和运行时检查的组合来强制执行类型安全。
例如，将 <code class="highlighter-rouge">String</code> 分配给 <code class="highlighter-rouge">int</code> 是一个编译时错误。如果<code class="highlighter-rouge">对象</code>不是字符串，
使用 <code class="highlighter-rouge">as String</code> 将<code class="highlighter-rouge">对象</code>转换为字符串时，会由于运行时错误而导致转换失败。</p>

<h2 id="类型安全的好处">
<a id="类型安全的好处" class="anchor" href="#%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8%E7%9A%84%E5%A5%BD%E5%A4%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>类型安全的好处</h2>

<p>安全类型系统有以下几个好处：</p>

<ul>
  <li>
    <p>在编译时就可以检查并显示类型相关的错误。<br>
安全类型系统强制要求代码明确类型，
因此在编译时会显示与类型相关的错误，
这些错误可能在运行时可能很难发现。</p>
  </li>
  <li>
    <p>代码更容易阅读。<br>
代码更容易阅读，因为我们信赖一个拥有指定类型的值。
在类型安全的 Dart 中，类型是不会骗人的。 因为一个拥有指定类型的值是可以被信赖的。</p>
  </li>
  <li>
    <p>代码可维护性更高。<br>
在安全类型系统下，当更改一处代码后，
类型系统会警告因此影响到的其他代码块。</p>
  </li>
  <li>
    <p>更好的 AOT 编译。<br>
虽然在没有类型的情况下可以进行 AOT 编译，
但生成的代码效率要低很多。</p>
  </li>
</ul>

<h2 id="tips-for-passing-static-analysis">
<a id="tips-for-passing-static-analysis" class="anchor" href="#tips-for-passing-static-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tips for passing static analysis</h2>

<p>Most of the rules for static types are easy to understand.
Here are some of the less obvious rules:</p>

<ul>
  <li>Use sound return types when overriding methods.</li>
  <li>Use sound parameter types when overriding methods.</li>
  <li>Don’t use a dynamic list as a typed list.</li>
</ul>

<p>Let’s see these rules in detail, with examples that use the following
type hierarchy:</p>

<p><img src="images/type-hierarchy.png" alt="a hierarchy of animals where the supertype is Animal and the subtypes are Alligator, Cat, and HoneyBadger. Cat has the subtypes of Lion and MaineCoon"></p>

<p><a name="use-proper-return-types"></a></p>
<h3 id="use-sound-return-types-when-overriding-methods">
<a id="use-sound-return-types-when-overriding-methods" class="anchor" href="#use-sound-return-types-when-overriding-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use sound return types when overriding methods</h3>

<p>The return type of a method in a subclass must be the same type or a
subtype of the return type of the method in the superclass. Consider
the getter method in the Animal class:</p>

<?code-excerpt "strong/lib/animal.dart (Animal)" replace="/Animal get.*/[!$&!]/g"?>
<pre class="prettyprint lang-dart">class Animal {
  void chase(Animal a) { ... }
  <span class="highlight">Animal get parent =&gt; ...</span>
}</pre>

<p>The <code class="highlighter-rouge">parent</code> getter method returns an Animal. In the HoneyBadger subclass,
you can replace the getter’s return type with HoneyBadger (or any other subtype
of Animal), but an unrelated type is not allowed.</p>

<?code-excerpt "strong/lib/animal.dart (HoneyBadger)" replace="/(\w+)(?= get)/[!$&!]/g"?>
<pre class="prettyprint lang-dart passes-sa">class HoneyBadger extends Animal {
  void chase(Animal a) { ... }
  <span class="highlight">HoneyBadger</span> get parent =&gt; ...
}</pre>

<?code-excerpt "strong/lib/animal_bad.dart (HoneyBadger)" replace="/(\w+)(?= get)/[!$&!]/g"?>
<pre class="prettyprint lang-dart fails-sa">class HoneyBadger extends Animal {
  void chase(Animal a) { ... }
  <span class="highlight">Root</span> get parent =&gt; ...
}</pre>

<p><a name="use-proper-param-types"></a></p>
<h3 id="use-sound-parameter-types-when-overriding-methods">
<a id="use-sound-parameter-types-when-overriding-methods" class="anchor" href="#use-sound-parameter-types-when-overriding-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use sound parameter types when overriding methods</h3>

<p>The parameter of an overridden method must have either the same type
or a supertype of the corresponding parameter in the superclass.
Don’t “tighten” the parameter type by replacing the type with a
subtype of the original parameter.</p>

<aside class="alert alert-info">
  <p><strong>Note:</strong> If you have a valid reason to use a subtype, you can use the
  <a href="/guides/language/sound-problems#the-covariant-keyword"><code class="highlighter-rouge">covariant</code> keyword</a>.</p>
</aside>

<p>Consider the <code class="highlighter-rouge">chase(Animal)</code> method for the Animal class:</p>

<?code-excerpt "strong/lib/animal.dart (Animal)" replace="/void chase.*/[!$&!]/g"?>
<pre class="prettyprint lang-dart">class Animal {
  <span class="highlight">void chase(Animal a) { ... }</span>
  Animal get parent =&gt; ...
}</pre>

<p>The <code class="highlighter-rouge">chase()</code> method takes an Animal. A HoneyBadger chases anything.
It’s OK to override the <code class="highlighter-rouge">chase()</code> method to take anything (Object).</p>

<?code-excerpt "strong/lib/animal.dart (chase-Object)" replace="/Object/[!$&!]/g"?>
<pre class="prettyprint lang-dart passes-sa">class HoneyBadger extends Animal {
  void chase(<span class="highlight">Object</span> a) { ... }
  Animal get parent =&gt; ...
}</pre>

<p>The following code tightens the parameter on the <code class="highlighter-rouge">chase()</code> method
from Animal to Mouse, a subclass of Animal.</p>

<?code-excerpt "strong/lib/animal_bad.dart (chase-Mouse)" replace="/(\w+)(?= x)/[!$&!]/g"?>
<pre class="prettyprint lang-dart fails-sa">class Mouse extends Animal {...}

class Cat extends Animal {
  void chase(<span class="highlight">Mouse</span> x) { ... }
}</pre>

<p>This code is not type safe because it would then be possible to define
a cat and send it after an alligator:</p>

<?code-excerpt "strong/lib/animal_bad.dart (chase-Alligator)" replace="/Alligator/[!$&!]/g"?>
<pre class="prettyprint lang-dart">Animal a = Cat();
a.chase(<span class="highlight">Alligator</span>()); // Not type safe or feline safe</pre>

<h3 id="dont-use-a-dynamic-list-as-a-typed-list">
<a id="dont-use-a-dynamic-list-as-a-typed-list" class="anchor" href="#dont-use-a-dynamic-list-as-a-typed-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Don’t use a dynamic list as a typed list</h3>

<p>A dynamic list is good when you want to have a list with
different kinds of things in it. However, you can’t use a
dynamic list as a typed list.</p>

<p>This rule also applies to instances of generic types.</p>

<p>The following code creates a dynamic list of Dog, and assigns it to
a list of type Cat, which generates an error during static analysis.</p>

<?code-excerpt "strong/lib/animal_bad.dart (dynamic-list)" replace="/.dynamic.(?!.*OK)/[!$&!]/g"?>
<pre class="prettyprint lang-dart fails-sa">class Cat extends Animal { ... }

class Dog extends Animal { ... }

void main() {
  List&lt;Cat&gt; foo = <span class="highlight">&lt;dynamic&gt;</span>[Dog()]; // Error
  List&lt;dynamic&gt; bar = &lt;dynamic&gt;[Dog(), Cat()]; // OK
}</pre>

<h2 id="runtime-checks">
<a id="runtime-checks" class="anchor" href="#runtime-checks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Runtime checks</h2>

<p>Runtime checks in tools like the <a href="/server/tools/dart-vm">Dart VM</a> and <a href="/tools/dartdevc">dartdevc</a>
deal with type safety issues that the analyzer can’t catch.</p>

<p>For example, the following code throws an exception at runtime because it is an error
to assign a list of Dogs to a list of Cats:</p>

<?code-excerpt "strong/test/strong_test.dart (runtime-checks)" replace="/cats[^;]*/[!$&!]/g"?>
<pre class="prettyprint lang-dart runtime-fail">void main() {
  List&lt;Animal&gt; animals = [Dog()];
  List&lt;Cat&gt; <span class="highlight">cats = animals</span>;
}</pre>

<h2 id="type-inference">
<a id="type-inference" class="anchor" href="#type-inference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Type inference</h2>

<p>The analyzer can infer types for fields, methods, local variables,
and most generic type arguments.
When the analyzer doesn’t have enough information to infer
a specific type, it uses the <code class="highlighter-rouge">dynamic</code> type.</p>

<p>Here’s an example of how type inference works with generics.
In this example, a variable named <code class="highlighter-rouge">arguments</code> holds a map that
pairs string keys with values of various types.</p>

<p>If you explicitly type the variable, you might write this:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (type-inference-1-orig)" replace="/Map<String, dynamic\x3E/[!$&!]/g"?>
<pre class="prettyprint lang-dart"><span class="highlight">Map&lt;String, dynamic&gt;</span> arguments = {'argA': 'hello', 'argB': 42};</pre>

<p>Alternatively, you can use <code class="highlighter-rouge">var</code> and let Dart infer the type:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (type-inference-1)" replace="/var/[!$&!]/g"?>
<pre class="prettyprint lang-dart"><span class="highlight">var</span> arguments = {'argA': 'hello', 'argB': 42}; // Map&lt;String, Object&gt;</pre>

<p>The map literal infers its type from its entries,
and then the variable infers its type from the map literal’s type.
In this map, the keys are both strings, but the values have different
types (String and int, which have the upper bound Object).
So the map literal has the type <code class="highlighter-rouge">Map&lt;String, Object&gt;</code>,
and so does the <code class="highlighter-rouge">arguments</code> variable.</p>

<h3 id="field-and-method-inference">
<a id="field-and-method-inference" class="anchor" href="#field-and-method-inference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Field and method inference</h3>

<p>A field or method that has no specified type and that overrides
a field or method from the superclass, inherits the type of the
superclass method or field.</p>

<p>A field that does not have a declared or inherited type but that is declared
with an initial value, gets an inferred type based on the initial value.</p>

<h3 id="static-field-inference">
<a id="static-field-inference" class="anchor" href="#static-field-inference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Static field inference</h3>

<p>Static fields and variables get their types inferred from their
initializer. Note that inference fails if it encounters a cycle
(that is, inferring a type for the variable depends on knowing the
type of that variable).</p>

<h3 id="local-variable-inference">
<a id="local-variable-inference" class="anchor" href="#local-variable-inference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Local variable inference</h3>

<p>Local variable types are inferred from their initializer, if any.
Subsequent assignments are not taken into account.
This may mean that too precise a type may be inferred.
If so, you can add a type annotation.</p>

<?code-excerpt "strong/lib/strong_analysis.dart (local-var-type-inference-error)"?>
<pre class="prettyprint lang-dart fails-sa">var x = 3; // x is inferred as an int
x = 4.0;</pre>

<?code-excerpt "strong/lib/strong_analysis.dart (local-var-type-inference-ok)"?>
<pre class="prettyprint lang-dart passes-sa">num y = 3; // a num can be double or int
y = 4.0;</pre>

<h3 id="type-argument-inference">
<a id="type-argument-inference" class="anchor" href="#type-argument-inference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Type argument inference</h3>

<p>Type arguments to constructor calls and
<a href="/guides/language/language-tour#using-generic-methods">generic method</a> invocations are
inferred based on a combination of downward information from the context
of occurrence, and upward information from the arguments to the constructor
or generic method. If inference is not doing what you want or expect,
you can always explicitly specify the type arguments.</p>

<?code-excerpt "strong/lib/strong_analysis.dart (type-arg-inference)"?>
<pre class="prettyprint lang-dart passes-sa">// Inferred as if you wrote &lt;int&gt;[].
List&lt;int&gt; listOfInt = [];

// Inferred as if you wrote &lt;double&gt;[3.0].
var listOfDouble = [3.0];

// Inferred as Iterable&lt;int&gt;
var ints = listOfDouble.map((x) =&gt; x.toInt());</pre>

<p>In the last example, <code class="highlighter-rouge">x</code> is inferred as <code class="highlighter-rouge">double</code> using downward information.
The return type of the closure is inferred as <code class="highlighter-rouge">int</code> using upward information.
Dart uses this return type as upward information when inferring the <code class="highlighter-rouge">map()</code>
method’s type argument: <code class="highlighter-rouge">&lt;int&gt;</code>.</p>

<h2 id="substituting-types">
<a id="substituting-types" class="anchor" href="#substituting-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Substituting types</h2>

<p>When you override a method, you are replacing something of one type (in the
old method) with something that might have a new type (in the new method).
Similarly, when you pass an argument to a function,
you are replacing something that has one type (a parameter
with a declared type) with something that has another type
(the actual argument). When can you replace something that
has one type with something that has a subtype or a supertype?</p>

<p>When substituting types, it helps to think in terms of <em>consumers</em>
and <em>producers</em>. A consumer absorbs a type and a producer generates a type.</p>

<p><strong>You can replace a consumer’s type with a supertype and a producer’s
type with a subtype.</strong></p>

<p>Let’s look at examples of simple type assignment and assignment with
generic types.</p>

<h3 id="simple-type-assignment">
<a id="simple-type-assignment" class="anchor" href="#simple-type-assignment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple type assignment</h3>

<p>When assigning objects to objects, when can you replace a type with a
different type? The answer depends on whether the object is a consumer
or a producer.</p>

<p>Consider the following type hierarchy:</p>

<p><img src="images/type-hierarchy.png" alt="a hierarchy of animals where the supertype is Animal and the subtypes are Alligator, Cat, and HoneyBadger. Cat has the subtypes of Lion and MaineCoon"></p>

<p>Consider the following simple assignment where <code class="highlighter-rouge">Cat c</code> is a <em>consumer</em> and <code class="highlighter-rouge">Cat()</code>
is a <em>producer</em>:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (Cat-Cat-ok)"?>
<pre class="prettyprint lang-dart">Cat c = Cat();</pre>

<p>In a consuming position, it’s safe to replace something that consumes a
specific type (<code class="highlighter-rouge">Cat</code>) with something that consumes anything (<code class="highlighter-rouge">Animal</code>),
so replacing <code class="highlighter-rouge">Cat c</code> with <code class="highlighter-rouge">Animal c</code> is allowed, because Animal is
a supertype of Cat.</p>

<?code-excerpt "strong/lib/strong_analysis.dart (Animal-Cat-ok)"?>
<pre class="prettyprint lang-dart passes-sa">Animal c = Cat();</pre>

<p>But replacing <code class="highlighter-rouge">Cat c</code> with <code class="highlighter-rouge">MaineCoon c</code> breaks type safety, because the
superclass may provide a type of Cat with different behaviors, such
as Lion:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (MaineCoon-Cat-err)"?>
<pre class="prettyprint lang-dart fails-sa">MaineCoon c = Cat();</pre>

<p>In a producing position, it’s safe to replace something that produces a
type (Cat) with a more specific type (MaineCoon). So, the following
is allowed:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (Cat-MaineCoon-ok)"?>
<pre class="prettyprint lang-dart passes-sa">Cat c = MaineCoon();</pre>

<h3 id="generic-type-assignment">
<a id="generic-type-assignment" class="anchor" href="#generic-type-assignment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generic type assignment</h3>

<p>Are the rules the same for generic types? Yes. Consider the hierarchy
of lists of animals—a List of Cat is a subtype of a List of
Animal, and a supertype of a List of MaineCoon:</p>

<p><img src="images/type-hierarchy-generics.png" alt="List&lt;Animal&gt; -&gt; List&lt;Cat&gt; -&gt; List&lt;MaineCoon&gt;"></p>

<p>In the following example, you can assign a <code class="highlighter-rouge">MaineCoon</code> list to <code class="highlighter-rouge">myCats</code> because
<code class="highlighter-rouge">List&lt;MaineCoon&gt;</code> is a subtype of <code class="highlighter-rouge">List&lt;Cat&gt;</code>:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (generic-type-assignment-MaineCoon)" replace="/MaineCoon/[!$&!]/g"?>
<pre class="prettyprint lang-dart passes-sa">List&lt;Cat&gt; myCats = List&lt;<span class="highlight">MaineCoon</span>&gt;();</pre>

<p>What about going in the other direction? Can you assign an <code class="highlighter-rouge">Animal</code> list to a <code class="highlighter-rouge">List&lt;Cat&gt;</code>?</p>

<?code-excerpt "strong/lib/strong_analysis.dart (generic-type-assignment-Animal)" replace="/Animal/[!$&!]/g"?>
<pre class="prettyprint lang-dart passes-sa">List&lt;Cat&gt; myCats = List&lt;<span class="highlight">Animal</span>&gt;();</pre>

<p>This assignment passes static analysis,
but it creates an implicit cast. It is equivalent to:</p>

<?code-excerpt "strong/lib/strong_analysis.dart (generic-type-assignment-implied-cast)" replace="/as.*(?=;)/[!$&!]/g"?>
<pre class="prettyprint lang-dart">List&lt;Cat&gt; myCats = List&lt;Animal&gt;() <span class="highlight">as List&lt;Cat&gt;</span>;</pre>

<p>The code may fail at runtime. You can disallow implicit casts
by specifying <code class="highlighter-rouge">implicit-casts: false</code> in the <a href="/guides/language/analysis-options">analysis options file.</a></p>

<h3 id="methods">
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h3>

<p>When overriding a method, the producer and consumer rules still apply.
For example:</p>

<p><img src="images/consumer-producer-methods.png" alt="Animal class showing the chase method as the consumer and the parent getter as the producer"></p>

<p>For a consumer (such as the <code class="highlighter-rouge">chase(Animal)</code> method), you can replace
the parameter type with a supertype. For a producer (such as
the <code class="highlighter-rouge">parent</code> getter method), you can replace the return type with
a subtype.</p>

<p>For more information, see
<a href="#use-proper-return-types">Use sound return types when overriding methods</a>
and <a href="#use-proper-param-types">Use sound parameter types when overriding methods</a>.</p>

<h2 id="other-resources">
<a id="other-resources" class="anchor" href="#other-resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other resources</h2>

<p>The following resources have further information on sound Dart:</p>

<ul>
  <li>
<a href="/guides/language/sound-problems">Fixing common type problems</a> -
Errors you may encounter when
writing sound Dart code, and how to fix them.</li>
  <li>
<a href="/dart-2">Dart 2</a> - How to update Dart 1.x code to Dart 2.</li>
  <li>
<a href="/guides/language/analysis-options">Customizing static analysis</a> - How
to set up and customize the analyzer and linter using an analysis
options file.</li>
</ul>


          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="container">
    <div class="content">
      <div class="text-center" martdown="1">
        <style>.menu .material-icons { font-size: 14px; }</style><ul class="menu">
          <li><a href="/terms">Terms</a></li>
          <li><a href="/security">Security</a></li>
          <li><a href="http://www.google.com/intl/en/policies/privacy/" class="no-automatic-external">Privacy</a></li>
          <li>Site&nbsp;<a href="http://creativecommons.org/licenses/by/3.0/" class="no-automatic-external">CC&nbsp;BY&nbsp;3.0</a></li>
          <li><a href="/about_zh_CN">关于 dart.dev 中文版</a></li>
          <li>
            <a href="https://github.com/dartchina/site-www-cn"
               title="该站在 GitHub 开源"
               class="no-automatic-external"><i class="fab fa-github fa-sm"></i></a>
            &nbsp;
            <a href="https://github.com/dartchina/site-www-cn/issues"
               title="为该站提交 issue"
               class="no-automatic-external"><i class="fas fa-bug fa-sm"></i></a>
            &nbsp;
            <a 
               title="Site built on 2019/05/14 19:10 PDT"
               
               class="no-automatic-external"><i class="fas fa-wrench fa-sm"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
