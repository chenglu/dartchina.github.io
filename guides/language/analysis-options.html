<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en_US" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Use an analysis options file and code comments to customize static analysis.">
  <title>Customizing static analysis | Dart</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/touch-icon-iphone-a46c306c4fbfae0b28d63f512b01d7cb2ccf1e4ca9d7f3aab15ba1170beed4a0.png" rel="apple-touch-icon">
  <link href="/assets/touch-icon-ipad-d0181720760b3912858b6d40da1d5586b1e92c7c8656a485ea41005674401e6b.png" rel="apple-touch-icon" sizes="76x76">
  <link href="/assets/touch-icon-iphone-retina-3d9821a631425376ac6203dea3c23c1940ab7b5c506a25406662fab76cee2e0b.png" rel="apple-touch-icon" sizes="120x120">
  <link href="/assets/touch-icon-ipad-retina-b9715401952522f1daee2b4a4064a1bbfb5ffab78d0a47a7226dc87444d51c32.png" rel="apple-touch-icon" sizes="152x152">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="Customizing static analysis" />
  <meta name="twitter:description" content="Use an analysis options file and code comments to customize static analysis." />

  <!-- Open Graph -->
  <meta property="og:title" content="Customizing static analysis" />
  <meta property="og:description" content="Use an analysis options file and code comments to customize static analysis." />
  <meta property="og:url" content="https://www.dartlang.org/guides/language/analysis-options" />
  <meta property="og:image" content="https://www.dartlang.org/assets/shared/dart-logo-for-shares.png?2" />
  <link href="https://fonts.googleapis.com/css?family=Google+Sans:300,400,500|Google+Sans+Display:400|Roboto:300,400,500|Roboto+Mono:300,400,700|Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" integrity="sha256-lXNilrVoDl/TpTBbRIJ9fTZIFZ6OcziJrUwDEUq+4zk=" crossorigin="anonymous" href="/assets/main-95736296b5680e5fd3a5305b44827d7d3648159e8e733889ad4c03114abee339.css">
  <script src="/assets/main-81783b1b9a1d39209aa2ec2eab702b1f7908b15082a3aef81ba13f2255d48ec4.js" integrity="sha256-gXg7G5odOSCaouwuq3ArH3kIsVCCo674G6E/IlXUjsQ=" crossorigin="anonymous" type="text/javascript"></script>
  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


 </head>
  <body class="default show_banner">
    <header id="page-header" class="site-header">
  <nav id="mainnav" class="site-header">
  <div id="menu-toggle"><i class="icon icon-menu"></i></div>
  <a href="/" class="brand" title="Dart">
    <img src="/assets/shared/dart/logo+text/horizontal/white-e71fb382ad5229792cc704b3ee7a88f8013e986d6e34f0956d89c453b454d0a5.svg" alt="Dart">
  </a>
  <ul class="navbar">
    <li class="mainnav__get-started">
      <a href="/docs" class="nav-link active"><span>文档</span></a>
    </li>
    <li>
      <a href="/platforms" class="nav-link">平台</a>
    </li>
    <li>
      <a href="/community" class="nav-link">社区</a>
    </li>
    <li>
      <a href="https://dartpad.cn/" target="_blank" class="nav-link no-automatic-external">体验 Dart</a>
    </li>
    <li>
      <a href="/get-dart" class="nav-link">安装 Dart</a>
    </li>
    <li><a href="/about_zh_CN">关于</a></li>
    <li class="searchfield">
      <form action="/search" class="site-header__search form-inline" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
      </form>
    </li>
  </ul>
</nav>

  
</header>
 <div class="banner">
  <p class="banner__text">
    
    
    Dart 2.3 发布，针对构建用户界面进行了优化。
    <a class="external" href="https://medium.com/dartlang/announcing-dart-2-3-optimized-for-building-user-interfaces-e84919ca1dff">了解更多。</a>
  </p>
</div>
 

    <div id="sidenav" class="">
  <form action="/search/" class="site-header__search form-inline">
    <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
  </form>

  <div class="site-sidebar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="/platforms" class="nav-link">平台</a>
      </li>
      <li class="nav-item">
        <a href="/community" class="nav-link">社区</a>
      </li>
      <li class="nav-item">
        <a href="https://dartpad.cn" class="nav-link">体验 Dart</a>
      </li>
      <li class="nav-item">
        <a href="/guides" class="nav-link active">文档</a>
      </li>
    </ul>

    <ul class="nav flex-column"><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-1" role="button"
        aria-expanded="false" aria-controls="sidenav-1"
      >示例 & 概览</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-1">
        <li class="nav-item">
    <a class="nav-link" href="/samples">语言示例</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/codelabs">Codelab</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials">概览</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-2" role="button"
        aria-expanded="false" aria-controls="sidenav-2"
      >语言</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-2">
        <li class="nav-item">
    <a class="nav-link" href="/guides/language/language-tour">概览</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/sound-dart">类型系统</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/spec">规范</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/effective-dart">Effective Dart</a>
  </li>
</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-3" role="button"
        aria-expanded="false" aria-controls="sidenav-3"
      >核心库</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3">
        <li class="nav-item">
    <a class="nav-link" href="/guides/libraries">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/library-tour">概览</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-3-3"
      href="#sidenav-3-3" role="button"
      aria-expanded="false" aria-controls="sidenav-3-3"
    >文章
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-3-3">
      <li class="nav-item">
    <a class="nav-link" href="/articles/libraries/dart-io">Intro to dart:io</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/articles/libraries/creating-streams">Creating streams</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-4" role="button"
        aria-expanded="false" aria-controls="sidenav-4"
      >包</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4">
        <li class="nav-item">
    <a class="nav-link" href="/guides/packages">如何使用包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/useful-libraries">常用的包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/create-library-packages">创建包</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/publishing">发布包</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-4-5"
      href="#sidenav-4-5" role="button"
      aria-expanded="false" aria-controls="sidenav-4-5"
    >引用包
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-4-5">
      <li class="nav-item">
    <a class="nav-link" href="/tools/pub/dependencies">依赖</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/glossary">术语</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/package-layout">包的设计约定</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/environment-variables">Pub 环境变量</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/pubspec">Pubspec 文件</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/troubleshoot">Pub 问题分析与解决</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/versioning">版本</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-5" role="button"
        aria-expanded="false" aria-controls="sidenav-5"
      >开发</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5">
        <li class="nav-item">
    <a class="nav-link" href="/tutorials/language/futures">Futures & Async-Await</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/json">使用 JSON</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/language/streams">Stream</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/mobile">移动应用</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-5"
      href="#sidenav-5-5" role="button"
      aria-expanded="false" aria-controls="sidenav-5-5"
    >命令行应用 & 服务应用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-5">
      <li class="nav-item">
    <a class="nav-link" href="/server">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/get-started">入门</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/cmdline">编写命令行应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/server/httpserver">编写 HTTP 客户端和服务端应用</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/c-interop">C & C++ 交互</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/server/libraries">库和包</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-6"
      href="#sidenav-5-6" role="button"
      aria-expanded="false" aria-controls="sidenav-5-6"
    >Web 应用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-6">
      <li class="nav-item">
    <a class="nav-link" href="/web">综述</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/get-started">入门</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tutorials/web/fetch-data">动态获取数据</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-5-6-4"
      href="#sidenav-5-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-5-6-4"
    >底层 Web 编程
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-5-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/connect-dart-html">Dart 和 HTML 关联</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/add-elements">在 DOM 中增加 Element</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tutorials/web/low-level-html/remove-elements">在 DOM 中移除 Element</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link" href="/web/js-interop">JS/TS 交互</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/deployment">开发</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/libraries">库和包</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link active" data-toggle="collapse" href="#sidenav-6" role="button"
        aria-expanded="true" aria-controls="sidenav-6"
      >工具 & 技巧</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6">
        <li class="nav-item">
    <a class="nav-link" href="/tools">综述</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-2"
      href="#sidenav-6-2" role="button"
      aria-expanded="false" aria-controls="sidenav-6-2"
    >编辑 & 调试
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/dart-devtools">Dart DevTool</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/dartpad">DartPad</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/jetbrains-plugin">IntelliJ & Android Studio</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">VS Code</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-3"
      href="#sidenav-6-3" role="button"
      aria-expanded="false" aria-controls="sidenav-6-3"
    >Command-line tools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-3">
      <li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-1"
      href="#sidenav-6-3-1" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-1"
    >Dart SDK
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-1">
      <li class="nav-item">
    <a class="nav-link" href="/tools/sdk">综述</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart-vm">dart (Dart VM)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart2aot">dart2aot & dartaotruntime</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dart2js">dart2js (prod JS)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartanalyzer">dartanalyzer</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartdevc">dartdevc (dev JS)</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartdoc">dartdoc</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/dartfmt">dartfmt</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/pub/cmd">pub</a>
  </li>
  </ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable"
      data-toggle="collapse" data-target="#sidenav-6-3-2"
      href="#sidenav-6-3-2" role="button"
      aria-expanded="true" aria-controls="sidenav-6-3-2"
    >其他命令行工具
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-3-2">
      <li class="nav-item">
    <a class="nav-link" href="/tools/build_runner">build_runner</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tools/webdev">webdev</a>
  </li>
  </ul>
  </li>
</ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-4"
      href="#sidenav-6-4" role="button"
      aria-expanded="false" aria-controls="sidenav-6-4"
    >源码管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-4">
      <li class="nav-item">
    <a class="nav-link" href="/guides/language/formatting">格式化代码</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/libraries/private-files">哪些内容不应该被提交</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link active collapsable"
      data-toggle="collapse" data-target="#sidenav-6-5"
      href="#sidenav-6-5" role="button"
      aria-expanded="true" aria-controls="sidenav-6-5"
    >静态分析
    </a>
    <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-6-5">
      <li class="nav-item">
    <a class="nav-link active" href="/guides/language/analysis-options">Customizing static analysis</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/guides/language/sound-problems">Fixing common type problems</a>
  </li></ul>
  </li>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-6-6"
      href="#sidenav-6-6" role="button"
      aria-expanded="false" aria-controls="sidenav-6-6"
    >测试 & 优化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-6-6">
      <li class="nav-item">
    <a class="nav-link" href="/guides/testing">测试</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/debugging">调试 Web 应用</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link collapsed" data-toggle="collapse" href="#sidenav-7" role="button"
        aria-expanded="false" aria-controls="sidenav-7"
      >资源</a>

      <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7">
        <li class="nav-item">
    <a class="nav-link" href="/code-of-conduct">行为守则</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/faq">FAQ</a>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#sidenav-7-3"
      href="#sidenav-7-3" role="button"
      aria-expanded="false" aria-controls="sidenav-7-3"
    >历史
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="sidenav-7-3">
      <li class="nav-item">
    <a class="nav-link" href="/dart-2">迁移到 Dart&nbsp;2</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/web/dart-2">迁移 Web 应用到 Dart&nbsp;2</a>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/pub/obsolete">过时的 Pub 功能</a>
  </li></ul>
  </li>

</ul>
    </li><li class="nav-item">
      <a class="nav-link " data-toggle="collapse" href="#sidenav-8" role="button"
        aria-expanded="true" aria-controls="sidenav-8"
      >相关网站</a>

      <ul class="nav flex-column flex-nowrap collapse show" id="sidenav-8">
        <li class="nav-item">
    <a class="nav-link" href="https://api.dartlang.org" target="_blank" rel="noopener">API 参考<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://medium.com/dartlang" target="_blank" rel="noopener">Blog<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dartpad.cn" target="_blank" rel="noopener">DartPad (在线编辑器)<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://flutter.dev" target="_blank" rel="noopener">Flutter<i class="fas fa-external-link-alt"></i></a>
  </li><li class="nav-item">
    <a class="nav-link" href="https://pub.dev" target="_blank" rel="noopener">Pub 包资源<i class="fas fa-external-link-alt"></i></a>
  </li>
</ul>
    </li></ul>

  </div>
</div>

    <main id="page-content">
      







<div id="site-toc--side" class="site-toc ">
  <header class="site-toc__title">
    内容
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
  </header>
  <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#the-analysis-options-file">The analysis options file</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#enabling-additional-type-checks">Enabling stricter type checks</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#enabling-linter-rules">Enabling and disabling linter rules</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#default-google-rules-pedantic">Enabling default Google rules: pedantic</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#individual-rules">Enabling individual rules</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#disabling-individual-rules">Disabling individual rules</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#excluding-code-from-analysis">Excluding code from analysis</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#excluding-files">Excluding files</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#suppressing-rules-for-a-file">Suppressing rules for a file</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#suppressing-rules-for-a-line-of-code">Suppressing rules for a line of code</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#customizing-analysis-rules">Customizing analysis rules</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#ignoring-rules">Ignoring rules</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#changing-the-severity-of-rules">Changing the severity of rules</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#resources">Resources</a></li>
</ul>
</div>


      <article>
        <div class="content">
          

          <div>
            <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/_guides/language/analysis-options.md" class="btn no-automatic-external" title="View page source" target="_blank" rel="noopener">
    <i class="fas fa-file-alt fa-sm"></i>
  </a>
  <a href="https://github.com/dartchina/site-www-cn/issues/new?title='Customizing static analysis' page issue&body=
Page URL: https://www.dartlang.org/guides/language/analysis-options%0D%0A
Page source: https://github.com/dartchina/site-www-cn/tree/src_zh_CN/src_zh_CN/_guides/language/analysis-options.md%0D%0A
%0D%0A
Found a typo? You can fix it yourself by going to the page source and clicking the pencil icon. Or finish creating this issue.%0D%0A
%0D%0A
Description of issue:" class="btn no-automatic-external" title="Report an issue with this page"
    target="_blank" rel="noopener">
    <i class="fas fa-bug fa-sm"></i>
  </a>
</div>

            <h1>Customizing static analysis</h1>
          </div>
          







<div id="site-toc--inline" class="site-toc toc-collapsible toc-collapsed">
  <header class="site-toc__title">
    内容
    <button type="button" class="btn site-toc--button__page-top" aria-label="Page top"></button>
    
      <span class="site-toc--inline__toggle toc-toggle-down"><i class="fas fa-chevron-down fa-m"></i></span>
      <span class="site-toc--inline__toggle toc-toggle-up"><i class="fas fa-chevron-up fa-m"></i></span>
    
  </header>
  <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#the-analysis-options-file">The analysis options file</a></li>
<li class="toc-entry toc-h2"><a href="#enabling-additional-type-checks">Enabling stricter type checks</a></li>
<li class="toc-entry toc-h2"><a href="#enabling-linter-rules">Enabling and disabling linter rules</a>
<ul>
<li class="toc-entry toc-h3"><a href="#default-google-rules-pedantic">Enabling default Google rules: pedantic</a></li>
<li class="toc-entry toc-h3"><a href="#individual-rules">Enabling individual rules</a></li>
<li class="toc-entry toc-h3"><a href="#disabling-individual-rules">Disabling individual rules</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#excluding-code-from-analysis">Excluding code from analysis</a>
<ul>
<li class="toc-entry toc-h3"><a href="#excluding-files">Excluding files</a></li>
<li class="toc-entry toc-h3"><a href="#suppressing-rules-for-a-file">Suppressing rules for a file</a></li>
<li class="toc-entry toc-h3"><a href="#suppressing-rules-for-a-line-of-code">Suppressing rules for a line of code</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#customizing-analysis-rules">Customizing analysis rules</a>
<ul>
<li class="toc-entry toc-h3"><a href="#ignoring-rules">Ignoring rules</a></li>
<li class="toc-entry toc-h3"><a href="#changing-the-severity-of-rules">Changing the severity of rules</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#resources">Resources</a></li>
</ul>
</div>


          <p>Static analysis allows you to find problems before
executing a single line of code. It’s a powerful tool
used to prevent bugs and ensure that code conforms to style
guidelines.</p>

<p>With the help of the analyzer, you can find
simple typos. For example, perhaps an accidental semicolon
made its way into an <code class="highlighter-rouge">if</code> statement:</p>

<p><img alt="`if (count &lt; 10);` results in a hint: Avoid empty statements." src="/assets/guides/avoid-empty-statements-58f4c275609dba5a6b84a034d46f61d96b740870f5bcf2b021cd5ae207cb55b2.png" integrity="sha256-WPTCdWCdulprhKA01G9h2Wt0CHD1vPKwIc1a4gfLVbI=" crossorigin="anonymous"></p>

<p>The analyzer can also help you find more subtle problems.
For example, perhaps you’ve forgotten to close a sink method:</p>

<p><img alt="`_controller = new StreamController()` results in a hint: Close instances of `dart.core.Sink`." src="/assets/guides/close-sinks-35c9d825db32b144a25334756ecb81638d9a5def22c08cacc6d184d03d99841c.png" integrity="sha256-NcnYJdsysUSiUzR1bsuBY42aXe8iwIysxtGE0D2ZhBw=" crossorigin="anonymous"></p>

<p>In the Dart ecosystem,
the Dart Analysis Server and other tools use the
<a href="https://pub.dev/packages/analyzer">analyzer package</a>
to perform static analysis.</p>

<p>You can customize static analysis to look for a variety of potential
problems, including errors and warnings specified in the
<a href="/guides/language/spec">Dart language spec</a>.
You can also configure the linter, one of the analyzer’s plugins,
to ensure that your code complies with the
<a href="/guides/language/effective-dart/style">Dart Style Guide</a>
and other suggested guidelines in
<a href="/guides/language/effective-dart">Effective Dart</a>. Dart tools such as the
<a href="/tools/dartdevc">Dart dev compiler (dartdevc),</a>
<a href="/tools/dartanalyzer"><code class="highlighter-rouge">dartanalyzer</code>,</a>
<a href="https://flutterchina.club/docs/testing/debugging#the-dart-analyzer"><code class="highlighter-rouge">flutter analyze</code>,</a>
and <a href="/tools/jetbrains-plugin">JetBrains IDEs</a>
use the analyzer package to evaluate your code.</p>

<p>This document explains how to customize the behavior of the analyzer
using either an analysis options file or comments in Dart source code. If you want to
add static analysis to your tool, see the
<a href="https://pub.dev/packages/analyzer">analyzer package</a> docs and the
<a href="https://htmlpreview.github.io/?https://github.com/dart-lang/sdk/blob/master/pkg/analysis_server/doc/api.html">Analysis Server API Specification.</a></p>

<aside class="alert alert-info">
  <p><strong>Note:</strong>
The analyzer error codes are listed in the <a href="https://github.com/dart-lang/sdk/blob/master/pkg/analyzer/lib/error/error.dart">Dart SDK
repo.</a></p>
</aside>

<h2 id="the-analysis-options-file">
<a id="the-analysis-options-file" class="anchor" href="#the-analysis-options-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>The analysis options file</h2>

<p>Place the analysis options file, <code class="highlighter-rouge">analysis_options.yaml</code>,
at the root of the package, in the same directory as the pubspec file.</p>

<aside class="alert alert-warning">
  <p><strong>Breaking change:</strong> The conventional name for the analysis options file
  used to be <code class="highlighter-rouge">.analysis_options</code> (note the leading dot and missing <code class="highlighter-rouge">.yaml</code> suffix).
  We expect support for the <code class="highlighter-rouge">.analysis_options</code> name to go away in a future
  release, so we recommend that you <strong>rename your <code class="highlighter-rouge">.analysis_options</code> files to
  <code class="highlighter-rouge">analysis_options.yaml</code>.</strong></p>

</aside>

<p>Here’s a sample analysis options file:</p>

<pre class="prettyprint lang-yaml">include: package:pedantic/analysis_options.yaml

linter:
  rules:
    - camel_case_types

analyzer:
#   exclude:
#     - path/to/excluded/files/**</pre>

<p>The <code>include: <em>url</em></code> entry
brings in YAML code from the specified URL — in this case,
from a file in the <code class="highlighter-rouge">pedantic</code> package.
The <code class="highlighter-rouge">linter:</code> entry <a href="#enabling-linter-rules">enables linter rules</a>.
You can use the <code class="highlighter-rouge">analyzer:</code> entry to customize static analysis —
<a href="#enabling-additional-type-checks">enabling stricter type checks</a>, 
<a href="#excluding-files">excluding files</a>,
<a href="#ignoring-rules">ignoring specific rules</a>, or
<a href="#changing-the-severity-of-rules">changing the severity of rules</a>.
Another tag you might see is <code class="highlighter-rouge">language:</code>,
which is used for experimental language features.</p>

<aside class="alert alert-info">
  <p><strong>YAML is sensitive to whitespace.</strong> Don’t use tabs in a YAML file,
  and use 2 spaces to denote each level of indentation.</p>
</aside>

<p>If the analyzer can’t find an analysis options file at the package root,
it walks up the directory tree, looking for one.
If no file is available, the analyzer defaults to standard checks.</p>

<p>Consider the following directory structure for a large project:</p>

<p><img alt="project root contains analysis_options.yaml (#1) and 3 packages, one of which (my_package) contains an analysis_options.yaml file (#2)." src="/assets/guides/analysis-options-directory-structure-631ff92b8684fc8d0027a7e1b23de556abd0560e7727fae6280fcb47fc252ba2.png" integrity="sha256-Yx/5K4aE/I0AJ6fhsj3lVqvQVg53J/rmKA/LR/wlK6I=" crossorigin="anonymous"></p>

<p>The analyzer uses file #1 to analyze the code in <code class="highlighter-rouge">my_other_package</code>
and <code class="highlighter-rouge">my_other_other_package</code>, and file #2 to analyze the code in
<code class="highlighter-rouge">my_package</code>.</p>

<h2 id="enabling-additional-type-checks">
<a id="enabling-additional-type-checks" class="anchor" href="#enabling-additional-type-checks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling stricter type checks</h2>

<p>If you want stricter static checks than
the <a href="/guides/language/sound-dart">Dart type system</a> requires,
consider using the <code class="highlighter-rouge">implicit-casts</code> and <code class="highlighter-rouge">implicit-dynamic</code> flags:</p>

<pre class="prettyprint lang-yaml">analyzer:
  strong-mode:
    implicit-casts: false
    implicit-dynamic: false</pre>

<p>You can use the flags together or separately;
both default to <code class="highlighter-rouge">true</code>.</p>

<dl>
  <dt><code class="highlighter-rouge">implicit-casts: &lt;bool&gt;</code></dt>
  <dd>A value of <code class="highlighter-rouge">false</code> ensures that the type inference engine never
implicitly casts to a more specific type.
The following valid Dart code
includes an implicit downcast that would be caught by this flag:</dd>
</dl>

<pre class="prettyprint lang-dart">Object o = ...;
String s = o;  // Implicit downcast
String s2 = s.substring(1);</pre>

<dl>
  <dt><code class="highlighter-rouge">implicit-dynamic: &lt;bool&gt;</code></dt>
  <dd>A value of <code class="highlighter-rouge">false</code> ensures that the type inference engine never chooses
the <code class="highlighter-rouge">dynamic</code> type when it can’t determine a static type.</dd>
</dl>

<h2 id="enabling-linter-rules">
<a id="enabling-linter-rules" class="anchor" href="#enabling-linter-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling and disabling linter rules</h2>

<p>The analyzer package also provides a code linter. A wide variety of
<a href="http://dart-lang.github.io/linter/lints/">linter rules</a> are available. Linters tend to be
nondenominational—rules don’t have to agree with each other.
For example, some rules are more appropriate for library packages
and others are designed for Flutter apps.
Note that linter rules can have false positives, unlike static analysis.</p>

<h3 id="default-google-rules-pedantic">
<a id="default-google-rules-pedantic" class="anchor" href="#default-google-rules-pedantic" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling default Google rules: pedantic</h3>

<p>To enable the list of linter rules that Google uses in its own Dart code,
depend on the <a href="https://pub.dev/packages/pedantic">pedantic package</a>
and include its <code class="highlighter-rouge">analysis_options.yaml</code> file.
Unless you need to use the <code class="highlighter-rouge">pedantic</code> API, declare a dev dependency on <code class="highlighter-rouge">pedantic</code>
in your <code class="highlighter-rouge">pubspec.yaml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">dev_dependencies</span><span class="pi">:</span>
  <span class="na">pedantic</span><span class="pi">:</span> <span class="s">^1.0.0</span>
</code></pre></div></div>

<p>Run <code class="highlighter-rouge">pub get</code>, and then
add the following line to your <code class="highlighter-rouge">analysis_options.yaml</code> file:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">include</span><span class="pi">:</span> <span class="s">package:pedantic/analysis_options.yaml</span>
</code></pre></div></div>

<aside class="alert alert-warning">
  <p><strong>Note:</strong>
  When a <strong>new version of <code class="highlighter-rouge">pedantic</code></strong> is published,
  code that previously passed analysis might <strong>start failing analysis.</strong>
  We recommend updating your code to work with the new rules.
  Other options are to <a href="/tools/pub/dependencies#version-constraints">use a specific version</a>
  of <code class="highlighter-rouge">pedantic</code>, explicitly enable individual linter rules,
  or <a href="#disabling-individual-rules">disable individual rules</a>.</p>
</aside>

<h3 id="individual-rules">
<a id="individual-rules" class="anchor" href="#individual-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling individual rules</h3>

<p>To enable a single linter rule, add <code class="highlighter-rouge">linter:</code> to the analysis options file,
followed by <code class="highlighter-rouge">rules:</code>.
On subsequent lines, specify the rules that you want to apply,
prefixed with dashes. For example:</p>

<pre class="prettyprint lang-yaml">linter:
  rules:
    - always_declare_return_types
    - camel_case_types
    - empty_constructor_bodies
    - annotate_overrides
    - avoid_init_to_null
    - constant_identifier_names
    - one_member_abstracts
    - slash_for_doc_comments
    - sort_constructors_first
    - unnecessary_brace_in_string_interps</pre>

<h3 id="disabling-individual-rules">
<a id="disabling-individual-rules" class="anchor" href="#disabling-individual-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disabling individual rules</h3>

<p>If you include an analysis options file such as the one in <code class="highlighter-rouge">pedantic</code>, 
you might want to disable some of the included rules.
Disabling individual rules is just like enabling them,
except that you add <code class="highlighter-rouge">: false</code> after the rule name.
Here’s an example of an analysis options file
that uses all pedantic rules except <code class="highlighter-rouge">unawaited_futures</code>:</p>

<pre class="prettyprint lang-yaml">include: package:pedantic/analysis_options.yaml

linter:
  rules:
    unawaited_futures: false</pre>

<aside class="alert alert-warning">
  <p><strong>Don’t include an initial dash (<code class="highlighter-rouge">- </code>)</strong> when you specify a value (<code class="highlighter-rouge">: false)</code>.
  The YAML syntax for key-value maps is slightly different
  from the YAML syntax for lists.</p>
</aside>

<h2 id="excluding-code-from-analysis">
<a id="excluding-code-from-analysis" class="anchor" href="#excluding-code-from-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Excluding code from analysis</h2>

<p>Sometimes it’s OK for some code to fail analysis.
For example, you might rely on code generated by a package that
you don’t own—the generated code works,
but produces errors during static analysis.
Or a linter rule might cause a false positive
that you want to suppress.</p>

<p>You have several ways to exclude code from analysis:</p>

<ul>
  <li>Exclude entire files from analysis.</li>
  <li>Stop specific rules from being applied to individual files.</li>
  <li>Stop specific rules from being applied to individual lines of code.</li>
  <li>Ignore specific rules or errors.</li>
</ul>

<p>You can also <a href="#changing-the-severity-of-rules">change the severity of rules</a>.</p>

<h3 id="excluding-files">
<a id="excluding-files" class="anchor" href="#excluding-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Excluding files</h3>

<p>To exclude files from static analysis,
use <code class="highlighter-rouge">exclude:</code> in the analysis options file:</p>

<pre class="prettyprint lang-yaml">analyzer:
  exclude:
    - lib/client/piratesapi.dart</pre>

<p>You can specify a group of files using
<a href="https://pub.dev/packages/glob">glob</a> syntax:</p>

<pre class="prettyprint lang-yaml">analyzer:
  exclude:
    - src/test/_data/**
    - test/*_example.dart</pre>

<h3 id="suppressing-rules-for-a-file">
<a id="suppressing-rules-for-a-file" class="anchor" href="#suppressing-rules-for-a-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Suppressing rules for a file</h3>

<p>To ignore a specific rule for a specific file,
add an <code class="highlighter-rouge">ignore_for_file</code> comment to the file:</p>

<pre class="prettyprint lang-dart">// ignore_for_file: unused_import</pre>

<p>This acts for the whole file, before or after the comment, and is
particularly useful for generated code.</p>

<p>To suppress more than one rule, use a comma-separated list:</p>

<pre class="prettyprint lang-dart">// ignore_for_file: unused_import, invalid_assignment</pre>

<h3 id="suppressing-rules-for-a-line-of-code">
<a id="suppressing-rules-for-a-line-of-code" class="anchor" href="#suppressing-rules-for-a-line-of-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Suppressing rules for a line of code</h3>

<p>To suppress a specific rule on a specific line of code,
preceed that line with an <code class="highlighter-rouge">ignore</code> comment:</p>

<pre class="prettyprint lang-dart">// ignore: &lt;linter rule&gt;</pre>

<p>Here’s example of ignoring code that causes a runtime error,
as you might do in a language test:</p>

<pre class="prettyprint lang-dart">// ignore: invalid_assignment
int x = '';</pre>

<p>To suppress more than one rule, supply a comma-separated list:</p>

<pre class="prettyprint lang-dart">// ignore: invalid_assignment, const_initialized_with_non_constant_value
const x = y;</pre>

<p>Alternatively, append the ignore rule to the line that it applies to:</p>

<pre class="prettyprint lang-dart">int x = ''; // ignore: invalid_assignment</pre>

<h2 id="customizing-analysis-rules">
<a id="customizing-analysis-rules" class="anchor" href="#customizing-analysis-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customizing analysis rules</h2>

<p>Each <a href="https://github.com/dart-lang/sdk/blob/master/pkg/analyzer/lib/error/error.dart">analyzer error code</a> and
<a href="http://dart-lang.github.io/linter/lints/">linter rule</a> has a default severity.
You can use the analysis options file to change
the severity of individual rules, or to always ignore some rules.</p>

<p>The analyzer supports three severity levels:</p>

<dl>
  <dt><code class="highlighter-rouge">info</code></dt>
  <dd>An informational message that doesn’t cause analysis to fail.
Example: <a href="https://pub.dev/documentation/analyzer/latest/analyzer/TodoCode/TODO-constant.html"><code class="highlighter-rouge">todo</code></a>
</dd>
  <dt><code class="highlighter-rouge">warning</code></dt>
  <dd>A warning that doesn’t cause analysis to fail unless
the analyzer is configured to treat warnings as errors.
Example: <a href="https://pub.dev/documentation/analyzer/latest/analyzer/AnalysisOptionsWarningCode/ANALYSIS_OPTION_DEPRECATED-constant.html"><code class="highlighter-rouge">analysis_option_deprecated</code></a>
</dd>
  <dt><code class="highlighter-rouge">error</code></dt>
  <dd>An error that causes analysis to fail.
Example: <a href="https://pub.dev/documentation/analyzer/latest/analyzer/StaticTypeWarningCode/INVALID_ASSIGNMENT-constant.html"><code class="highlighter-rouge">invalid_assignment</code></a>
</dd>
</dl>

<h3 id="ignoring-rules">
<a id="ignoring-rules" class="anchor" href="#ignoring-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Ignoring rules</h3>

<p>You can ignore specific <a href="https://github.com/dart-lang/sdk/blob/master/pkg/analyzer/lib/error/error.dart">analyzer error codes</a> and <a href="http://dart-lang.github.io/linter/lints/">linter rules</a>
by using the <code class="highlighter-rouge">errors:</code> field.
List the rule, followed by <code>: ignore</code>. For example, the following
analysis options file instructs the analysis tools to ignore the TODO rule:</p>

<pre class="prettyprint lang-yaml">analyzer:
  errors:
    todo: ignore</pre>

<h3 id="changing-the-severity-of-rules">
<a id="changing-the-severity-of-rules" class="anchor" href="#changing-the-severity-of-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changing the severity of rules</h3>

<p>You can globally change the severity of a particular rule.
This technique works for regular analysis issues as well as for lints.
For example, the following analysis options file instructs the analysis tools to
treat invalid assignments as warnings and missing returns as errors,
and to provide information (but not a warning or error) about dead code:</p>

<pre class="prettyprint lang-yaml">analyzer:
  errors:
    invalid_assignment: warning
    missing_return: error
    dead_code: info</pre>

<h2 id="resources">
<a id="resources" class="anchor" href="#resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resources</h2>

<p>Use the following resources to learn more about static analysis in Dart:</p>

<ul>
  <li><a href="/guides/language/sound-dart">Dart’s type system</a></li>
  <li><a href="https://github.com/dart-lang/linter#linter-for-dart">Dart linter</a></li>
  <li><a href="http://dart-lang.github.io/linter/lints/">Dart linter rules</a></li>
  <li><a href="/tools/dartanalyzer">dartanalyzer</a></li>
  <li><a href="/tools/dartdevc">dartdevc</a></li>
  <li><a href="https://pub.dev/packages/analyzer">analyzer package</a></li>
</ul>


          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="container">
    <div class="content">
      <div class="text-center" martdown="1">
        <style>.menu .material-icons { font-size: 14px; }</style><ul class="menu">
          <li><a href="/terms">Terms</a></li>
          <li><a href="/security">Security</a></li>
          <li><a href="http://www.google.com/intl/en/policies/privacy/" class="no-automatic-external">Privacy</a></li>
          <li>Site&nbsp;<a href="http://creativecommons.org/licenses/by/3.0/" class="no-automatic-external">CC&nbsp;BY&nbsp;3.0</a></li>
          <li><a href="/about_zh_CN">关于 dart.dev 中文版</a></li>
          <li>
            <a href="https://github.com/dartchina/site-www-cn"
               title="该站在 GitHub 开源"
               class="no-automatic-external"><i class="fab fa-github fa-sm"></i></a>
            &nbsp;
            <a href="https://github.com/dartchina/site-www-cn/issues"
               title="为该站提交 issue"
               class="no-automatic-external"><i class="fas fa-bug fa-sm"></i></a>
            &nbsp;
            <a 
               title="Site built on 2019/05/13 04:05 PDT"
               
               class="no-automatic-external"><i class="fas fa-wrench fa-sm"></i></a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
