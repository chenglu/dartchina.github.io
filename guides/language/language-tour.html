<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Language" content="en_US" />
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A tour of all of the major Dart language features.">
  <title>语言概览 | Dart</title>

  <!-- Favicon / Touch Icons -->
  <link rel="icon" sizes="64x64" href="/assets/shared/dart/icon/64.png">
  <link href="/assets/touch-icon-iphone.png" rel="apple-touch-icon">
  <link href="/assets/touch-icon-ipad.png" rel="apple-touch-icon" sizes="76x76">
  <link href="/assets/touch-icon-iphone-retina.png" rel="apple-touch-icon" sizes="120x120">
  <link href="/assets/touch-icon-ipad-retina.png" rel="apple-touch-icon" sizes="152x152">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@dart_lang" />
  <meta name="twitter:title" content="Dart 编程语言概览" />
  <meta name="twitter:description" content="A tour of all of the major Dart language features." />

  <!-- Open Graph -->
  <meta property="og:title" content="Dart 编程语言概览" />
  <meta property="og:description" content="A tour of all of the major Dart language features." />
  <meta property="og:url" content="https://www.dartlang.org/guides/language/language-tour" />
  <meta property="og:image" content="https://www.dartlang.org/assets/shared/dart-logo-for-shares.png?2" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700' rel='stylesheet' type='text/css'>
  <link type="text/css" rel="stylesheet" href="/assets/style.css">
  
  <!--
    Why don't we use Dart here?

    The only scripting we use here is stuff like the on-click footnotes on the
    front page or resizing of the left nav. These happen to be use cases where
    JavaScript and jQuery are doing just fine. Dart is here for application
    programming, not page scripting.
   -->
  <script type="text/javascript" src="/assets/main.js"></script>
  
  <script>

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-26406144-4', 'auto');
ga('send', 'pageview');

</script>


</head>

  <body class="default">
    <header id="page-header">
  <nav id="mainnav">
  <div id="menu-toggle"><i class="icon icon-menu"></i></div>
  <a href="/" class="brand" title="Dart">
    <img src="/assets/shared/dart/logo+text/horizontal/default.svg" alt="Dart">
  </a>
  <ul>
    <li class="mainnav__get-started"><a href="/guides/get-started"><span>入门</span></a></li>
    <li><a href="/guides/language">语言</a></li>
    <li><a href="/guides/libraries">库</a></li>
    <li><a href="/tools">工具</a></li>
    
    
    <li class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dart 2 <span class="caret"></span></a>
      <ul class="dropdown-menu">
        

<li><a href="https://v1-dartlang-org.firebaseapp.com/guides/language/language-tour" class="no-automatic-external">1.24.3&nbsp;&nbsp;(archive)</a></li><li><a class="active">2.0.0-dev.68.0&nbsp;&nbsp;(beta)</a></li>

        <li role="separator" class="divider"></li>
        <li><a href="/dart-2#migration">迁移指南</a></li>
      </ul>
    </li>
    
    <li class="searchfield">
      <form class="navbar-search" action="/search" id="cse-search-box">
        <input type="hidden" name="cx" value="011220921317074318178:_yy-tmb5t_i">
        <input type="hidden" name="ie" value="UTF-8">
        <input type="hidden" name="hl" value="en">
        <input type="search" name="q" id="q" autocomplete="off" placeholder="Search">
        <button type="submit"><i class="icon icon-search"></i></button>
      </form>
    </li>
  </ul>
</nav>

  
</header>

    <main id="page-content">
      <div id="sidenav" class="">
  <div class="content">
    <a href="/" class="brand" title="Dart">
      <img src="/assets/shared/dart/logo+text/horizontal/default.svg" alt="Dart">
    </a>

    <div class="sidenav__search">
      <p>
        <a href="/search">Search <i class="icon icon-search"></i></a>
      </p>
    </div>

    <ul>
      <li>
        <a class="btn btn-default" href="/guides/get-started">入门</a>
      </li>
    </ul>
    <h4 ><a href="/guides/language" title="语言">语言</a></h4>
  <ul><li class="active">
          <a href="/guides/language/language-tour" title="概览">概览</a>
        </li>
        
        <li >
          <a href="/guides/language/effective-dart" title="Effective Dart">Effective Dart</a>
          <i class="icon icon-arrow"></i>
          <ul><li >
                <a href="/guides/language/effective-dart/style" title="风格">风格</a>
              </li><li >
                <a href="/guides/language/effective-dart/documentation" title="文档">文档</a>
              </li><li >
                <a href="/guides/language/effective-dart/usage" title="使用">使用</a>
              </li><li >
                <a href="/guides/language/effective-dart/design" title="设计">设计</a>
              </li>
          </ul><li >
          <a href="/samples" title="示例代码">示例代码</a>
        </li>
  </ul><h4 ><a href="/guides/libraries" title="库">库</a></h4>
  <ul><li >
          <a href="/guides/libraries/library-tour" title="概览">概览</a>
        </li>
  </ul><h4 ><a href="/guides/platforms" title="平台">平台</a></h4>
  <ul><li >
          <a href="https://flutter.io" title="移动端 (Flutter)">移动端 (Flutter)</a>
        </li><li >
          <a href="https://webdev.dartlang.org" title="web">web</a>
        </li><li >
          <a href="/dart-vm" title="服务器">服务器</a>
        </li>
  </ul><h4 ><a href="/guides/testing" title="测试">测试</a></h4>
  <ul>
  </ul><h4 >资源</h4>
  <ul><li >
          <a href="/install" title="安装">安装</a>
        </li><li >
          <a href="/codelabs" title="Codelabs">Codelabs</a>
        </li><li >
          <a href="/tutorials" title="学习指南">学习指南</a>
        </li><li >
          <a href="/articles" title="文章">文章</a>
        </li><li >
          <a href="/tools" title="工具">工具</a>
        </li><li >
          <a href="/community" title="社区支持">社区支持</a>
        </li>
  </ul>
  </div>
</div>

      
<div id="toc">
  <div class="content">
    <h4>On this page
      <a href="#page-content" title="Back to top" class="pull-right"><i class="icon icon-caret-up"></i></a>
    </h4>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#一个简单的-dart-程序">一个简单的 Dart 程序</a></li>
<li class="toc-entry toc-h2"><a href="#重要的概念">重要的概念</a></li>
<li class="toc-entry toc-h2"><a href="#关键字">关键字</a></li>
<li class="toc-entry toc-h2"><a href="#变量">变量</a>
<ul>
<li class="toc-entry toc-h3"><a href="#默认值">默认值</a></li>
<li class="toc-entry toc-h3"><a href="#final-和-const">Final 和 const</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#内建类型">内建类型</a>
<ul>
<li class="toc-entry toc-h3"><a href="#numbers">Numbers</a></li>
<li class="toc-entry toc-h3"><a href="#strings">Strings</a></li>
<li class="toc-entry toc-h3"><a href="#booleans">Booleans</a></li>
<li class="toc-entry toc-h3"><a href="#lists">Lists</a></li>
<li class="toc-entry toc-h3"><a href="#maps">Maps</a></li>
<li class="toc-entry toc-h3"><a href="#runes">Runes</a></li>
<li class="toc-entry toc-h3"><a href="#symbols">Symbols</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#functions">Functions</a>
<ul>
<li class="toc-entry toc-h3"><a href="#optional-参数">Optional 参数</a>
<ul>
<li class="toc-entry toc-h4"><a href="#optional-命名参数">Optional 命名参数</a></li>
<li class="toc-entry toc-h4"><a href="#optional-位置参数">Optional 位置参数</a></li>
<li class="toc-entry toc-h4"><a href="#默认参数值">默认参数值</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#main-函数">main() 函数</a></li>
<li class="toc-entry toc-h3"><a href="#functions-是一等对象">Functions 是一等对象</a></li>
<li class="toc-entry toc-h3"><a href="#匿名函数">匿名函数</a></li>
<li class="toc-entry toc-h3"><a href="#lexical-scope">Lexical scope</a></li>
<li class="toc-entry toc-h3"><a href="#lexical-closures">Lexical closures</a></li>
<li class="toc-entry toc-h3"><a href="#testing-functions-for-equality">Testing functions for equality</a></li>
<li class="toc-entry toc-h3"><a href="#return-values">Return values</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#operators">Operators</a>
<ul>
<li class="toc-entry toc-h3"><a href="#arithmetic-operators">Arithmetic operators</a></li>
<li class="toc-entry toc-h3"><a href="#equality-and-relational-operators">Equality and relational operators</a></li>
<li class="toc-entry toc-h3"><a href="#type-test-operators">Type test operators</a></li>
<li class="toc-entry toc-h3"><a href="#assignment-operators">Assignment operators</a></li>
<li class="toc-entry toc-h3"><a href="#logical-operators">Logical operators</a></li>
<li class="toc-entry toc-h3"><a href="#bitwise-and-shift-operators">Bitwise and shift operators</a></li>
<li class="toc-entry toc-h3"><a href="#conditional-expressions">Conditional expressions</a></li>
<li class="toc-entry toc-h3"><a href="#cascade-notation-">Cascade notation (..)</a></li>
<li class="toc-entry toc-h3"><a href="#other-operators">Other operators</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#control-flow-statements">Control flow statements</a>
<ul>
<li class="toc-entry toc-h3"><a href="#if-and-else">If and else</a></li>
<li class="toc-entry toc-h3"><a href="#for-loops">For loops</a></li>
<li class="toc-entry toc-h3"><a href="#while-and-do-while">While and do-while</a></li>
<li class="toc-entry toc-h3"><a href="#break-and-continue">Break and continue</a></li>
<li class="toc-entry toc-h3"><a href="#switch-and-case">Switch and case</a></li>
<li class="toc-entry toc-h3"><a href="#assert">Assert</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#exceptions">Exceptions</a>
<ul>
<li class="toc-entry toc-h3"><a href="#throw">Throw</a></li>
<li class="toc-entry toc-h3"><a href="#catch">Catch</a></li>
<li class="toc-entry toc-h3"><a href="#finally">Finally</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#classes">Classes</a>
<ul>
<li class="toc-entry toc-h3"><a href="#using-class-members">Using class members</a></li>
<li class="toc-entry toc-h3"><a href="#using-constructors">Using constructors</a></li>
<li class="toc-entry toc-h3"><a href="#getting-an-objects-type">Getting an object’s type</a></li>
<li class="toc-entry toc-h3"><a href="#instance-variables">Instance variables</a></li>
<li class="toc-entry toc-h3"><a href="#constructors">Constructors</a>
<ul>
<li class="toc-entry toc-h4"><a href="#default-constructors">Default constructors</a></li>
<li class="toc-entry toc-h4"><a href="#constructors-arent-inherited">Constructors aren’t inherited</a></li>
<li class="toc-entry toc-h4"><a href="#named-constructors">Named constructors</a></li>
<li class="toc-entry toc-h4"><a href="#invoking-a-non-default-superclass-constructor">Invoking a non-default superclass constructor</a></li>
<li class="toc-entry toc-h4"><a href="#initializer-list">Initializer list</a></li>
<li class="toc-entry toc-h4"><a href="#redirecting-constructors">Redirecting constructors</a></li>
<li class="toc-entry toc-h4"><a href="#constant-constructors">Constant constructors</a></li>
<li class="toc-entry toc-h4"><a href="#factory-constructors">Factory constructors</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#methods">Methods</a>
<ul>
<li class="toc-entry toc-h4"><a href="#instance-methods">Instance methods</a></li>
<li class="toc-entry toc-h4"><a href="#getters-and-setters">Getters and setters</a></li>
<li class="toc-entry toc-h4"><a href="#abstract-methods">Abstract methods</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#abstract-classes">Abstract classes</a></li>
<li class="toc-entry toc-h3"><a href="#implicit-interfaces">Implicit interfaces</a></li>
<li class="toc-entry toc-h3"><a href="#extending-a-class">Extending a class</a>
<ul>
<li class="toc-entry toc-h4"><a href="#overriding-members">Overriding members</a></li>
<li class="toc-entry toc-h4"><a href="#overridable-operators">Overridable operators</a></li>
<li class="toc-entry toc-h4"><a href="#nosuchmethod">noSuchMethod()</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#enumerated-types">Enumerated types</a>
<ul>
<li class="toc-entry toc-h4"><a href="#using-enums">Using enums</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#adding-features-to-a-class-mixins">Adding features to a class: mixins</a></li>
<li class="toc-entry toc-h3"><a href="#class-variables-and-methods">Class variables and methods</a>
<ul>
<li class="toc-entry toc-h4"><a href="#static-variables">Static variables</a></li>
<li class="toc-entry toc-h4"><a href="#static-methods">Static methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#generics">Generics</a>
<ul>
<li class="toc-entry toc-h3"><a href="#why-use-generics">Why use generics?</a></li>
<li class="toc-entry toc-h3"><a href="#using-collection-literals">Using collection literals</a></li>
<li class="toc-entry toc-h3"><a href="#using-parameterized-types-with-constructors">Using parameterized types with constructors</a></li>
<li class="toc-entry toc-h3"><a href="#generic-collections-and-the-types-they-contain">Generic collections and the types they contain</a></li>
<li class="toc-entry toc-h3"><a href="#restricting-the-parameterized-type">Restricting the parameterized type</a></li>
<li class="toc-entry toc-h3"><a href="#using-generic-methods">Using generic methods</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#libraries-and-visibility">Libraries and visibility</a>
<ul>
<li class="toc-entry toc-h3"><a href="#using-libraries">Using libraries</a>
<ul>
<li class="toc-entry toc-h4"><a href="#specifying-a-library-prefix">Specifying a library prefix</a></li>
<li class="toc-entry toc-h4"><a href="#importing-only-part-of-a-library">Importing only part of a library</a></li>
<li class="toc-entry toc-h4"><a href="#lazily-loading-a-library">Lazily loading a library</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#implementing-libraries">Implementing libraries</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#asynchrony-support">Asynchrony support</a>
<ul>
<li class="toc-entry toc-h3"><a href="#handling-futures">Handling Futures</a></li>
<li class="toc-entry toc-h3"><a href="#declaring-async-functions">Declaring async functions</a></li>
<li class="toc-entry toc-h3"><a href="#handling-streams">Handling Streams</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#generators">Generators</a></li>
<li class="toc-entry toc-h2"><a href="#callable-classes">Callable classes</a></li>
<li class="toc-entry toc-h2"><a href="#isolates">Isolates</a></li>
<li class="toc-entry toc-h2"><a href="#typedefs">Typedefs</a></li>
<li class="toc-entry toc-h2"><a href="#metadata">Metadata</a></li>
<li class="toc-entry toc-h2"><a href="#comments">Comments</a>
<ul>
<li class="toc-entry toc-h3"><a href="#single-line-comments">Single-line comments</a></li>
<li class="toc-entry toc-h3"><a href="#multi-line-comments">Multi-line comments</a></li>
<li class="toc-entry toc-h3"><a href="#documentation-comments">Documentation comments</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#summary">Summary</a></li>
</ul>
  </div>
</div>


      <article>
        <div class="content">
          
<div class="banner alert alert-info">
  <p class="banner__text">
    欢迎来到 <a href="/dart-2"><b>Dart 2</b></a>!
    如果您仍在使用 Dart 1.x? 可访问查阅
    <a href="https://v1-dartlang-org.firebaseapp.com" class="no-automatic-external" target="_blank" rel="noopener">存档站点</a>
    或 <a href="/dart-2#migration">迁移指南</a>.
  </p>
</div>


          

          
          <div>
            <ul class="page-github-links-menu" role="group">
  <li>
    <a href="https://github.com/dart-lang/site-www/tree/master/src_zh_CN/_guides/language/language-tour.md"
      class="no-automatic-external"
      title="View page source"
      target="_blank" rel="noopener">
      <i class="fab fa-github fa-sm"></i>
    </a>
  </li>
  <li>
    <a href="https://github.com/dart-lang/site-www/issues/new?title='Dart 编程语言概览' page issue&body=From URL: https://www.dartlang.org/guides/language/language-tour"
      class="no-automatic-external"
      title="Report a bug on this page" target="_blank" rel="noopener">
      <i class="fas fa-bug fa-sm"></i>
    </a>
  </li>
</ul>

            <h1>Dart 编程语言概览</h1>
          </div>
          <?code-excerpt replace="/([A-Z]\w*)\d\b/$1/g"?>

<p>这里将介绍 Dart 主要功能，从变量和运算符到类和库，假设您已经知道如何使用其他语言编程。</p>

<p>学习更多 Dart 核心库, 参见
<a href="/guides/libraries/library-tour">Dart 库概览</a>.
想了解更多有关语言功能的详细信息,
参见 <a href="/guides/language/spec">Dart 编程语言规范</a>.</p>

<div class="alert alert-info">
  <p><strong>提示:</strong>
使用 DartPad 可以体验 Dart 的大部分语言功能
(<a href="/tools/dartpad">learn more</a>).</p>

  <p><strong><a href="https://dartpad.dartlang.org" target="_blank">Open DartPad</a></strong></p>
</div>

<h2 id="一个简单的-dart-程序">
<a id="一个简单的-dart-程序" class="anchor" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84-dart-%E7%A8%8B%E5%BA%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>一个简单的 Dart 程序</h2>
<p>下面的代码用到了很多 Dart 的基本功能：</p>

<?code-excerpt "misc/test/language_tour/basic_test.dart"?>
<pre class="prettyprint lang-dart">
// 定义一个函数
printInteger(int aNumber) {
  print('The number is $aNumber.'); // 打印到控制台。
}

// 应用从这里开始执行。
main() {
  var number = 42; // 声明并初始化一个变量。
  printInteger(number); // 调用函数。
}
</pre>

<p>以下是此程序使用的代码，这些代码适用于所有（或几乎所有）的 Dart 
应用：</p>

<dl>
  <dt><code>// <em>代码注释。</em> </code></dt>
  <dd>
    <p>单行注释。
Dart 同样支持多行注释和文档注释。
有关更多信息，参见 <a href="#comments">注释</a>.</p>
  </dd>
  <dt><code class="highlighter-rouge">int</code></dt>
  <dd>
    <p>数据类型。 一些其他 <a href="#built-in-types">内置类型</a>
包括 <code class="highlighter-rouge">String</code>, <code class="highlighter-rouge">List</code>, 和 <code class="highlighter-rouge">bool</code>。</p>
  </dd>
  <dt><code class="highlighter-rouge">42</code></dt>
  <dd>
    <p>字面量. 字面量是一种编译型常量。</p>
  </dd>
  <dt><code class="highlighter-rouge">print()</code></dt>
  <dd>
    <p>便利输出方式。</p>
  </dd>
  <dt>
<code class="highlighter-rouge">'...'</code> (or <code class="highlighter-rouge">"..."</code>)</dt>
  <dd>
    <p>字符串常量。</p>
  </dd>
  <dt>
<code>$<em>variableName</em></code> (或 <code>${<em>expression</em>}</code>)</dt>
  <dd>
    <p>字符串插值： 包括字符串文字内部的变量或表达式的字符串。 
有关更多信息，参见
<a href="#strings">Strings</a>.</p>
  </dd>
  <dt><code class="highlighter-rouge">main()</code></dt>
  <dd>
    <p>程序开始执行函数，该函数是特定的、<em>必须的</em>、顶级函数。
有关更多信息，参见
<a href="#the-main-function">The main() function</a>.</p>
  </dd>
  <dt><code class="highlighter-rouge">var</code></dt>
  <dd>
    <p>定义变量，通过这种方式定义变量不需要指定变量类型。</p>
  </dd>
</dl>

<div class="alert alert-info">
  <p><strong>提示：</strong>
本站的代码遵循 Dart 风格指南中的约定。
<a href="/guides/language/effective-dart/style">Dart 风格指南</a>.</p>
</div>

<h2 id="重要的概念">
<a id="重要的概念" class="anchor" href="#%E9%87%8D%E8%A6%81%E7%9A%84%E6%A6%82%E5%BF%B5" aria-hidden="true"><span class="octicon octicon-link"></span></a>重要的概念</h2>

<p>在学习 Dart 语言时, 应该基于以下事实和概念：</p>

<ul>
  <li>
    <p>任何保存在变量中的都是一个 <em>对象</em> ， 并且所有的对象都是对应一个 <em>类</em> 的实例。
无论是数字，函数和 <code class="highlighter-rouge">null</code> 都是对象。所有对象继承自 <a href="https://api.dartlang.org/dev/dart-core/Object-class.html">Object</a> 类。</p>
  </li>
  <li>
    <p>尽管 Dart 是强类型的，但是 Dart 可以推断类型，所以类型注释是可选的。 
在上面的代码中， <code class="highlighter-rouge">number</code> 被推断为 <code class="highlighter-rouge">int</code> 类型。 
如果要明确说明不需要任何类型，
<a href="/guides/language/effective-dart/design#do-annotate-with-object-instead-of-dynamic-to-indicate-any-object-is-allowed">需要使用特殊类型 <code class="highlighter-rouge">dynamic</code></a> 。</p>
  </li>
  <li>
    <p>Dart 支持泛型，如 <code class="highlighter-rouge">List &lt;int&gt;</code> （整数列表）或 <code class="highlighter-rouge">List &lt;dynamic&gt;</code> （任何类型的对象列表）。</p>
  </li>
  <li>
    <p>Dart 支持顶级函数（例如 <code class="highlighter-rouge">main（）</code> ），
同样函数绑定在类或对象上（分别是 <em>静态函数</em> 和 <em>实例函数</em> ）。
以及支持函数内创建函数 （ <em>嵌套</em> 或 <em>局部函数</em> ） 。</p>
  </li>
  <li>
    <p>类似地， Dart 支持顶级 <em>变量</em> ，
同样变量绑定在类或对象上（静态变量和实例变量）。 
实例变量有时称为字段或属性。</p>
  </li>
  <li>
    <p>与 Java 不同，Dart 没有关键字 “public” ， “protected” 和 “private” 。 
如果标识符以下划线（\ _）开头，则它相对于库是私有的。 
有关更多信息，参见 [库和可见性]（＃libraries-and-visibility）。</p>
  </li>
  <li>
    <p><em>标识符</em> 以字母或下划线（\ _）开头，后跟任意字母和数字组合。</p>
  </li>
  <li>
    <p>Sometimes it matters whether something is an <em>expression</em> or a
<em>statement</em>, so it helps to be precise about those two words.</p>
  </li>
  <li>
    <p>Dart 工具提示两种类型问题：警告和错误。 
警告只是表明代码可能无法正常工作，但不会阻止程序的执行。 
错误可能是编译时错误或者运行时错误。 
编译时错误会阻止代码的执行;
运行时错误会导致代码在执行过程中引发 [异常]（#exception）。</p>
  </li>
</ul>

<h2 id="关键字">
<a id="关键字" class="anchor" href="#%E5%85%B3%E9%94%AE%E5%AD%97" aria-hidden="true"><span class="octicon octicon-link"></span></a>关键字</h2>

<p>Dart 语言关键字列表。</p>

<table class="table table-striped nowrap">
  <tbody>
    <tr>
      <td>abstract <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>do</td>
      <td>import <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>super</td>
    </tr>
    <tr>
      <td>as <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>dynamic <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>in</td>
      <td>switch</td>
    </tr>
    <tr>
      <td>assert</td>
      <td>else</td>
      <td>interface <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>sync* <sup title="limited reserved word" alt="limited reserved word">2</sup>
</td>
    </tr>
    <tr>
      <td>async <sup title="limited reserved word" alt="limited reserved word">2</sup>
</td>
      <td>enum</td>
      <td>is</td>
      <td>this</td>
    </tr>
    <tr>
      <td>async* <sup title="limited reserved word" alt="limited reserved word">2</sup>
</td>
      <td>export <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>library <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>throw</td>
    </tr>
    <tr>
      <td>await <sup title="limited reserved word" alt="limited reserved word">2</sup>
</td>
      <td>external <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>mixin <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>true</td>
    </tr>
    <tr>
      <td>break</td>
      <td>extends</td>
      <td>new</td>
      <td>try</td>
    </tr>
    <tr>
      <td>case</td>
      <td>factory <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>null</td>
      <td>typedef <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
    </tr>
    <tr>
      <td>catch</td>
      <td>false</td>
      <td>operator <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>var</td>
    </tr>
    <tr>
      <td>class</td>
      <td>final</td>
      <td>part <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>void</td>
    </tr>
    <tr>
      <td>const</td>
      <td>finally</td>
      <td>rethrow</td>
      <td>while</td>
    </tr>
    <tr>
      <td>continue</td>
      <td>for</td>
      <td>return</td>
      <td>with</td>
    </tr>
    <tr>
      <td>covariant <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>get <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>set <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>yield <sup title="limited reserved word" alt="limited reserved word">2</sup>
</td>
    </tr>
    <tr>
      <td>default</td>
      <td>if</td>
      <td>static <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>yield* <sup title="limited reserved word" alt="limited reserved word">2</sup>
</td>
    </tr>
    <tr>
      <td>deferred <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td>implements <sup title="built-in-identifier" alt="built-in-identifier">1</sup>
</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><sup>1</sup> 带有上标1的单词
是<strong>内置标识符</strong>。 
避免使用内置标识符作为标识符。 
如果对类或类型名称使用内置标识符，
编译时会发生错误。</p>

<p><sup>2</sup> 带有上标2的单词
是 Dart 1.0 发布后，为支持<strong>异步</strong>增加更新的，限制类保留字。 
不能在标记为 <code class="highlighter-rouge">async</code> ，<code class="highlighter-rouge">async*</code> 或 <code class="highlighter-rouge">sync*</code> 的任何函数体中使用 <code class="highlighter-rouge">async</code> , <code class="highlighter-rouge">async*</code> , or <code class="highlighter-rouge">sync*</code> 作为标识符。
有关更多信息，参见 <a href="#asynchrony-support">Asynchrony支持</a>。</p>

<p>关键字表中的剩余单词都是<strong>保留字</strong>。
不能将保留字用作标识符。</p>

<h2 id="变量">
<a id="变量" class="anchor" href="#%E5%8F%98%E9%87%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>变量</h2>
<p>创建一个变量并进行初始化:</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (var-decl)"?>
<pre class="prettyprint lang-dart">
var name = 'Bob';
</pre>

<p>变量仅存储对象引用，这里的变量是 <code class="highlighter-rouge">name</code> 存储了一个 <code class="highlighter-rouge">String</code> 类型的对象引用。
“Bob” 是这个 <code class="highlighter-rouge">String</code> 类型对象的值。</p>

<p><code class="highlighter-rouge">name</code> 变量的类型被推断为 <code class="highlighter-rouge">String</code> 。
但是也可以通过指定类型的方式，来改变变量类型。 
如果对象不限定为单个类型，可以指定为 <code class="highlighter-rouge">对象类型</code> 或 <code class="highlighter-rouge">动态类型</code>，
参见 <a href="/guides/language/effective-dart/design#do-annotate-with-object-instead-of-dynamic-to-indicate-any-object-is-allowed">设计指南</a>。</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (type-decl)"?>
<pre class="prettyprint lang-dart">
dynamic name = 'Bob';
</pre>

<p>另一种方式是显式声明可以推断出的类型：</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (static-types)"?>
<pre class="prettyprint lang-dart">
String name = 'Bob';
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
本页局部变量遵守
<a href="/guides/language/effective-dart/design#types">风格建议指南</a>
使用 <code class="highlighter-rouge">var</code>。 没有使用指定类型的方式。</p>
</div>

<h3 id="默认值">
<a id="默认值" class="anchor" href="#%E9%BB%98%E8%AE%A4%E5%80%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>默认值</h3>

<p>未初始化的变量默认值是 <code class="highlighter-rouge">null</code>。即使变量是数字
类型默认值也是 null，因为在 Dart 中一切都是对象，数字类型
也不例外。</p>

<?code-excerpt "misc/test/language_tour/variables_test.dart (var-null-init)"?>
<pre class="prettyprint lang-dart">
int lineCount;
assert(lineCount == null);
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
在生产环境代码中 <code class="highlighter-rouge">assert()</code> 函数会被忽略，不会被调用。
在开发过程中, <code>assert(<em>condition</em>)</code>
会在非 <code class="highlighter-rouge">true</code> 的条件下抛出异常.有关更多信息，参见
 <a href="#assert">Assert</a>.</p>
</div>

<h3 id="final-和-const">
<a id="final-和-const" class="anchor" href="#final-%E5%92%8C-const" aria-hidden="true"><span class="octicon octicon-link"></span></a>Final 和 const</h3>

<p>使用过程中从来不会被修改的变量， 可以使用 <code class="highlighter-rouge">final</code> 或 <code class="highlighter-rouge">const</code>, 而不是 <code class="highlighter-rouge">var</code> 或者其它类型，
final 变量的值只能被设置一次；
const 变量在编译时就已经固定 (Const 变量
是隐式 final 的类型.) 最高级 final 变量或类变量在第一次使用时被初始化。</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
实例变量可以是 <code class="highlighter-rouge">final</code> 类型但不能是 <code class="highlighter-rouge">const</code> 类型。</p>
</div>

<p>创建和设置一个 final 变量：</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (final)"?>
<pre class="prettyprint lang-dart">
final name = 'Bob'; // Without a type annotation
final String nickname = 'Bobby';
</pre>

<p>final 不能被修改:</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (cant-assign-to-final)"?>
<pre class="prettyprint lang-dart fails-sa">
name = 'Alice'; // Error: 一个 final 变量只能被设置一次。
</pre>

<p>如果需要在<strong>编译时</strong>就固定变量的值，可以使用 <code class="highlighter-rouge">const</code> 类型变量。
如果 const 变量是类级别的，需要标记为 <code class="highlighter-rouge">static const</code>。
在这些地方可以使用在编译时就已经固定不变的值，字面量的数字和字符串，
固定的变量，或者是用于计算的固定数字：</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (const)"?>
<pre class="prettyprint lang-dart">
const bar = 1000000; // 压力单位 (dynes/cm2)
const double atm = 1.01325 * bar; // 标准气压
</pre>

<p>const 关键字不仅可以用于声明常量变量。 
还可以用来创建常量值，以及声明创建常量值的构造函数。
任何变量都可以拥有常量值。</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (const-vs-final)"?>
<pre class="prettyprint lang-dart">
var foo = const [];
final bar = const [];
const baz = []; // Equivalent to `const []`
</pre>

<p>声明 <code class="highlighter-rouge">const</code> 的初始化表达式中 <code class="highlighter-rouge">const</code> 可以被省略。
比如上面的 <code class="highlighter-rouge">baz</code>。 有关更多信息，参见 <a href="/guides/language/effective-dart/usage#dont-use-const-redundantly">不要冗余地使用 const</a>。</p>

<p>非 final ， 非 const 的变量是可以被修改的，即使这些变量
曾经引用过 const 值。</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (reassign-to-non-final)"?>
<pre class="prettyprint lang-dart">
foo = [1, 2, 3]; // 曾经引用过 const [] 常量值。
</pre>

<p>const 变量的值不可以修改：</p>

<?code-excerpt "misc/lib/language_tour/variables.dart (cant-assign-to-const)"?>
<pre class="prettyprint lang-dart fails-sa">
baz = [42]; // Error: 常量变量不能赋值修改。
</pre>

<p>更多关于使用 <code class="highlighter-rouge">const</code> 创建常量值，参见
<a href="#lists">Lists</a>， <a href="#maps">Maps</a>， 和 <a href="#classes">Classes</a>。</p>

<h2 id="内建类型">
<a id="内建类型" class="anchor" href="#%E5%86%85%E5%BB%BA%E7%B1%BB%E5%9E%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>内建类型</h2>

<p>Dart 语言支持以下内建类型：</p>

<ul>
  <li>numbers</li>
  <li>strings</li>
  <li>booleans</li>
  <li>lists (也被称为 <em>arrays</em>)</li>
  <li>maps</li>
  <li>runes (用于在字符串中表示 Unicode 字符)</li>
  <li>symbols</li>
</ul>

<p>这些类型都可以被初始化为字面量。
例如, <code class="highlighter-rouge">'this is a string'</code> 是一个字符串的字面量，
<code class="highlighter-rouge">true</code> 是一个布尔的字面量。</p>

<p>因为在 Dart 所有的变量终究是一个对象（一个类的实例），
所以变量可以使用 <em>构造行数</em> 进行初始化。
一些内建类型拥有自己的构造函数。
例如， 通过 <code class="highlighter-rouge">Map()</code> 来构造一个 map 变量。</p>

<h3 id="numbers">
<a id="numbers" class="anchor" href="#numbers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Numbers</h3>

<p>Dart 语言的 numbers 有两种类型:</p>

<dl>
  <dt><a href="https://api.dartlang.org/dev/dart-core/int-class.html">int</a></dt>
  <dd>
    <p>整数值不大于64位，
具体取决于平台。
在 Dart VM 上， 值的范围从
-2<sup>63</sup> 到 2<sup>63</sup> - 1.
Dart 被编译为 JavaScript 时，使用
<a href="https://stackoverflow.com/questions/2802957/number-of-bits-in-javascript-numbers/2803010#2803010">JavaScript numbers,</a>
值的范围从 -2<sup>53</sup> 到 2<sup>53</sup> - 1.</p>
  </dd>
  <dt><a href="https://api.dartlang.org/dev/dart-core/double-class.html">double</a></dt>
  <dd>
    <p>64位（双精度）浮点数，依据 IEEE 754 标准。</p>
  </dd>
</dl>

<p><code class="highlighter-rouge">int</code> 和 <code class="highlighter-rouge">double</code> 都是 <a href="https://api.dartlang.org/dev/dart-core/num-class.html"><code class="highlighter-rouge">num</code>.</a> 的亚类型。
num 类型包括基本运算 +， -， /， 和 *，
以及 <code class="highlighter-rouge">abs()</code>，<code class="highlighter-rouge"> ceil()</code>，
和 <code class="highlighter-rouge">floor()</code>， 等函数方法。
（按位运算符，例如»，定义在 int 类中。）
如果 num 及其亚类型找不到你想要的方法，
尝试查找使用 <a href="https://api.dartlang.org/dev/dart-math">dart:math</a> 库。</p>

<p>整数类型不包含小数点。
下面是定义整数类型字面量的例子:</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (integer-literals)"?>
<pre class="prettyprint lang-dart">
int x = 1;
int hex = 0xDEADBEEF;
</pre>
<p>如果一个数字包含小数点，那么就是小数类型。 
下面是定义小数类型字面量的例子:</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (double-literals)"?>
<pre class="prettyprint lang-dart">
double y = 1.1;
double exponents = 1.42e5;
</pre>

<p>以下是将字符串转换为数字的方法，反之亦然：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (number-conversion)"?>
<pre class="prettyprint lang-dart">
// String -&gt; int
var one = int.parse('1');
assert(one == 1);

// String -&gt; double
var onePointOne = double.parse('1.1');
assert(onePointOne == 1.1);

// int -&gt; String
String oneAsString = 1.toString();
assert(oneAsString == '1');

// double -&gt; String
String piAsString = 3.14159.toStringAsFixed(2);
assert(piAsString == '3.14');
</pre>

<p>int 特有的传统按位运算操作，移位（&lt;&lt;， &gt;&gt;），按位与（&amp;）以及 按位或（|）。
例如：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (bit-shifting)"?>
<pre class="prettyprint lang-dart">
assert((3 &lt;&lt; 1) == 6); // 0011 &lt;&lt; 1 == 0110
assert((3 &gt;&gt; 1) == 1); // 0011 &gt;&gt; 1 == 0001
assert((3 | 4) == 7); // 0011 | 0100 == 0111
</pre>

<p>数字类型字面量是编译时常量。
在算术表达式中，只要参与计算的因子是编译时常量， 
那么算术表达式的结果也是编译时常量。</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (const-num)"?>
<pre class="prettyprint lang-dart">
const msPerSecond = 1000;
const secondsUntilRetry = 5;
const msUntilRetry = secondsUntilRetry * msPerSecond;
</pre>

<h3 id="strings">
<a id="strings" class="anchor" href="#strings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Strings</h3>

<p>Dart 字符串是一组 UTF-16 单元序列。
字符串通过单引号或者双引号创建。</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (quoting)"?>
<pre class="prettyprint lang-dart">
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s3 = 'It\'s easy to escape the string delimiter.';
var s4 = "It's even easier to use the other delimiter.";
</pre>

<p>字符串可以通过 <code class="highlighter-rouge">${</code><em><code class="highlighter-rouge">expression</code></em><code class="highlighter-rouge">}</code> 的方式内嵌表达式。
如果表达式是一个标识符，则 {} 可以省略。
在 Dart 中通过调用就对象的 <code class="highlighter-rouge">toString()</code> 方法来得到对象相应的字符串。</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (string-interpolation)"?>
<pre class="prettyprint lang-dart">
var s = 'string interpolation';

assert('Dart has $s, which is very handy.' ==
    'Dart has string interpolation, ' +
        'which is very handy.');
assert('That deserves all caps. ' +
        '${s.toUpperCase()} is very handy!' ==
    'That deserves all caps. ' +
        'STRING INTERPOLATION is very handy!');
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
<code class="highlighter-rouge">==</code> 操作符用来测试两个对象是否相等。
在字符串中，如果两个字符串包含了相同的编码序列，那么这两个字符串相等。
units.</p>
</div>

<p>可以使用 <code class="highlighter-rouge">+</code> 操作符来把多个字符串连接为一个，也可以把多个字面量字符串写在一起来实现字符串连接：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (adjacent-string-literals)"?>
<pre class="prettyprint lang-dart">
var s1 = 'String '
    'concatenation'
    " works even over line breaks.";
assert(s1 ==
    'String concatenation works even over '
    'line breaks.');

var s2 = 'The + operator ' + 'works, as well.';
assert(s2 == 'The + operator works, as well.');
</pre>

<p>使用连续三个单引号或者三个双引号实现多行字符串对象的创建：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (triple-quotes)"?>
<pre class="prettyprint lang-dart">
var s1 = '''
You can create
multi-line strings like this one.
''';

var s2 = """This is also a
multi-line string.""";
</pre>

<p>使用 <code class="highlighter-rouge">r</code> 前缀，可以创建 “原始 raw” 字符串：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (raw-strings)"?>
<pre class="prettyprint lang-dart">
var s = r"In a raw string, even \n isn't special.";
</pre>

<p>参考 <a href="#runes">Runes</a> 来了解如何在字符串中表达 Unicode 
字符。</p>

<p>一个编译时常量的字面量字符串中，如果存在插值表达式，表达式内容也是编译时常量，
那么该字符串依旧是编译时常量。
插入的常量值类型可以是 null，数值，字符串或布尔值。</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (string-literals)"?>
<pre class="prettyprint lang-dart">
// const 类型数据
const aConstNum = 0;
const aConstBool = true;
const aConstString = 'a constant string';

// 非 const 类型数据
var aNum = 0;
var aBool = true;
var aString = 'a string';
const aConstList = [1, 2, 3];

const validConstString = '$aConstNum $aConstBool $aConstString'; //const 类型数据
// const invalidConstString = '$aNum $aBool $aString $aConstList'; //非 const 类型数据
</pre>

<p>更多关于 string 的使用, 参见
<a href="/guides/libraries/library-tour#strings-and-regular-expressions">字符串和正则表达式</a>.</p>

<h3 id="booleans">
<a id="booleans" class="anchor" href="#booleans" aria-hidden="true"><span class="octicon octicon-link"></span></a>Booleans</h3>

<p>Dart 使用 <code class="highlighter-rouge">bool</code> 类型表示布尔值。 
Dart 只有字面量 <code class="highlighter-rouge">true</code> and <code class="highlighter-rouge">false</code> 是布尔类型，
这两个对象都是编译时常量。</p>

<p>Dart 的类型安全意味着不能使用
<code>if (<em>nonbooleanValue</em>)</code> 或者
<code>assert (<em>nonbooleanValue</em>)</code>。
而是应该像下面这样，明确的进行值检查：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (no-truthy)"?>
<pre class="prettyprint lang-dart">
// 检查空字符串。
var fullName = '';
assert(fullName.isEmpty);

// 检查 0 值。
var hitPoints = 0;
assert(hitPoints &lt;= 0);

// 检查 null 值。
var unicorn;
assert(unicorn == null);

// 检查 NaN 。
var iMeantToDoThis = 0 / 0;
assert(iMeantToDoThis.isNaN);
</pre>

<h3 id="lists">
<a id="lists" class="anchor" href="#lists" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lists</h3>

<p>几乎每种编程语言中最常见的集合可能是 <em>array</em> 或有序的对象集合。
在 Dart 中的 <em>array</em> 就是 <a href="https://api.dartlang.org/dev/dart-core/List-class.html">List</a> 对象，
通常称之为 <em>lists</em> 。</p>

<p>Dart 中的 list 字面量非常像 JavaScript 中的 array 字面量。 
下面是一个 Dart list 的示例：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (list-literal)"?>
<pre class="prettyprint lang-dart">
var list = [1, 2, 3];
</pre>

<aside class="alert alert-info">
  <p><strong>提示：</strong>
 分析器推断 <code class="highlighter-rouge">list</code> 的类型为 <code class="highlighter-rouge">List&lt;int&gt;</code> 。 
  如果尝试将非整数对象添加到此 list 中，
  则分析器或运行时会引发错误。 
  有关更多信息，请阅读
  <a href="/guides/language/sound-dart#type-inference">类型推断。</a></p>
</aside>

<p>Lists 的下标索引从 0 开始，第一个元素的索引是 0。
list.length - 1 是最后一个元素的索引。 
访问 list 的长度和元素与 
JavaScript 中的用法一样：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (list-indexing)"?>
<pre class="prettyprint lang-dart">
var list = [1, 2, 3];
assert(list.length == 3);
assert(list[1] == 2);

list[1] = 1;
assert(list[1] == 1);
</pre>

<p>在 list 字面量之前添加 const 关键字，可以定义 list 类型的编译时常量：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (const-list)"?>
<pre class="prettyprint lang-dart">
var constantList = const [1, 2, 3];
// constantList[1] = 1; // 取消注释会引起错误。
</pre>

<p>List 类型包含了很多 lists 的操作函数。 
更多信息参考 <a href="#generics">泛型</a> 和
<a href="/guides/libraries/library-tour#collections">集合</a>.</p>

<h3 id="maps">
<a id="maps" class="anchor" href="#maps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Maps</h3>

<p>通常来说， map 是用来关联 keys 和 values 的对象。
keys 和 values 可以是任何类型的对象。在一个 map 对象中一个 <em>key</em> 只能出现一次。
但是 <em>value</em> 可以出现多次。 Dart 中 map 通过 map 字面量 和 <a href="https://api.dartlang.org/dev/dart-core/Map-class.html">Map</a> 类型来实现。</p>

<p>下面是使用 map 字面量的两个简单例子：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (map-literal)"?>
<pre class="prettyprint lang-dart">
var gifts = {
  // Key:    Value
  'first': 'partridge',
  'second': 'turtledoves',
  'fifth': 'golden rings'
};

var nobleGases = {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};
</pre>

<aside class="alert alert-info">
  <p><strong>提示：</strong>
  分析器会将 <code class="highlighter-rouge">gifts</code> 的类型推断为 <code class="highlighter-rouge">Map&lt;String, String&gt;</code>，
  <code class="highlighter-rouge">nobleGases</code> 的类型推断为 <code class="highlighter-rouge">Map&lt;int, String&gt;</code> 。 
  如果尝试在上面的 map 中添加错误类型，那么分析器或者运行时会引发错误。 
  有关更多信息，请阅读<a href="/guides/language/sound-dart#type-inference">类型推断。</a>。</p>
</aside>

<p>以上 map 对象也可以使用 Map 构造函数创建：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (map-constructor)"?>
<pre class="prettyprint lang-dart">
var gifts = Map();
gifts['first'] = 'partridge';
gifts['second'] = 'turtledoves';
gifts['fifth'] = 'golden rings';

var nobleGases = Map();
nobleGases[2] = 'helium';
nobleGases[10] = 'neon';
nobleGases[18] = 'argon';
</pre>

<aside class="alert alert-info">
  <p><strong>提示:</strong>
这里为什么只有 <code class="highlighter-rouge">Map()</code> ，而不是使用 <code class="highlighter-rouge">new Map()</code>。
因为在 Dart 2 中，<code class="highlighter-rouge">new</code> 关键字是可选的。
有关更多信息，参见 <a href="#using-constructors">构造函数的使用</a>。</p>
</aside>

<p>类似 JavaScript ，添加 key-value 对到已有的 map 中：</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (map-add-item)"?>
<pre class="prettyprint lang-dart">
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds'; // Add a key-value pair
</pre>

<p>类似 JavaScript ，从一个 map 中移除一个 value：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (map-retrieve-item)"?>
<pre class="prettyprint lang-dart">
var gifts = {'first': 'partridge'};
assert(gifts['first'] == 'partridge');
</pre>

<p>如果 map 中不包含所要查找的 key，那么 map 返回 null：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (map-missing-key)"?>
<pre class="prettyprint lang-dart">
var gifts = {'first': 'partridge'};
assert(gifts['fifth'] == null);
</pre>

<p>使用 <code class="highlighter-rouge">.length</code> 函数获取当前 map 中的 key-value 对数量：</p>

<?code-excerpt "misc/test/language_tour/built_in_types_test.dart (map-length)"?>
<pre class="prettyprint lang-dart">
var gifts = {'first': 'partridge'};
gifts['fourth'] = 'calling birds';
assert(gifts.length == 2);
</pre>

<p>创建 map 类型运行时常量，要在 map 字面量前加上关键字 <code class="highlighter-rouge">const</code>。
add <code class="highlighter-rouge">const</code> before the map literal:</p>

<?code-excerpt "misc/lib/language_tour/built_in_types.dart (const-map)"?>
<pre class="prettyprint lang-dart">
final constantMap = const {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};

// constantMap[2] = 'Helium'; // 取消注释会引起错误。
</pre>

<p>更名多关于 map 的内容，参见
<a href="#generics">Generics</a> and
<a href="/guides/libraries/library-tour#maps">Maps</a>.</p>

<h3 id="runes">
<a id="runes" class="anchor" href="#runes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Runes</h3>

<p>在 Dart 中，runes 用来表示字符串中的 UTF-32 编码字符。</p>

<p>Unicode 定义了一个全球的书写系统编码，
系统中使用的所有字母，数字和符号都对应唯一的数值编码。
由于 Dart 字符串是一系列 UTF-16 编码单元，
因此要在字符串中表示32位 Unicode 值需要特殊语法支持。</p>

<p>表示 Unicode 编码的常用方法是，
<code class="highlighter-rouge">\uXXXX</code>, 这里 XXXX 是一个4位的16进制数。
例如，心形符号 (♥) 是 <code class="highlighter-rouge">\u2665</code>。
对于特殊的非 4 个数值的情况，
把编码值放到大括号中即可。
例如，emoji 的笑脸   (�) 是 <code class="highlighter-rouge">\u{1f600}</code>。</p>

<p><a href="https://api.dartlang.org/dev/dart-core/String-class.html">String</a>
类有一些属性可以获得 rune 数据。
属性 <code class="highlighter-rouge">codeUnitAt</code> 和 <code class="highlighter-rouge">codeUnit</code> 返回16位编码数据。
属性 <code class="highlighter-rouge">runes</code> 获取字符串中的 runes 。</p>

<p>下面是示例演示了 runes、 16-bit code units、
和 32-bit code points 之间的关系。
点击运行按钮 ( <img src="/assets/red-run.png" width="20" height="19" alt="red-run.png"> )
查看 runes 结果。</p>

<iframe src="https://dartpad.dartlang.org/embed-dart.html?id=589bc5c95318696cefe5&amp;horizontalRatio=99&amp;verticalRatio=65" width="100%" height="310px" style="border: 1px solid #ccc;">
</iframe>

<div class="alert alert-warning">
  <p><strong>提示：</strong>
谨慎使用 list 方式操作 runes。
这种方法很容易引发崩溃，
具体原因取决于特定的语言，字符集和操作。
有关更多信息，参见
<a href="http://stackoverflow.com/questions/21521729/how-do-i-reverse-a-string-in-dart">How do I reverse a String in Dart?</a> on Stack Overflow.</p>
</div>

<h3 id="symbols">
<a id="symbols" class="anchor" href="#symbols" aria-hidden="true"><span class="octicon octicon-link"></span></a>Symbols</h3>

<p>一个 Symbol 对象表示 Dart 程序中声明的操作符或者标识符。 
你也许永远都不需要使用 Symbol ，但要按名称引用标识符的 API 时， Symbol 就非常有用了。
因为代码压缩后会改变标识符的名称，但不会改变标识符的符号。
通过字面量 Symbol ，也就是标识符前面添加一个 <code class="highlighter-rouge">#</code> 号，来获取标识符的 Symbol 。</p>

<pre><code class="language-nocode">#radix
#bar
</code></pre>

<p>Symbol 字面量是编译时常量。</p>

<h2 id="functions">
<a id="functions" class="anchor" href="#functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Functions</h2>

<p>Dart 是一门真正面向对象的语言，
甚至其中的函数也是对象，并且有它的类型 
<a href="https://api.dartlang.org/dev/dart-core/Function-class.html">Function</a> 。
这也意味着函数可以被赋值给变量或者作为参数传递给其它函数。
也可以把 Dart 类的实例当做方法来调用。
有关更多信息，参见 <a href="#callable-classes">Callable classes</a>.</p>

<p>已下是函数实现的示例：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (function)"?>
<pre class="prettyprint lang-dart">
bool isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
</pre>

<p>虽然在 Effective Dart 中推荐
<a href="/guides/language/effective-dart/design#prefer-type-annotating-public-fields-and-top-level-variables-if-the-type-isnt-obvious">公共API中声明类型</a>,
但是省略了类型声明，函数依旧是可以正常使用的：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (function-omitting-types)"?>
<pre class="prettyprint lang-dart">
isNoble(atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
</pre>

<p>如果函数中只有一句表达式，可以使用简写语法：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (function-shorthand)"?>
<pre class="prettyprint lang-dart">
bool isNoble(int atomicNumber) =&gt; _nobleGases[atomicNumber] != null;
</pre>

<p><code>=&gt; <em>expr</em></code> 语法是
<code>{ return <em>expr</em>; }</code> 的简写。 <code class="highlighter-rouge">=&gt;</code> 符号
有时也被称为 <em>胖箭头</em> 语法。</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
在箭头 (=&gt;) 和冒号 (;) 之间只能使用一个 <em>表达式</em>—不能是 <em>语句</em>。
例如：不能使用 <a href="#if-and-else">if
语句</a> ，但是可以是用 
<a href="#conditional-expressions">条件表达式</a>.</p>
</div>

<p>函数有两种参数类型: required 和 optional。
required 类型参数在参数最前面， 随后是 optional 类型参数。
命名的可选参数也可以标记为 “@ required” 。
参见下一章节，了解更多细节。</p>

<h3 id="optional-参数">
<a id="optional-参数" class="anchor" href="#optional-%E5%8F%82%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optional 参数</h3>

<p>可选参数可以是命名参数或者位置参数，但一个参数只能选择其中一种方式修饰。</p>

<h4 id="optional-命名参数">
<a id="optional-命名参数" class="anchor" href="#optional-%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optional 命名参数</h4>

<p>调用函数时，可以使用指定命名参数
<code><em>paramName</em>: <em>value</em></code>。 例如：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (use-named-parameters)"?>
<pre class="prettyprint lang-dart">
enableFlags(bold: true, hidden: false);
</pre>

<p>定义函数是，使用
<code>{<em>param1</em>, <em>param2</em>, …}</code>
来指定命名参数：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (specify-named-parameters)"?>
<pre class="prettyprint lang-dart">
/// Sets the [bold] and [hidden] flags ...
void enableFlags({bool bold, bool hidden}) {...}
</pre>

<p><a href="https://flutter.io">Flutter</a> 创建实例的表达式可能很复杂，
因此窗口小部件构造函数仅使用命名参数。 
这样创建实例的表达式更易于阅读。</p>

<p>使用 <a href="https://pub.dartlang.org/documentation/meta/latest/meta/required-constant.html">@required</a> 注释表示参数是 <em>required</em> 性质的命名参数，
该方式可以在任何 Dart 代码中使用（不仅仅是Flutter）。</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (required-named-parameters)" replace="/@required/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
const Scrollbar({Key key, <span class="highlight">@required</span> Widget child})
</pre>

<p>此时 <code class="highlighter-rouge">Scrollbar</code> 是一个构造函数， 当 <code class="highlighter-rouge">child</code> 参数缺少是，分析器会提示错误。</p>

<p><a href="https://pub.dartlang.org/documentation/meta/latest/meta/required-constant.html">Required</a> 被定义在 <a href="https://pub.dartlang.org/packages/meta">meta</a> package。 无论是直接引入（import）
<code class="highlighter-rouge">package:meta/meta.dart</code> ，或者引入了其它 package，而这个 package 输出（export）了
<code class="highlighter-rouge">meta</code>，比如 Flutter 的 <code class="highlighter-rouge">package:flutter/material.dart</code>。</p>

<h4 id="optional-位置参数">
<a id="optional-位置参数" class="anchor" href="#optional-%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optional 位置参数</h4>

<p>将参数放到 <code class="highlighter-rouge">[]</code> 中来标记参数是可选的：</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (optional-positional-parameters)"?>
<pre class="prettyprint lang-dart">
String say(String from, String msg, [String device]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  return result;
}
</pre>

<p>下面是不使用可选参数调用上面方法
的示例：</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (call-without-optional-param)"?>
<pre class="prettyprint lang-dart">
assert(say('Bob', 'Howdy') == 'Bob says Howdy');
</pre>

<p>下面是使用可选参数调用上面方法的示例：</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (call-with-optional-param)"?>
<pre class="prettyprint lang-dart">
assert(say('Bob', 'Howdy', 'smoke signal') ==
    'Bob says Howdy with a smoke signal');
</pre>

<p><a id="default-parameters"></a></p>
<h4 id="默认参数值">
<a id="默认参数值" class="anchor" href="#%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0%E5%80%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>默认参数值</h4>

<p>在定义方法的时候，可以使用 <code class="highlighter-rouge">=</code> 来定义可选参数的默认值。
默认值只能是编译时常量。 
如果没有提供默认值，则默认值为 null。</p>

<p>下面是设置可选参数默认值示例：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (named-parameter-default-values)"?>
<pre class="prettyprint lang-dart">
/// 设置 [bold] 和 [hidden] 标志 ...
void enableFlags({bool bold = false, bool hidden = false}) {...}

// bold 值为 true; hidden 值为 false.
enableFlags(bold: true);
</pre>

<div class="alert alert-info">
  <p><strong>不推荐：</strong>
旧版本代码中可能使用的是冒号 (<code class="highlighter-rouge">:</code>) 而不是 <code class="highlighter-rouge">=</code> 
来设置参数默认值。
原因是起初命名参数只支持 <code class="highlighter-rouge">:</code> 。
这种支持可能会被弃用。
建议
<strong><a href="/tools/pub/pubspec#sdk-constraints">使用 <code class="highlighter-rouge">=</code> 指定默认值。</a></strong></p>
</div>

<p>下面示例展示如何为位置参数设置默认值：</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (optional-positional-param-default)"?>
<pre class="prettyprint lang-dart">
String say(String from, String msg,
    [String device = 'carrier pigeon', String mood]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  if (mood != null) {
    result = '$result (in a $mood mood)';
  }
  return result;
}

assert(say('Bob', 'Howdy') ==
    'Bob says Howdy with a carrier pigeon');
</pre>

<p>list 或 map 可以作为默认值传递。
下面的示例定义了一个方法 <code class="highlighter-rouge">doStuff()</code>，
并分别指定参数 <code class="highlighter-rouge">list</code> 和 <code class="highlighter-rouge">gifts</code>
的默认值。</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (list-map-default-function-param)"?>
<pre class="prettyprint lang-dart">
void doStuff(
    {List&lt;int&gt; list = const [1, 2, 3],
    Map&lt;String, String&gt; gifts = const {
      'first': 'paper',
      'second': 'cotton',
      'third': 'leather'
    }}) {
  print('list:  $list');
  print('gifts: $gifts');
}
</pre>

<h3 id="main-函数">
<a id="main-函数" class="anchor" href="#main-%E5%87%BD%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>main() 函数</h3>

<p>任何应用都必须有一个顶级 <code class="highlighter-rouge">main()</code> 函数，作为应用服务的入口。
<code class="highlighter-rouge">main()</code> 函数返回值为空，参数为一个可选的 <code class="highlighter-rouge">List&lt;String&gt;</code> 。</p>

<p>下面是 web 应用的 <code class="highlighter-rouge">main()</code> 函数：</p>

<?code-excerpt "misc/test/language_tour/browser_test.dart (simple-web-main-function)"?>
<pre class="prettyprint lang-dart">
void main() {
  querySelector('#sample_text_id')
    ..text = 'Click me!'
    ..onClick.listen(reverseText);
}
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong></p>

  <p>以上代码中的 <code class="highlighter-rouge">..</code> 语法为 <a href="#cascade-notation-">级联调用</a> （cascade）。 
使用级联调用， 可以简化在一个对象上执行的多个操作。</p>
</div>

<p>下面是一个命令行应用的 <code class="highlighter-rouge">main()</code> 方法，并且使用了输入参数：</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (main-args)"?>
<pre class="prettyprint lang-dart">
// 这样运行应用： dart args.dart 1 test
void main(List&lt;String&gt; arguments) {
  print(arguments);

  assert(arguments.length == 2);
  assert(int.parse(arguments[0]) == 1);
  assert(arguments[1] == 'test');
}
</pre>

<p>使用 <a href="https://pub.dartlang.org/packages/args">args library</a> 可以定义和解析命令行参数。</p>

<h3 id="functions-是一等对象">
<a id="functions-是一等对象" class="anchor" href="#functions-%E6%98%AF%E4%B8%80%E7%AD%89%E5%AF%B9%E8%B1%A1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Functions 是一等对象</h3>

<p>一个函数可以作为另一个函数的参数。 例如：</p>

<?code-excerpt "misc/lib/language_tour/functions.dart (function-as-param)"?>
<pre class="prettyprint lang-dart">
void printElement(int element) {
  print(element);
}

var list = [1, 2, 3];

// 将 printElement 函数作为参数传递。
list.forEach(printElement);
</pre>

<p>同样可以将一个函数赋值给一个变量，例如：</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (function-as-var)"?>
<pre class="prettyprint lang-dart">
var loudify = (msg) =&gt; '!!! ${msg.toUpperCase()} !!!';
assert(loudify('hello') == '!!! HELLO !!!');
</pre>

<p>示例中使用了匿名函数。
下一章节会有更多介绍。</p>

<h3 id="匿名函数">
<a id="匿名函数" class="anchor" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>匿名函数</h3>

<p>多数函数是有名字的， 比如 <code class="highlighter-rouge">main()</code> 和 <code class="highlighter-rouge">printElement()</code>。
也可以创建没有名字的函数，这种函数被称为 <em>匿名函数</em>，
有时候也被称为 <em>lambda</em> 或者 <em>closure</em> 。
匿名函数可以被复制到一个变量中，
举个例子，在一个集合中可以添加或者删除一个匿名函数。</p>

<p>匿名函数和命名函数看起来类似— 
在括号之间可以定义一些参数或可选参数，参数使用逗号分割。</p>

<p>后面大括号中的代码为函数体：</p>

<p><code>
([[<em>Type</em>] <em>param1</em>[, …]]) { <br>
  <em>codeBlock</em>; <br>
}; <br>
</code></p>

<p>下面例子中定义了一个包含一个无类型参数 <code class="highlighter-rouge">item</code> 的匿名函数。
list 中的每个元素都会调用这个函数，打印元素位置和值的字符串。</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (anonymous-function)"?>
<pre class="prettyprint lang-dart">
var list = ['apples', 'bananas', 'oranges'];
list.forEach((item) {
  print('${list.indexOf(item)}: $item');
});
</pre>

<p>点击运行按钮 ( <img src="/assets/red-run.png" width="20" height="19" alt="red-run.png"> ) 执行代码。</p>

<iframe src="https://dartpad.dartlang.org/embed-dart.html?id=5d70bc1889d055c7a18d35d77874af88&amp;horizontalRatio=99&amp;verticalRatio=50" width="100%" height="250px" style="border: 1px solid #ccc;">
</iframe>

<p>如果函数只有一条语句， 
可以使用胖箭头简写。粘贴下面代码到 DartPad 中
并点击运行按钮，验证两个函数是等价的。</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (anon-func)"?>
<pre class="prettyprint lang-dart">
list.forEach(
    (item) =&gt; print('${list.indexOf(item)}: $item'));
</pre>

<h3 id="lexical-scope">
<a id="lexical-scope" class="anchor" href="#lexical-scope" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lexical scope</h3>

<p>Dart is a lexically scoped language, which means that the scope of
variables is determined statically, simply by the layout of the code.
You can “follow the curly braces outwards” to see if a variable is in
scope.</p>

<p>Here is an example of nested functions with variables at each scope
level:</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (nested-functions)"?>
<pre class="prettyprint lang-dart">
bool topLevel = true;

void main() {
  var insideMain = true;

  void myFunction() {
    var insideFunction = true;

    void nestedFunction() {
      var insideNestedFunction = true;

      assert(topLevel);
      assert(insideMain);
      assert(insideFunction);
      assert(insideNestedFunction);
    }
  }
}
</pre>

<p>Notice how <code class="highlighter-rouge">nestedFunction()</code> can use variables from every level, all
the way up to the top level.</p>

<h3 id="lexical-closures">
<a id="lexical-closures" class="anchor" href="#lexical-closures" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lexical closures</h3>

<p>A <em>closure</em> is a function object that has access to variables in its
lexical scope, even when the function is used outside of its original
scope.</p>

<p>Functions can close over variables defined in surrounding scopes. In the
following example, <code class="highlighter-rouge">makeAdder()</code> captures the variable <code class="highlighter-rouge">addBy</code>. Wherever the
returned function goes, it remembers <code class="highlighter-rouge">addBy</code>.</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (function-closure)"?>
<pre class="prettyprint lang-dart">
/// Returns a function that adds [addBy] to the
/// function's argument.
Function makeAdder(num addBy) {
  return (num i) =&gt; addBy + i;
}

void main() {
  // Create a function that adds 2.
  var add2 = makeAdder(2);

  // Create a function that adds 4.
  var add4 = makeAdder(4);

  assert(add2(3) == 5);
  assert(add4(3) == 7);
}
</pre>

<h3 id="testing-functions-for-equality">
<a id="testing-functions-for-equality" class="anchor" href="#testing-functions-for-equality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing functions for equality</h3>

<p>Here’s an example of testing top-level functions, static methods, and
instance methods for equality:</p>

<?code-excerpt "misc/lib/language_tour/function_equality.dart"?>
<pre class="prettyprint lang-dart">
void foo() {} // A top-level function

class A {
  static void bar() {} // A static method
  void baz() {} // An instance method
}

void main() {
  var x;

  // Comparing top-level functions.
  x = foo;
  assert(foo == x);

  // Comparing static methods.
  x = A.bar;
  assert(A.bar == x);

  // Comparing instance methods.
  var v = A(); // Instance #1 of A
  var w = A(); // Instance #2 of A
  var y = w;
  x = w.baz;

  // These closures refer to the same instance (#2),
  // so they're equal.
  assert(y.baz == x);

  // These closures refer to different instances,
  // so they're unequal.
  assert(v.baz != w.baz);
}
</pre>

<h3 id="return-values">
<a id="return-values" class="anchor" href="#return-values" aria-hidden="true"><span class="octicon octicon-link"></span></a>Return values</h3>

<p>All functions return a value. If no return value is specified, the
statement <code class="highlighter-rouge">return null;</code> is implicitly appended to the function body.</p>

<?code-excerpt "misc/test/language_tour/functions_test.dart (implicit-return-null)"?>
<pre class="prettyprint lang-dart">
foo() {}

assert(foo() == null);
</pre>

<h2 id="operators">
<a id="operators" class="anchor" href="#operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Operators</h2>

<p>Dart defines the operators shown in the following table.
You can override many of these operators, as described in
<a href="#overridable-operators">Overridable operators</a>.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Description</th>
      <th>Operator</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>unary postfix</td>
      <td>
<code><em>expr</em>++</code>    <code><em>expr</em>--</code>    <code class="highlighter-rouge">()</code>    <code class="highlighter-rouge">[]</code>    <code class="highlighter-rouge">.</code>    <code class="highlighter-rouge">?.</code>
</td>
    </tr>
    <tr>
      <td>unary prefix</td>
      <td>
<code>-<em>expr</em></code>    <code>!<em>expr</em></code>    <code>~<em>expr</em></code>    <code>++<em>expr</em></code>    <code>--<em>expr</em></code>   </td>
    </tr>
    <tr>
      <td>multiplicative</td>
      <td>
<code class="highlighter-rouge">*</code>    <code class="highlighter-rouge">/</code>    <code class="highlighter-rouge">%</code>    <code class="highlighter-rouge">~/</code>
</td>
    </tr>
    <tr>
      <td>additive</td>
      <td>
<code class="highlighter-rouge">+</code>    <code class="highlighter-rouge">-</code>
</td>
    </tr>
    <tr>
      <td>shift</td>
      <td>
<code class="highlighter-rouge">&lt;&lt;</code>    <code class="highlighter-rouge">&gt;&gt;</code>
</td>
    </tr>
    <tr>
      <td>bitwise AND</td>
      <td><code class="highlighter-rouge">&amp;</code></td>
    </tr>
    <tr>
      <td>bitwise XOR</td>
      <td><code class="highlighter-rouge">^</code></td>
    </tr>
    <tr>
      <td>bitwise OR</td>
      <td><code class="highlighter-rouge">|</code></td>
    </tr>
    <tr>
      <td>relational and type test</td>
      <td>
<code class="highlighter-rouge">&gt;=</code>    <code class="highlighter-rouge">&gt;</code>    <code class="highlighter-rouge">&lt;=</code>    <code class="highlighter-rouge">&lt;</code>    <code class="highlighter-rouge">as</code>    <code class="highlighter-rouge">is</code>    <code class="highlighter-rouge">is!</code>
</td>
    </tr>
    <tr>
      <td>equality</td>
      <td>
<code class="highlighter-rouge">==</code>    <code class="highlighter-rouge">!=</code>   </td>
    </tr>
    <tr>
      <td>logical AND</td>
      <td><code class="highlighter-rouge">&amp;&amp;</code></td>
    </tr>
    <tr>
      <td>logical OR</td>
      <td><code class="highlighter-rouge">||</code></td>
    </tr>
    <tr>
      <td>if null</td>
      <td><code class="highlighter-rouge">??</code></td>
    </tr>
    <tr>
      <td>conditional</td>
      <td><code><em>expr1</em> ? <em>expr2</em> : <em>expr3</em></code></td>
    </tr>
    <tr>
      <td>cascade</td>
      <td><code class="highlighter-rouge">..</code></td>
    </tr>
    <tr>
      <td>assignment</td>
      <td>
<code class="highlighter-rouge">=</code>    <code class="highlighter-rouge">*=</code>    <code class="highlighter-rouge">/=</code>    <code class="highlighter-rouge">~/=</code>    <code class="highlighter-rouge">%=</code>    <code class="highlighter-rouge">+=</code>    <code class="highlighter-rouge">-=</code>    <code class="highlighter-rouge">&lt;&lt;=</code>    <code class="highlighter-rouge">&gt;&gt;=</code>    <code class="highlighter-rouge">&amp;=</code>    <code class="highlighter-rouge">^=</code>    <code class="highlighter-rouge">|=</code>    <code class="highlighter-rouge">??=</code>
</td>
    </tr>
  </tbody>
</table>

<p>When you use operators, you create expressions. Here are some examples
of operator expressions:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (expressions)" replace="/,//g"?>
<pre class="prettyprint lang-dart">
a++
a + b
a = b
a == b
c ? a : b
a is T
</pre>

<p>In the <a href="#operators">operator table</a>,
each operator has higher precedence than the operators in the rows
that follow it. For example, the multiplicative operator <code class="highlighter-rouge">%</code> has higher
precedence than (and thus executes before) the equality operator <code class="highlighter-rouge">==</code>,
which has higher precedence than the logical AND operator <code class="highlighter-rouge">&amp;&amp;</code>. That
precedence means that the following two lines of code execute the same
way:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (precedence)"?>
<pre class="prettyprint lang-dart">
// Parentheses improve readability.
if ((n % i == 0) &amp;&amp; (d % i == 0)) ...

// Harder to read, but equivalent.
if (n % i == 0 &amp;&amp; d % i == 0) ...
</pre>

<div class="alert alert-warning">
  <p><strong>Warning:</strong>
For operators that work on two operands, the leftmost operand
determines which version of the operator is used. For example, if you
have a Vector object and a Point object, <code class="highlighter-rouge">aVector + aPoint</code> uses the
Vector version of +.</p>
</div>

<h3 id="arithmetic-operators">
<a id="arithmetic-operators" class="anchor" href="#arithmetic-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arithmetic operators</h3>

<p>Dart supports the usual arithmetic operators, as shown in the following table.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">+</code></td>
      <td>Add</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">–</code></td>
      <td>Subtract</td>
    </tr>
    <tr>
      <td><code>-<em>expr</em></code></td>
      <td>Unary minus, also known as negation (reverse the sign of the expression)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">*</code></td>
      <td>Multiply</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/</code></td>
      <td>Divide</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">~/</code></td>
      <td>Divide, returning an integer result</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">%</code></td>
      <td>Get the remainder of an integer division (modulo)</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (arithmetic)"?>
<pre class="prettyprint lang-dart">
assert(2 + 3 == 5);
assert(2 - 3 == -1);
assert(2 * 3 == 6);
assert(5 / 2 == 2.5); // Result is a double
assert(5 ~/ 2 == 2); // Result is an int
assert(5 % 2 == 1); // Remainder

assert('5/2 = ${5 ~/ 2} r ${5 % 2}' == '5/2 = 2 r 1');
</pre>

<p>Dart also supports both prefix and postfix increment and decrement
operators.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>++<em>var</em></code></td>
      <td>
<code><em>var</em> = <em>var</em> + 1</code> (expression value is <code><em>var</em> + 1</code>)</td>
    </tr>
    <tr>
      <td><code><em>var</em>++</code></td>
      <td>
<code><em>var</em> = <em>var</em> + 1</code> (expression value is <code><em>var</em></code>)</td>
    </tr>
    <tr>
      <td><code>--<em>var</em></code></td>
      <td>
<code><em>var</em> = <em>var</em> – 1</code> (expression value is <code><em>var</em> – 1</code>)</td>
    </tr>
    <tr>
      <td><code><em>var</em>--</code></td>
      <td>
<code><em>var</em> = <em>var</em> – 1</code> (expression value is <code><em>var</em></code>)</td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (increment-decrement)"?>
<pre class="prettyprint lang-dart">
var a, b;

a = 0;
b = ++a; // Increment a before b gets its value.
assert(a == b); // 1 == 1

a = 0;
b = a++; // Increment a AFTER b gets its value.
assert(a != b); // 1 != 0

a = 0;
b = --a; // Decrement a before b gets its value.
assert(a == b); // -1 == -1

a = 0;
b = a--; // Decrement a AFTER b gets its value.
assert(a != b); // -1 != 0
</pre>

<h3 id="equality-and-relational-operators">
<a id="equality-and-relational-operators" class="anchor" href="#equality-and-relational-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Equality and relational operators</h3>

<p>The following table lists the meanings of equality and relational operators.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">==</code></td>
      <td>Equal; see discussion below</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">!=</code></td>
      <td>Not equal</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;</code></td>
      <td>Greater than</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;</code></td>
      <td>Less than</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;=</code></td>
      <td>Greater than or equal to</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;=</code></td>
      <td>Less than or equal to</td>
    </tr>
  </tbody>
</table>

<p>To test whether two objects x and y represent the same thing, use the
<code class="highlighter-rouge">==</code> operator. (In the rare case where you need to know whether two
objects are the exact same object, use the <a href="https://api.dartlang.org/dev/dart-core/identical.html">identical()</a>
function instead.) Here’s how the <code class="highlighter-rouge">==</code> operator works:</p>

<ol>
  <li>
    <p>If <em>x</em> or <em>y</em> is null, return true if both are null, and false if only
one is null.</p>
  </li>
  <li>
    <p>Return the result of the method invocation
<code><em>x</em>.==(<em>y</em>)</code>. (That’s right,
operators such as <code class="highlighter-rouge">==</code> are methods that are invoked on their first
operand. You can even override many operators, including <code class="highlighter-rouge">==</code>, as
you’ll see in
<a href="#overridable-operators">Overridable operators</a>.)</p>
  </li>
</ol>

<p>Here’s an example of using each of the equality and relational
operators:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (relational)"?>
<pre class="prettyprint lang-dart">
assert(2 == 2);
assert(2 != 3);
assert(3 &gt; 2);
assert(2 &lt; 3);
assert(3 &gt;= 3);
assert(2 &lt;= 3);
</pre>

<h3 id="type-test-operators">
<a id="type-test-operators" class="anchor" href="#type-test-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Type test operators</h3>

<p>The <code class="highlighter-rouge">as</code>, <code class="highlighter-rouge">is</code>, and <code class="highlighter-rouge">is!</code> operators are handy for checking types at
runtime.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">as</code></td>
      <td>Typecast</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">is</code></td>
      <td>True if the object has the specified type</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">is!</code></td>
      <td>False if the object has the specified type</td>
    </tr>
  </tbody>
</table>

<p>The result of <code class="highlighter-rouge">obj is T</code> is true if <code class="highlighter-rouge">obj</code> implements the interface
specified by <code class="highlighter-rouge">T</code>. For example, <code class="highlighter-rouge">obj is Object</code> is always true.</p>

<p>Use the <code class="highlighter-rouge">as</code> operator to cast an object to a particular type. In
general, you should use it as a shorthand for an <code class="highlighter-rouge">is</code> test on an object
following by an expression using that object. For example, consider the
following code:</p>

<?code-excerpt "misc/lib/language_tour/classes/employee.dart (emp is Person)"?>
<pre class="prettyprint lang-dart">
if (emp is Person) {
  // Type check
  emp.firstName = 'Bob';
}
</pre>

<p>You can make the code shorter using the <code class="highlighter-rouge">as</code> operator:</p>

<?code-excerpt "misc/lib/language_tour/classes/employee.dart (emp as Person)"?>
<pre class="prettyprint lang-dart">
(emp as Person).firstName = 'Bob';
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
The code isn’t equivalent. If <code class="highlighter-rouge">emp</code> is null or not a Person, the
first example (with <code class="highlighter-rouge">is</code>) does nothing; the second (with <code class="highlighter-rouge">as</code>) throws
an exception.</p>
</div>

<h3 id="assignment-operators">
<a id="assignment-operators" class="anchor" href="#assignment-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assignment operators</h3>

<p>As you’ve already seen, you can assign values using the <code class="highlighter-rouge">=</code> operator.
To assign only if the assigned-to variable is null,
use the <code class="highlighter-rouge">??=</code> operator.</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (assignment)"?>
<pre class="prettyprint lang-dart">
// Assign value to a
a = value;
// Assign value to b if b is null; otherwise, b stays the same
b ??= value;
</pre>

<p>Compound assignment operators such as <code class="highlighter-rouge">+=</code> combine
an operation with an assignment.</p>

<table class="table">
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">=</code></td>
      <td><code class="highlighter-rouge">–=</code></td>
      <td><code class="highlighter-rouge">/=</code></td>
      <td><code class="highlighter-rouge">%=</code></td>
      <td><code class="highlighter-rouge">&gt;&gt;=</code></td>
      <td><code class="highlighter-rouge">^=</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">+=</code></td>
      <td><code class="highlighter-rouge">*=</code></td>
      <td><code class="highlighter-rouge">~/=</code></td>
      <td><code class="highlighter-rouge">&lt;&lt;=</code></td>
      <td><code class="highlighter-rouge">&amp;=</code></td>
      <td><code class="highlighter-rouge">|=</code></td>
    </tr>
  </tbody>
</table>

<p>Here’s how compound assignment operators work:</p>

<table class="table">
  <thead>
    <tr>
      <th> </th>
      <th>Compound assignment</th>
      <th>Equivalent expression</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>For an operator <em>op</em>:</strong></td>
      <td><code>a <em>op</em>= b</code></td>
      <td><code>a = a <em>op</em> b</code></td>
    </tr>
    <tr>
      <td><strong>Example:</strong></td>
      <td><code class="highlighter-rouge">a += b</code></td>
      <td><code class="highlighter-rouge">a = a + b</code></td>
    </tr>
  </tbody>
</table>

<p>The following example uses assignment and compound assignment
operators:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (op-assign)"?>
<pre class="prettyprint lang-dart">
var a = 2; // Assign using =
a *= 3; // Assign and multiply: a = a * 3
assert(a == 6);
</pre>

<h3 id="logical-operators">
<a id="logical-operators" class="anchor" href="#logical-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logical operators</h3>

<p>You can invert or combine boolean expressions using the logical
operators.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>!<em>expr</em></code></td>
      <td>inverts the following expression (changes false to true, and vice versa)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">||</code></td>
      <td>logical OR</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&amp;&amp;</code></td>
      <td>logical AND</td>
    </tr>
  </tbody>
</table>

<p>Here’s an example of using the logical operators:</p>

<?code-excerpt "misc/lib/language_tour/operators.dart (op-logical)"?>
<pre class="prettyprint lang-dart">
if (!done &amp;&amp; (col == 0 || col == 3)) {
  // ...Do something...
}
</pre>

<h3 id="bitwise-and-shift-operators">
<a id="bitwise-and-shift-operators" class="anchor" href="#bitwise-and-shift-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bitwise and shift operators</h3>

<p>You can manipulate the individual bits of numbers in Dart. Usually,
you’d use these bitwise and shift operators with integers.</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">&amp;</code></td>
      <td>AND</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">|</code></td>
      <td>OR</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^</code></td>
      <td>XOR</td>
    </tr>
    <tr>
      <td><code>~<em>expr</em></code></td>
      <td>Unary bitwise complement (0s become 1s; 1s become 0s)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;&lt;</code></td>
      <td>Shift left</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;&gt;</code></td>
      <td>Shift right</td>
    </tr>
  </tbody>
</table>

<p>Here’s an example of using bitwise and shift operators:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (op-bitwise)"?>
<pre class="prettyprint lang-dart">
final value = 0x22;
final bitmask = 0x0f;

assert((value &amp; bitmask) == 0x02); // AND
assert((value &amp; ~bitmask) == 0x20); // AND NOT
assert((value | bitmask) == 0x2f); // OR
assert((value ^ bitmask) == 0x2d); // XOR
assert((value &lt;&lt; 4) == 0x220); // Shift left
assert((value &gt;&gt; 4) == 0x02); // Shift right
</pre>

<h3 id="conditional-expressions">
<a id="conditional-expressions" class="anchor" href="#conditional-expressions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conditional expressions</h3>

<p>Dart has two operators that let you concisely evaluate expressions
that might otherwise require <a href="#if-and-else">if-else</a> statements:</p>

<dl>
  <dt><code><em>condition</em> ? <em>expr1</em> : <em>expr2</em></code></dt>
  <dd>If <em>condition</em> is true, evaluates <em>expr1</em> (and returns its value);
otherwise, evaluates and returns the value of <em>expr2</em>.</dd>
  <dt><code><em>expr1</em> ?? <em>expr2</em></code></dt>
  <dd>If <em>expr1</em> is non-null, returns its value;
otherwise, evaluates and returns the value of <em>expr2</em>.</dd>
</dl>

<p>When you need to assign a value
based on a boolean expression,
consider using <code class="highlighter-rouge">?:</code>.</p>

<?code-excerpt "misc/lib/language_tour/operators.dart (if-then-else-operator)"?>
<pre class="prettyprint lang-dart">
var visibility = isPublic ? 'public' : 'private';
</pre>

<p>If the boolean expression tests for null,
consider using <code class="highlighter-rouge">??</code>.</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (if-null)"?>
<pre class="prettyprint lang-dart">
String playerName(String name) =&gt; name ?? 'Guest';
</pre>

<p>The previous example could have been written at least two other ways,
but not as succinctly:</p>

<?code-excerpt "misc/test/language_tour/operators_test.dart (if-null-alt)"?>
<pre class="prettyprint lang-dart">
// Slightly longer version uses ?: operator.
String playerName(String name) =&gt; name != null ? name : 'Guest';

// Very long version uses if-else statement.
String playerName(String name) {
  if (name != null) {
    return name;
  } else {
    return 'Guest';
  }
}
</pre>

<p><a id="cascade"></a></p>
<h3 id="cascade-notation-">
<a id="cascade-notation-" class="anchor" href="#cascade-notation-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cascade notation (..)</h3>

<p>Cascades (<code class="highlighter-rouge">..</code>) allow you to make a sequence of operations
on the same object. In addition to function calls,
you can also access fields on that same object.
This often saves you the step of creating a temporary variable and
allows you to write more fluid code.</p>

<p>Consider the following code:</p>

<?code-excerpt "misc/test/language_tour/browser_test.dart (cascade-operator)"?>
<pre class="prettyprint lang-dart">
querySelector('#confirm') // Get an object.
  ..text = 'Confirm' // Use its members.
  ..classes.add('important')
  ..onClick.listen((e) =&gt; window.alert('Confirmed!'));
</pre>

<p>The first method call, <code class="highlighter-rouge">querySelector()</code>, returns a selector object.
The code that follows the cascade notation operates
on this selector object, ignoring any subsequent values that
might be returned.</p>

<p>The previous example is equivalent to:</p>

<?code-excerpt "misc/test/language_tour/browser_test.dart (cascade-operator-example-expanded)"?>
<pre class="prettyprint lang-dart">
var button = querySelector('#confirm');
button.text = 'Confirm';
button.classes.add('important');
button.onClick.listen((e) =&gt; window.alert('Confirmed!'));
</pre>

<p>You can also nest your cascades. For example:</p>

<?code-excerpt "misc/lib/language_tour/operators.dart (nested-cascades)"?>
<pre class="prettyprint lang-dart">
final addressBook = (AddressBookBuilder()
      ..name = 'jenny'
      ..email = 'jenny@example.com'
      ..phone = (PhoneNumberBuilder()
            ..number = '415-555-0100'
            ..label = 'home')
          .build())
    .build();
</pre>

<p>Be careful to construct your cascade on a function that returns
an actual object. For example, the following code fails:</p>

<?code-excerpt "misc/lib/language_tour/operators.dart (cannot-cascade-on-void)" plaster="none"?>
<pre class="prettyprint lang-dart">
var sb = StringBuffer();
sb.write('foo')
  ..write('bar'); // Error: method 'write' isn't defined for 'void'.
</pre>

<p>The <code class="highlighter-rouge">sb.write()</code> call returns void,
and you can’t construct a cascade on <code class="highlighter-rouge">void</code>.</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Strictly speaking,
the “double dot” notation for cascades is not an operator.
It’s just part of the Dart syntax.</p>
</div>

<h3 id="other-operators">
<a id="other-operators" class="anchor" href="#other-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other operators</h3>

<p>You’ve seen most of the remaining operators in other examples:</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Operator</th>
      <th>Name</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">()</code></td>
      <td>Function application</td>
      <td>Represents a function call</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">[]</code></td>
      <td>List access</td>
      <td>Refers to the value at the specified index in the list</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">.</code></td>
      <td>Member access</td>
      <td>Refers to a property of an expression; example: <code class="highlighter-rouge">foo.bar</code> selects property <code class="highlighter-rouge">bar</code> from expression <code class="highlighter-rouge">foo</code>
</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">?.</code></td>
      <td>Conditional member access</td>
      <td>Like <code class="highlighter-rouge">.</code>, but the leftmost operand can be null; example: <code class="highlighter-rouge">foo?.bar</code> selects property <code class="highlighter-rouge">bar</code> from expression <code class="highlighter-rouge">foo</code> unless <code class="highlighter-rouge">foo</code> is null (in which case the value of <code class="highlighter-rouge">foo?.bar</code> is null)</td>
    </tr>
  </tbody>
</table>

<p>For more information about the <code class="highlighter-rouge">.</code>, <code class="highlighter-rouge">?.</code>, and <code class="highlighter-rouge">..</code> operators, see
<a href="#classes">Classes</a>.</p>

<h2 id="control-flow-statements">
<a id="control-flow-statements" class="anchor" href="#control-flow-statements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Control flow statements</h2>

<p>You can control the flow of your Dart code using any of the following:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">if</code> and <code class="highlighter-rouge">else</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">for</code> loops</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">while</code> and <code class="highlighter-rouge">do</code>-<code class="highlighter-rouge">while</code> loops</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">break</code> and <code class="highlighter-rouge">continue</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">switch</code> and <code class="highlighter-rouge">case</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">assert</code></p>
  </li>
</ul>

<p>You can also affect the control flow using <code class="highlighter-rouge">try-catch</code> and <code class="highlighter-rouge">throw</code>, as
explained in <a href="#exceptions">Exceptions</a>.</p>

<h3 id="if-and-else">
<a id="if-and-else" class="anchor" href="#if-and-else" aria-hidden="true"><span class="octicon octicon-link"></span></a>If and else</h3>

<p>Dart supports <code class="highlighter-rouge">if</code> statements with optional <code class="highlighter-rouge">else</code> statements, as the
next sample shows. Also see <a href="#conditional-expressions">conditional expressions</a>.</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (if-else)"?>
<pre class="prettyprint lang-dart">
if (isRaining()) {
  you.bringRainCoat();
} else if (isSnowing()) {
  you.wearJacket();
} else {
  car.putTopDown();
}
</pre>

<p>Unlike JavaScript, conditions must use boolean values, nothing else. See
<a href="#booleans">Booleans</a> for more information.</p>

<h3 id="for-loops">
<a id="for-loops" class="anchor" href="#for-loops" aria-hidden="true"><span class="octicon octicon-link"></span></a>For loops</h3>

<p>You can iterate with the standard <code class="highlighter-rouge">for</code> loop. For example:</p>

<?code-excerpt "misc/test/language_tour/control_flow_test.dart (for)"?>
<pre class="prettyprint lang-dart">
var message = StringBuffer('Dart is fun');
for (var i = 0; i &lt; 5; i++) {
  message.write('!');
}
</pre>

<p>Closures inside of Dart’s <code class="highlighter-rouge">for</code> loops capture the <em>value</em> of the index,
avoiding a common pitfall found in JavaScript. For example, consider:</p>

<?code-excerpt "misc/test/language_tour/control_flow_test.dart (for-and-closures)"?>
<pre class="prettyprint lang-dart">
var callbacks = [];
for (var i = 0; i &lt; 2; i++) {
  callbacks.add(() =&gt; print(i));
}
callbacks.forEach((c) =&gt; c());
</pre>

<p>The output is <code class="highlighter-rouge">0</code> and then <code class="highlighter-rouge">1</code>, as expected. In contrast, the example
would print <code class="highlighter-rouge">2</code> and then <code class="highlighter-rouge">2</code> in JavaScript.</p>

<p>If the object that you are iterating over is an Iterable, you can use the
<a href="https://api.dartlang.org/dev/dart-core/Iterable/forEach.html">forEach()</a> method. Using <code class="highlighter-rouge">forEach()</code> is a good option if you don’t need to
know the current iteration counter:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (forEach)"?>
<pre class="prettyprint lang-dart">
candidates.forEach((candidate) =&gt; candidate.interview());
</pre>

<p>Iterable classes such as List and Set also support the <code class="highlighter-rouge">for-in</code> form of
<a href="/guides/libraries/library-tour#iteration">iteration</a>:</p>

<?code-excerpt "misc/test/language_tour/control_flow_test.dart (collection)"?>
<pre class="prettyprint lang-dart">
var collection = [0, 1, 2];
for (var x in collection) {
  print(x); // 0 1 2
}
</pre>

<h3 id="while-and-do-while">
<a id="while-and-do-while" class="anchor" href="#while-and-do-while" aria-hidden="true"><span class="octicon octicon-link"></span></a>While and do-while</h3>

<p>A <code class="highlighter-rouge">while</code> loop evaluates the condition before the loop:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (while)"?>
<pre class="prettyprint lang-dart">
while (!isDone()) {
  doSomething();
}
</pre>

<p>A <code class="highlighter-rouge">do</code>-<code class="highlighter-rouge">while</code> loop evaluates the condition <em>after</em> the loop:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (do-while)"?>
<pre class="prettyprint lang-dart">
do {
  printLine();
} while (!atEndOfPage());
</pre>

<h3 id="break-and-continue">
<a id="break-and-continue" class="anchor" href="#break-and-continue" aria-hidden="true"><span class="octicon octicon-link"></span></a>Break and continue</h3>

<p>Use <code class="highlighter-rouge">break</code> to stop looping:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (while-break)"?>
<pre class="prettyprint lang-dart">
while (true) {
  if (shutDownRequested()) break;
  processIncomingRequests();
}
</pre>

<p>Use <code class="highlighter-rouge">continue</code> to skip to the next loop iteration:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (for-continue)"?>
<pre class="prettyprint lang-dart">
for (int i = 0; i &lt; candidates.length; i++) {
  var candidate = candidates[i];
  if (candidate.yearsExperience &lt; 5) {
    continue;
  }
  candidate.interview();
}
</pre>

<p>You might write that example differently if you’re using an
<a href="https://api.dartlang.org/dev/dart-core/Iterable-class.html">Iterable</a> such as a list or set:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (where)"?>
<pre class="prettyprint lang-dart">
candidates
    .where((c) =&gt; c.yearsExperience &gt;= 5)
    .forEach((c) =&gt; c.interview());
</pre>

<h3 id="switch-and-case">
<a id="switch-and-case" class="anchor" href="#switch-and-case" aria-hidden="true"><span class="octicon octicon-link"></span></a>Switch and case</h3>

<p>Switch statements in Dart compare integer, string, or compile-time
constants using <code class="highlighter-rouge">==</code>. The compared objects must all be instances of the
same class (and not of any of its subtypes), and the class must not
override <code class="highlighter-rouge">==</code>.
<a href="#enumerated-types">Enumerated types</a> work well in <code class="highlighter-rouge">switch</code> statements.</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Switch statements in Dart are intended for limited circumstances,
such as in interpreters or scanners.</p>
</div>

<p>Each non-empty <code class="highlighter-rouge">case</code> clause ends with a <code class="highlighter-rouge">break</code> statement, as a rule.
Other valid ways to end a non-empty <code class="highlighter-rouge">case</code> clause are a <code class="highlighter-rouge">continue</code>,
<code class="highlighter-rouge">throw</code>, or <code class="highlighter-rouge">return</code> statement.</p>

<p>Use a <code class="highlighter-rouge">default</code> clause to execute code when no <code class="highlighter-rouge">case</code> clause matches:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (switch)"?>
<pre class="prettyprint lang-dart">
var command = 'OPEN';
switch (command) {
  case 'CLOSED':
    executeClosed();
    break;
  case 'PENDING':
    executePending();
    break;
  case 'APPROVED':
    executeApproved();
    break;
  case 'DENIED':
    executeDenied();
    break;
  case 'OPEN':
    executeOpen();
    break;
  default:
    executeUnknown();
}
</pre>

<p>The following example omits the <code class="highlighter-rouge">break</code> statement in a <code class="highlighter-rouge">case</code> clause,
thus generating an error:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (switch-break-omitted)" plaster="none"?>
<pre class="prettyprint lang-dart">
var command = 'OPEN';
switch (command) {
  case 'OPEN':
    executeOpen();
    // ERROR: Missing break

  case 'CLOSED':
    executeClosed();
    break;
}
</pre>

<p>However, Dart does support empty <code class="highlighter-rouge">case</code> clauses, allowing a form of
fall-through:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (switch-empty-case)"?>
<pre class="prettyprint lang-dart">
var command = 'CLOSED';
switch (command) {
  case 'CLOSED': // Empty case falls through.
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeNowClosed();
    break;
}
</pre>

<p>If you really want fall-through, you can use a <code class="highlighter-rouge">continue</code> statement and
a label:</p>

<?code-excerpt "misc/lib/language_tour/control_flow.dart (switch-continue)"?>
<pre class="prettyprint lang-dart">
var command = 'CLOSED';
switch (command) {
  case 'CLOSED':
    executeClosed();
    continue nowClosed;
  // Continues executing at the nowClosed label.

  nowClosed:
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeNowClosed();
    break;
}
</pre>

<p>A <code class="highlighter-rouge">case</code> clause can have local variables, which are visible only inside
the scope of that clause.</p>

<h3 id="assert">
<a id="assert" class="anchor" href="#assert" aria-hidden="true"><span class="octicon octicon-link"></span></a>Assert</h3>

<p>Use an <code class="highlighter-rouge">assert</code> statement to disrupt normal execution if a boolean
condition is false. You can find examples of assert statements
throughout this tour. Here are some more:</p>

<?code-excerpt "misc/test/language_tour/control_flow_test.dart (assert)"?>
<pre class="prettyprint lang-dart">
// Make sure the variable has a non-null value.
assert(text != null);

// Make sure the value is less than 100.
assert(number &lt; 100);

// Make sure this is an https URL.
assert(urlString.startsWith('https'));
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Assert statements have no effect in production code;
they’re for development only.
Flutter enables asserts in <a href="https://flutter.io/debugging/#debug-mode-assertions">debug mode.</a>
Development-only tools such as <a href="https://webdev.dartlang.org/tools/dartdevc">dartdevc</a>
typically support asserts by default.
Some tools, such as <a href="/dart-vm/tools/dart-vm">dart</a> and <a href="https://webdev.dartlang.org/tools/dart2js">dart2js,</a>
support asserts through a command-line flag: <code class="highlighter-rouge">--enable-asserts</code>.</p>
</div>

<p>To attach a message to an assert,
add a string as the second argument.</p>

<?code-excerpt "misc/test/language_tour/control_flow_test.dart (assert-with-message)"?>
<pre class="prettyprint lang-dart">
assert(urlString.startsWith('https'),
    'URL ($urlString) should start with "https".');
</pre>

<p>The first argument to <code class="highlighter-rouge">assert</code> can be any expression that
resolves to a boolean value. If the expression’s value
is true, the assertion succeeds and execution
continues. If it’s false, the assertion fails and an exception (an
<a href="https://api.dartlang.org/dev/dart-core/AssertionError-class.html">AssertionError</a>) is thrown.</p>

<h2 id="exceptions">
<a id="exceptions" class="anchor" href="#exceptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Exceptions</h2>

<p>Your Dart code can throw and catch exceptions. Exceptions are errors
indicating that something unexpected happened. If the exception isn’t
caught, the isolate that raised the exception is suspended, and
typically the isolate and its program are terminated.</p>

<p>In contrast to Java, all of Dart’s exceptions are unchecked exceptions.
Methods do not declare which exceptions they might throw, and you are
not required to catch any exceptions.</p>

<p>Dart provides <a href="https://api.dartlang.org/dev/dart-core/Exception-class.html">Exception</a> and <a href="https://api.dartlang.org/dev/dart-core/Error-class.html">Error</a>
types, as well as numerous predefined subtypes. You can, of course,
define your own exceptions. However, Dart programs can throw any
non-null object—not just Exception and Error objects—as an exception.</p>

<h3 id="throw">
<a id="throw" class="anchor" href="#throw" aria-hidden="true"><span class="octicon octicon-link"></span></a>Throw</h3>

<p>Here’s an example of throwing, or <em>raising</em>, an exception:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (throw-FormatException)"?>
<pre class="prettyprint lang-dart">
throw FormatException('Expected at least 1 section');
</pre>

<p>You can also throw arbitrary objects:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (out-of-llamas)"?>
<pre class="prettyprint lang-dart">
throw 'Out of llamas!';
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong> Production-quality code usually throws types that implement
  <a href="https://api.dartlang.org/dev/dart-core/Error-class.html">Error</a> or <a href="https://api.dartlang.org/dev/dart-core/Exception-class.html">Exception</a>.</p>
</div>

<p>Because throwing an exception is an expression, you can throw exceptions
in =&gt; statements, as well as anywhere else that allows expressions:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (throw-is-an-expression)"?>
<pre class="prettyprint lang-dart">
void distanceTo(Point other) =&gt; throw UnimplementedError();
</pre>

<h3 id="catch">
<a id="catch" class="anchor" href="#catch" aria-hidden="true"><span class="octicon octicon-link"></span></a>Catch</h3>

<p>Catching, or capturing, an exception stops the exception from
propagating (unless you rethrow the exception).
Catching an exception gives you a chance to handle it:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (try)"?>
<pre class="prettyprint lang-dart">
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  buyMoreLlamas();
}
</pre>

<p>To handle code that can throw more than one type of exception, you can
specify multiple catch clauses. The first catch clause that matches the
thrown object’s type handles the exception. If the catch clause does not
specify a type, that clause can handle any type of thrown object:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (try-catch)"?>
<pre class="prettyprint lang-dart">
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // A specific exception
  buyMoreLlamas();
} on Exception catch (e) {
  // Anything else that is an exception
  print('Unknown exception: $e');
} catch (e) {
  // No specified type, handles all
  print('Something really unknown: $e');
}
</pre>

<p>As the preceding code shows, you can use either <code class="highlighter-rouge">on</code> or <code class="highlighter-rouge">catch</code> or both.
Use <code class="highlighter-rouge">on</code> when you need to specify the exception type. Use <code class="highlighter-rouge">catch</code> when
your exception handler needs the exception object.</p>

<p>You can specify one or two parameters to <code class="highlighter-rouge">catch()</code>.
The first is the exception that was thrown,
and the second is the stack trace (a <a href="https://api.dartlang.org/dev/dart-core/StackTrace-class.html">StackTrace</a> object).</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (try-catch-2)" replace="/\(e.*?\)/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
try {
  // ···
} on Exception catch <span class="highlight">(e)</span> {
  print('Exception details:\n $e');
} catch <span class="highlight">(e, s)</span> {
  print('Exception details:\n $e');
  print('Stack trace:\n $s');
}
</pre>

<p>To partially handle an exception,
while allowing it to propagate,
use the <code class="highlighter-rouge">rethrow</code> keyword.</p>

<?code-excerpt "misc/test/language_tour/exceptions_test.dart (rethrow)" replace="/rethrow;/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
void misbehave() {
  try {
    dynamic foo = true;
    print(foo++); // Runtime error
  } catch (e) {
    print('misbehave() partially handled ${e.runtimeType}.');
    <span class="highlight">rethrow;</span> // Allow callers to see the exception.
  }
}

void main() {
  try {
    misbehave();
  } catch (e) {
    print('main() finished handling ${e.runtimeType}.');
  }
}
</pre>

<h3 id="finally">
<a id="finally" class="anchor" href="#finally" aria-hidden="true"><span class="octicon octicon-link"></span></a>Finally</h3>

<p>To ensure that some code runs whether or not an exception is thrown, use
a <code class="highlighter-rouge">finally</code> clause. If no <code class="highlighter-rouge">catch</code> clause matches the exception, the
exception is propagated after the <code class="highlighter-rouge">finally</code> clause runs:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (finally)"?>
<pre class="prettyprint lang-dart">
try {
  breedMoreLlamas();
} finally {
  // Always clean up, even if an exception is thrown.
  cleanLlamaStalls();
}
</pre>

<p>The <code class="highlighter-rouge">finally</code> clause runs after any matching <code class="highlighter-rouge">catch</code> clauses:</p>

<?code-excerpt "misc/lib/language_tour/exceptions.dart (try-catch-finally)"?>
<pre class="prettyprint lang-dart">
try {
  breedMoreLlamas();
} catch (e) {
  print('Error: $e'); // Handle the exception first.
} finally {
  cleanLlamaStalls(); // Then clean up.
}
</pre>

<p>Learn more by reading the
<a href="/guides/libraries/library-tour#exceptions">Exceptions</a> section.</p>

<h2 id="classes">
<a id="classes" class="anchor" href="#classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Classes</h2>

<p>Dart is an object-oriented language with classes and mixin-based
inheritance. Every object is an instance of a class, and all classes
descend from <a href="https://api.dartlang.org/dev/dart-core/Object-class.html">Object.</a>
<em>Mixin-based inheritance</em> means that although every class (except for
Object) has exactly one superclass, a class body can be reused in
multiple class hierarchies.</p>

<h3 id="using-class-members">
<a id="using-class-members" class="anchor" href="#using-class-members" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using class members</h3>

<p>Objects have <em>members</em> consisting of functions and data (<em>methods</em> and
<em>instance variables</em>, respectively). When you call a method, you <em>invoke</em>
it on an object: the method has access to that object’s functions and
data.</p>

<p>Use a dot (<code class="highlighter-rouge">.</code>) to refer to an instance variable or method:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (object-members)"?>
<pre class="prettyprint lang-dart">
var p = Point(2, 2);

// Set the value of the instance variable y.
p.y = 3;

// Get the value of y.
assert(p.y == 3);

// Invoke distanceTo() on p.
num distance = p.distanceTo(Point(4, 4));
</pre>

<p>Use <code class="highlighter-rouge">?.</code> instead of <code class="highlighter-rouge">.</code> to avoid an exception
when the leftmost operand is null:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (safe-member-access)"?>
<pre class="prettyprint lang-dart">
// If p is non-null, set its y value to 4.
p?.y = 4;
</pre>

<h3 id="using-constructors">
<a id="using-constructors" class="anchor" href="#using-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using constructors</h3>

<p>You can create an object using a <em>constructor</em>.
Constructor names can be either <code><em>ClassName</em></code> or
<code><em>ClassName</em>.<em>identifier</em></code>. For example,
the following code creates <code class="highlighter-rouge">Point</code> objects using the
<code class="highlighter-rouge">Point()</code> and <code class="highlighter-rouge">Point.fromJson()</code> constructors:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (object-creation)" replace="/ as .*?;/;/g"?>
<pre class="prettyprint lang-dart">
var p1 = Point(2, 2);
var p2 = Point.fromJson({'x': 1, 'y': 2});
</pre>

<p>The following code has the same effect, but
uses the optional <code class="highlighter-rouge">new</code> keyword before the constructor name:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (object-creation-new)" replace="/ as .*?;/;/g"?>
<pre class="prettyprint lang-dart">
var p1 = new Point(2, 2);
var p2 = new Point.fromJson({'x': 1, 'y': 2});
</pre>

<aside class="alert alert-info">
  <p><strong>Version 提示：</strong> The <code class="highlighter-rouge">new</code> keyword became optional in Dart 2.</p>
</aside>

<p>Some classes provide constant constructors. To create a compile-time
constant using a constant constructor, put the <code class="highlighter-rouge">const</code> keyword
before the constructor name:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (const)"?>
<pre class="prettyprint lang-dart">
var p = const ImmutablePoint(2, 2);
</pre>

<p>Constructing two identical compile-time constants results in a single,
canonical instance:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (identical)"?>
<pre class="prettyprint lang-dart">
var a = const ImmutablePoint(1, 1);
var b = const ImmutablePoint(1, 1);

assert(identical(a, b)); // They are the same instance!
</pre>

<p>Within a <em>constant context</em>, you can omit the <code class="highlighter-rouge">const</code> before a constructor
or literal. For example, look at this code, which creates a const map:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (const-context-withconst)" replace="/pointAndLine1/pointAndLine/g"?>
<pre class="prettyprint lang-dart">
// Lots of const keywords here.
const pointAndLine = const {
  'point': const [const ImmutablePoint(0, 0)],
  'line': const [const ImmutablePoint(1, 10), const ImmutablePoint(-2, 11)],
};
</pre>

<p>You can omit all but the first use of the <code class="highlighter-rouge">const</code> keyword:</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (const-context-noconst)" replace="/pointAndLine2/pointAndLine/g"?>
<pre class="prettyprint lang-dart">
// Only one const, which establishes the constant context.
const pointAndLine = {
  'point': [ImmutablePoint(0, 0)],
  'line': [ImmutablePoint(1, 10), ImmutablePoint(-2, 11)],
};
</pre>

<aside class="alert alert-info">
  <p><strong>Version 提示：</strong> The <code class="highlighter-rouge">const</code> keyword became optional
within a constant context in Dart 2.</p>
</aside>

<h3 id="getting-an-objects-type">
<a id="getting-an-objects-type" class="anchor" href="#getting-an-objects-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting an object’s type</h3>

<p>To get an object’s type at runtime,
you can use Object’s <code class="highlighter-rouge">runtimeType</code> property,
which returns a <a href="https://api.dartlang.org/dev/dart-core/Type-class.html">Type</a> object.</p>

<?code-excerpt "misc/test/language_tour/classes_test.dart (runtimeType)"?>
<pre class="prettyprint lang-dart">
print('The type of a is ${a.runtimeType}');
</pre>

<p>Up to here, you’ve seen how to <em>use</em> classes.
The rest of this section shows how to <em>implement</em> classes.</p>

<h3 id="instance-variables">
<a id="instance-variables" class="anchor" href="#instance-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instance variables</h3>

<p>Here’s how you declare instance variables:</p>

<?code-excerpt "misc/lib/language_tour/classes/point_with_main.dart (class)"?>
<pre class="prettyprint lang-dart">
class Point {
  num x; // Declare instance variable x, initially null.
  num y; // Declare y, initially null.
  num z = 0; // Declare z, initially 0.
}
</pre>

<p>All uninitialized instance variables have the value <code class="highlighter-rouge">null</code>.</p>

<p>All instance variables generate an implicit <em>getter</em> method. Non-final
instance variables also generate an implicit <em>setter</em> method. For details,
see <a href="#getters-and-setters">Getters and setters</a>.</p>

<?code-excerpt "misc/lib/language_tour/classes/point_with_main.dart (class+main)" replace="/(num .*?;).*/$1/g" plaster="none"?>
<pre class="prettyprint lang-dart">
class Point {
  num x;
  num y;
}

void main() {
  var point = Point();
  point.x = 4; // Use the setter method for x.
  assert(point.x == 4); // Use the getter method for x.
  assert(point.y == null); // Values default to null.
}
</pre>

<p>If you initialize an instance variable where it is declared (instead of
in a constructor or method), the value is set when the instance is
created, which is before the constructor and its initializer list
execute.</p>

<h3 id="constructors">
<a id="constructors" class="anchor" href="#constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Constructors</h3>

<p>Declare a constructor by creating a function with the same name as its
class (plus, optionally, an additional identifier as described in
<a href="#named-constructors">Named constructors</a>).
The most common form of constructor, the generative constructor, creates
a new instance of a class:</p>

<?code-excerpt "misc/lib/language_tour/classes/point_alt.dart (constructor-long-way)" plaster="none"?>
<pre class="prettyprint lang-dart">
class Point {
  num x, y;

  Point(num x, num y) {
    // There's a better way to do this, stay tuned.
    this.x = x;
    this.y = y;
  }
}
</pre>

<p>The <code class="highlighter-rouge">this</code> keyword refers to the current instance.</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Use <code class="highlighter-rouge">this</code> only when there is a name conflict. Otherwise, Dart style
omits the <code class="highlighter-rouge">this</code>.</p>
</div>

<p>The pattern of assigning a constructor argument to an instance variable
is so common, Dart has syntactic sugar to make it easy:</p>

<?code-excerpt "misc/lib/language_tour/classes/point.dart (constructor-initializer)" plaster="none"?>
<pre class="prettyprint lang-dart">
class Point {
  num x, y;

  // Syntactic sugar for setting x and y
  // before the constructor body runs.
  Point(this.x, this.y);
}
</pre>

<h4 id="default-constructors">
<a id="default-constructors" class="anchor" href="#default-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Default constructors</h4>

<p>If you don’t declare a constructor, a default constructor is provided
for you. The default constructor has no arguments and invokes the
no-argument constructor in the superclass.</p>

<h4 id="constructors-arent-inherited">
<a id="constructors-arent-inherited" class="anchor" href="#constructors-arent-inherited" aria-hidden="true"><span class="octicon octicon-link"></span></a>Constructors aren’t inherited</h4>

<p>Subclasses don’t inherit constructors from their superclass. A subclass
that declares no constructors has only the default (no argument, no
name) constructor.</p>

<h4 id="named-constructors">
<a id="named-constructors" class="anchor" href="#named-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Named constructors</h4>

<p>Use a named constructor to implement multiple constructors for a class
or to provide extra clarity:</p>

<?code-excerpt "misc/lib/language_tour/classes/point.dart (named-constructor)" replace="/Point\.\S*/[!$&!]/g" plaster="none"?>
<pre class="prettyprint lang-dart">
class Point {
  num x, y;

  Point(this.x, this.y);

  // Named constructor
  <span class="highlight">Point.origin()</span> {
    x = 0;
    y = 0;
  }
}
</pre>

<p>Remember that constructors are not inherited, which means that a
superclass’s named constructor is not inherited by a subclass. If you
want a subclass to be created with a named constructor defined in the
superclass, you must implement that constructor in the subclass.</p>

<h4 id="invoking-a-non-default-superclass-constructor">
<a id="invoking-a-non-default-superclass-constructor" class="anchor" href="#invoking-a-non-default-superclass-constructor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Invoking a non-default superclass constructor</h4>

<p>By default, a constructor in a subclass calls the superclass’s unnamed,
no-argument constructor.
The superclass’s constructor is called at the beginning of the
constructor body. If an <a href="#initializer-list">initializer list</a>
is also being used, it executes before the superclass is called.
In summary, the order of execution is as follows:</p>

<ol>
  <li>initializer list</li>
  <li>superclass’s no-arg constructor</li>
  <li>main class’s no-arg constructor</li>
</ol>

<p>If the superclass doesn’t have an unnamed, no-argument constructor,
then you must manually call one of the constructors in the
superclass. Specify the superclass constructor after a colon (<code class="highlighter-rouge">:</code>), just
before the constructor body (if any).</p>

<p>In the following example, the constructor for the Employee class
calls the named constructor for its superclass, Person.
Click the run button ( <img src="/assets/red-run.png" width="20" height="19" alt="red-run.png"> ) to execute the code.</p>

<iframe src="https://dartpad.dartlang.org/embed-dart.html?id=e57aa06401e6618d4eb8&amp;horizontalRatio=99&amp;verticalRatio=80" width="100%" height="500px" style="border: 1px solid #ccc;">
</iframe>

<p>Because the arguments to the superclass constructor are evaluated before
invoking the constructor, an argument can be an expression such as a
function call:</p>

<?code-excerpt "misc/lib/language_tour/classes/employee.dart (method-then-constructor)"?>
<pre class="prettyprint lang-dart">
class Employee extends Person {
  Employee() : super.fromJson(getDefaultData());
  // ···
}
</pre>

<div class="alert alert-warning">
  <p><strong>Warning:</strong>
Arguments to the superclass constructor do not have access to <code class="highlighter-rouge">this</code>.
For example, arguments can call static methods but not instance methods.</p>
</div>

<h4 id="initializer-list">
<a id="initializer-list" class="anchor" href="#initializer-list" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initializer list</h4>

<p>Besides invoking a superclass constructor, you can also initialize
instance variables before the constructor body runs. Separate
initializers with commas.</p>

<?code-excerpt "misc/lib/language_tour/classes/point_alt.dart (initializer-list)"?>
<pre class="prettyprint lang-dart">
// Initializer list sets instance variables before
// the constructor body runs.
Point.fromJson(Map&lt;String, num&gt; json)
    : x = json['x'],
      y = json['y'] {
  print('In Point.fromJson(): ($x, $y)');
}
</pre>

<div class="alert alert-warning">
  <p><strong>Warning:</strong>
The right-hand side of an initializer does not have access to <code class="highlighter-rouge">this</code>.</p>
</div>

<p>During development, you can validate inputs by using <code class="highlighter-rouge">assert</code> in the
initializer list.</p>

<?code-excerpt "misc/lib/language_tour/classes/point_alt.dart (initializer-list-with-assert)" replace="/assert\(.*?\)/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
Point.withAssert(this.x, this.y) : <span class="highlight">assert(x &gt;= 0)</span> {
  print('In Point.withAssert(): ($x, $y)');
}
</pre>

<p>Initializer lists are handy when setting up final fields.
The following example initializes three final fields in an initializer list.
Click the run button ( <img src="/assets/red-run.png" width="20" height="19" alt="red-run.png"> ) to execute the code.</p>

<iframe src="https://dartpad.dartlang.org/embed-dart.html?id=7a9764702c0608711e08&amp;horizontalRatio=99&amp;verticalRatio=85" width="100%" height="420px" style="border: 1px solid #ccc;">
</iframe>

<h4 id="redirecting-constructors">
<a id="redirecting-constructors" class="anchor" href="#redirecting-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Redirecting constructors</h4>

<p>Sometimes a constructor’s only purpose is to redirect to another
constructor in the same class. A redirecting constructor’s body is
empty, with the constructor call appearing after a colon (:).</p>

<?code-excerpt "misc/lib/language_tour/classes/point_redirecting.dart"?>
<pre class="prettyprint lang-dart">
class Point {
  num x, y;

  // The main constructor for this class.
  Point(this.x, this.y);

  // Delegates to the main constructor.
  Point.alongXAxis(num x) : this(x, 0);
}
</pre>

<h4 id="constant-constructors">
<a id="constant-constructors" class="anchor" href="#constant-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Constant constructors</h4>

<p>If your class produces objects that never change, you can make these
objects compile-time constants. To do this, define a <code class="highlighter-rouge">const</code> constructor
and make sure that all instance variables are <code class="highlighter-rouge">final</code>.</p>

<?code-excerpt "misc/lib/language_tour/classes/immutable_point.dart"?>
<pre class="prettyprint lang-dart">
class ImmutablePoint {
  static final ImmutablePoint origin =
      const ImmutablePoint(0, 0);

  final num x, y;

  const ImmutablePoint(this.x, this.y);
}
</pre>

<h4 id="factory-constructors">
<a id="factory-constructors" class="anchor" href="#factory-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Factory constructors</h4>

<p>Use the <code class="highlighter-rouge">factory</code> keyword when implementing a constructor that doesn’t
always create a new instance of its class. For example, a factory
constructor might return an instance from a cache, or it might return an
instance of a subtype.</p>

<p>The following example demonstrates a factory constructor returning
objects from a cache:</p>

<?code-excerpt "misc/lib/language_tour/classes/logger.dart"?>
<pre class="prettyprint lang-dart">
class Logger {
  final String name;
  bool mute = false;

  // _cache is library-private, thanks to
  // the _ in front of its name.
  static final Map&lt;String, Logger&gt; _cache =
      &lt;String, Logger&gt;{};

  factory Logger(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name];
    } else {
      final logger = Logger._internal(name);
      _cache[name] = logger;
      return logger;
    }
  }

  Logger._internal(this.name);

  void log(String msg) {
    if (!mute) print(msg);
  }
}
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Factory constructors have no access to <code class="highlighter-rouge">this</code>.</p>
</div>

<p>Invoke a factory constructor just like you would any other constructor:</p>

<?code-excerpt "misc/lib/language_tour/classes/logger.dart (logger)"?>
<pre class="prettyprint lang-dart">
var logger = Logger('UI');
logger.log('Button clicked');
</pre>

<h3 id="methods">
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods</h3>

<p>Methods are functions that provide behavior for an object.</p>

<h4 id="instance-methods">
<a id="instance-methods" class="anchor" href="#instance-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instance methods</h4>

<p>Instance methods on objects can access instance variables and <code class="highlighter-rouge">this</code>.
The <code class="highlighter-rouge">distanceTo()</code> method in the following sample is an example of an
instance method:</p>

<?code-excerpt "misc/lib/language_tour/classes/point.dart (class-with-distanceTo)" plaster="none"?>
<pre class="prettyprint lang-dart">
import 'dart:math';

class Point {
  num x, y;

  Point(this.x, this.y);

  num distanceTo(Point other) {
    var dx = x - other.x;
    var dy = y - other.y;
    return sqrt(dx * dx + dy * dy);
  }
}
</pre>

<h4 id="getters-and-setters">
<a id="getters-and-setters" class="anchor" href="#getters-and-setters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getters and setters</h4>

<p>Getters and setters are special methods that provide read and write
access to an object’s properties. Recall that each instance variable has
an implicit getter, plus a setter if appropriate. You can create
additional properties by implementing getters and setters, using the
<code class="highlighter-rouge">get</code> and <code class="highlighter-rouge">set</code> keywords:</p>

<?code-excerpt "misc/lib/language_tour/classes/rectangle.dart"?>
<pre class="prettyprint lang-dart">
class Rectangle {
  num left, top, width, height;

  Rectangle(this.left, this.top, this.width, this.height);

  // Define two calculated properties: right and bottom.
  num get right =&gt; left + width;
  set right(num value) =&gt; left = value - width;
  num get bottom =&gt; top + height;
  set bottom(num value) =&gt; top = value - height;
}

void main() {
  var rect = Rectangle(3, 4, 20, 15);
  assert(rect.left == 3);
  rect.right = 12;
  assert(rect.left == -8);
}
</pre>

<p>With getters and setters, you can start with instance variables, later
wrapping them with methods, all without changing client code.</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Operators such as increment (++) work in the expected way, whether or
not a getter is explicitly defined. To avoid any unexpected side
effects, the operator calls the getter exactly once, saving its value
in a temporary variable.</p>
</div>

<h4 id="abstract-methods">
<a id="abstract-methods" class="anchor" href="#abstract-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Abstract methods</h4>

<p>Instance, getter, and setter methods can be abstract, defining an
interface but leaving its implementation up to other classes.
Abstract methods can only exist in <a href="#abstract-classes">abstract classes</a>.</p>

<p>To make a method abstract, use a semicolon (;) instead of a method body:</p>

<?code-excerpt "misc/lib/language_tour/classes/doer.dart"?>
<pre class="prettyprint lang-dart">
abstract class Doer {
  // Define instance variables and methods...

  void doSomething(); // Define an abstract method.
}

class EffectiveDoer extends Doer {
  void doSomething() {
    // Provide an implementation, so the method is not abstract here...
  }
}
</pre>

<p>Calling an abstract method results in a runtime error.</p>

<h3 id="abstract-classes">
<a id="abstract-classes" class="anchor" href="#abstract-classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Abstract classes</h3>

<p>Use the <code class="highlighter-rouge">abstract</code> modifier to define an <em>abstract class</em>—a class that
can’t be instantiated. Abstract classes are useful for defining
interfaces, often with some implementation. If you want your abstract
class to appear to be instantiable, define a <a href="#factory-constructors">factory
constructor</a>.</p>

<p>Abstract classes often have <a href="#abstract-methods">abstract methods</a>.
Here’s an example of declaring an abstract class that has an abstract
method:</p>

<?code-excerpt "misc/lib/language_tour/classes/misc.dart (abstract)"?>
<pre class="prettyprint lang-dart">
// This class is declared abstract and thus
// can't be instantiated.
abstract class AbstractContainer {
  // Define constructors, fields, methods...

  void updateChildren(); // Abstract method.
}
</pre>

<h3 id="implicit-interfaces">
<a id="implicit-interfaces" class="anchor" href="#implicit-interfaces" aria-hidden="true"><span class="octicon octicon-link"></span></a>Implicit interfaces</h3>

<p>Every class implicitly defines an interface containing all the instance
members of the class and of any interfaces it implements. If you want to
create a class A that supports class B’s API without inheriting B’s
implementation, class A should implement the B interface.</p>

<p>A class implements one or more interfaces by declaring them in an
<code class="highlighter-rouge">implements</code> clause and then providing the APIs required by the
interfaces. For example:</p>

<?code-excerpt "misc/lib/language_tour/classes/impostor.dart"?>
<pre class="prettyprint lang-dart">
// A person. The implicit interface contains greet().
class Person {
  // In the interface, but visible only in this library.
  final _name;

  // Not in the interface, since this is a constructor.
  Person(this._name);

  // In the interface.
  String greet(String who) =&gt; 'Hello, $who. I am $_name.';
}

// An implementation of the Person interface.
class Impostor implements Person {
  get _name =&gt; '';

  String greet(String who) =&gt; 'Hi $who. Do you know who I am?';
}

String greetBob(Person person) =&gt; person.greet('Bob');

void main() {
  print(greetBob(Person('Kathy')));
  print(greetBob(Impostor()));
}
</pre>

<p>Here’s an example of specifying that a class implements multiple
interfaces:</p>

<?code-excerpt "misc/lib/language_tour/classes/misc.dart (point_interfaces)"?>
<pre class="prettyprint lang-dart">
class Point implements Comparable, Location {...}
</pre>

<h3 id="extending-a-class">
<a id="extending-a-class" class="anchor" href="#extending-a-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extending a class</h3>

<p>Use <code class="highlighter-rouge">extends</code> to create a subclass, and <code class="highlighter-rouge">super</code> to refer to the
superclass:</p>

<?code-excerpt "misc/lib/language_tour/classes/extends.dart" replace="/extends|super/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
class Television {
  void turnOn() {
    _illuminateDisplay();
    _activateIrSensor();
  }
  // ···
}

class SmartTelevision <span class="highlight">extends</span> Television {
  void turnOn() {
    <span class="highlight">super</span>.turnOn();
    _bootNetworkInterface();
    _initializeMemory();
    _upgradeApps();
  }
  // ···
}
</pre>

<h4 id="overriding-members">
<a id="overriding-members" class="anchor" href="#overriding-members" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overriding members</h4>

<p>Subclasses can override instance methods, getters, and setters.
You can use the <code class="highlighter-rouge">@override</code> annotation to indicate that you are
intentionally overriding a member:</p>

<?code-excerpt "misc/lib/language_tour/metadata/television.dart (override)" replace="/@override/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
class SmartTelevision extends Television {
  <span class="highlight">@override</span>
  void turnOn() {...}
  // ···
}
</pre>

<p>To narrow the type of a method parameter or instance variable in code that is
<a href="/guides/language/sound-dart">type safe</a>,
you can use the <a href="/guides/language/sound-problems#the-covariant-keyword"><code class="highlighter-rouge">covariant</code> keyword</a>.</p>

<h4 id="overridable-operators">
<a id="overridable-operators" class="anchor" href="#overridable-operators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overridable operators</h4>

<p>You can override the operators shown in the following table.
For example, if you define a
Vector class, you might define a <code class="highlighter-rouge">+</code> method to add two vectors.</p>

<table class="table">
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">&lt;</code></td>
      <td><code class="highlighter-rouge">+</code></td>
      <td><code class="highlighter-rouge">|</code></td>
      <td><code class="highlighter-rouge">[]</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;</code></td>
      <td><code class="highlighter-rouge">/</code></td>
      <td><code class="highlighter-rouge">^</code></td>
      <td><code class="highlighter-rouge">[]=</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;=</code></td>
      <td><code class="highlighter-rouge">~/</code></td>
      <td><code class="highlighter-rouge">&amp;</code></td>
      <td><code class="highlighter-rouge">~</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;=</code></td>
      <td><code class="highlighter-rouge">*</code></td>
      <td><code class="highlighter-rouge">&lt;&lt;</code></td>
      <td><code class="highlighter-rouge">==</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">–</code></td>
      <td><code class="highlighter-rouge">%</code></td>
      <td><code class="highlighter-rouge">&gt;&gt;</code></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Here’s an example of a class that overrides the <code class="highlighter-rouge">+</code> and <code class="highlighter-rouge">-</code> operators:</p>

<?code-excerpt "misc/lib/language_tour/classes/vector.dart"?>
<pre class="prettyprint lang-dart">
class Vector {
  final int x, y;

  Vector(this.x, this.y);

  Vector operator +(Vector v) =&gt; Vector(x + v.x, y + v.y);
  Vector operator -(Vector v) =&gt; Vector(x - v.x, y - v.y);

  // Operator == and hashCode not shown. For details, see note below.
  // ···
}

void main() {
  final v = Vector(2, 3);
  final w = Vector(2, 2);

  assert(v + w == Vector(4, 5));
  assert(v - w == Vector(0, 1));
}
</pre>

<p>If you override <code class="highlighter-rouge">==</code>, you should also override Object’s <code class="highlighter-rouge">hashCode</code> getter.
For an example of overriding <code class="highlighter-rouge">==</code> and <code class="highlighter-rouge">hashCode</code>, see
<a href="/guides/libraries/library-tour#implementing-map-keys">Implementing map keys</a>.</p>

<p>For more information on overriding, in general, see
<a href="#extending-a-class">Extending a class</a>.</p>

<h4 id="nosuchmethod">
<a id="nosuchmethod" class="anchor" href="#nosuchmethod" aria-hidden="true"><span class="octicon octicon-link"></span></a>noSuchMethod()</h4>

<p>To detect or react whenever code attempts to use a non-existent method or
instance variable, you can override <code class="highlighter-rouge">noSuchMethod()</code>:</p>

<?code-excerpt "misc/lib/language_tour/classes/no_such_method.dart" replace="/noSuchMethod(?!,)/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
class A {
  // Unless you override noSuchMethod, using a
  // non-existent member results in a NoSuchMethodError.
  @override
  void <span class="highlight">noSuchMethod</span>(Invocation invocation) {
    print('You tried to use a non-existent member: ' +
        '${invocation.memberName}');
  }
}
</pre>

<p>You <strong>can’t invoke</strong> an unimplemented method unless
<strong>one</strong> of the following is true:</p>

<ul>
  <li>
    <p>The receiver has the static type <code class="highlighter-rouge">dynamic</code>.</p>
  </li>
  <li>
    <p>The receiver has a static type that
defines the unimplemented method (abstract is OK),
and the dynamic type of the receiver has an implemention of <code class="highlighter-rouge">noSuchMethod()</code>
that’s different from the one in class <code class="highlighter-rouge">Object</code>.</p>
  </li>
</ul>

<p>有关更多信息，参见 the informal
<a href="https://github.com/dart-lang/sdk/blob/master/docs/language/informal/nosuchmethod-forwarding.md">nosuchMethod forwarding specification.</a></p>

<p><a id="enums"></a></p>
<h3 id="enumerated-types">
<a id="enumerated-types" class="anchor" href="#enumerated-types" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enumerated types</h3>

<p>Enumerated types, often called <em>enumerations</em> or <em>enums</em>,
are a special kind of class used to represent
a fixed number of constant values.</p>

<h4 id="using-enums">
<a id="using-enums" class="anchor" href="#using-enums" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using enums</h4>

<p>Declare an enumerated type using the <code class="highlighter-rouge">enum</code> keyword:</p>

<?code-excerpt "misc/lib/language_tour/classes/enum.dart (enum)"?>
<pre class="prettyprint lang-dart">
enum Color { red, green, blue }
</pre>

<p>Each value in an enum has an <code class="highlighter-rouge">index</code> getter,
which returns the zero-based position of the value in the enum declaration.
For example, the first value has index 0,
and the second value has index 1.</p>

<?code-excerpt "misc/lib/language_tour/classes/enum.dart (index)"?>
<pre class="prettyprint lang-dart">
assert(Color.red.index == 0);
assert(Color.green.index == 1);
assert(Color.blue.index == 2);
</pre>

<p>To get a list of all of the values in the enum,
use the enum’s <code class="highlighter-rouge">values</code> constant.</p>

<?code-excerpt "misc/lib/language_tour/classes/enum.dart (values)"?>
<pre class="prettyprint lang-dart">
List&lt;Color&gt; colors = Color.values;
assert(colors[2] == Color.blue);
</pre>

<p>You can use enums in <a href="#switch-and-case">switch statements</a>, and
you’ll get a warning if you don’t handle all of the enum’s values:</p>

<?code-excerpt "misc/lib/language_tour/classes/enum.dart (switch)"?>
<pre class="prettyprint lang-dart">
var aColor = Color.blue;

switch (aColor) {
  case Color.red:
    print('Red as roses!');
    break;
  case Color.green:
    print('Green as grass!');
    break;
  default: // Without this, you see a WARNING.
    print(aColor); // 'Color.blue'
}
</pre>

<p>Enumerated types have the following limits:</p>

<ul>
  <li>You can’t subclass, mix in, or implement an enum.</li>
  <li>You can’t explicitly instantiate an enum.</li>
</ul>

<p>有关更多信息，参见 the
<a href="/guides/language/spec">Dart Language Specification</a>.</p>

<h3 id="adding-features-to-a-class-mixins">
<a id="adding-features-to-a-class-mixins" class="anchor" href="#adding-features-to-a-class-mixins" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding features to a class: mixins</h3>

<p>Mixins are a way of reusing a class’s code in multiple class
hierarchies.</p>

<p>To use a mixin, use the <code class="highlighter-rouge">with</code> keyword followed by one or more mixin
names. The following example shows two classes that use mixins:</p>

<?code-excerpt "misc/lib/language_tour/classes/orchestra.dart (Musician and Maestro)" replace="/(with.*) \{/[!$1!] {/g"?>
<pre class="prettyprint lang-dart">
class Musician extends Performer <span class="highlight">with Musical</span> {
  // ···
}

class Maestro extends Person
    <span class="highlight">with Musical, Aggressive, Demented</span> {
  Maestro(String maestroName) {
    name = maestroName;
    canConduct = true;
  }
}
</pre>

<p>To implement a mixin, create a class that extends Object,
declares no constructors, and has no calls to <code class="highlighter-rouge">super</code>. For example:</p>

<?code-excerpt "misc/lib/language_tour/classes/orchestra.dart (Musical)"?>
<pre class="prettyprint lang-dart">
abstract class Musical {
  bool canPlayPiano = false;
  bool canCompose = false;
  bool canConduct = false;

  void entertainMe() {
    if (canPlayPiano) {
      print('Playing piano');
    } else if (canConduct) {
      print('Waving hands');
    } else {
      print('Humming to self');
    }
  }
}
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong> Some restrictions on mixins are being removed. For details, see the
  <a href="https://github.com/dart-lang/sdk/blob/master/docs/language/informal/mixin-declaration.md">proposed mixin specification.</a></p>

</div>

<p>For a theoretical presentation of the evolution of mixins in Dart, see
<a href="/articles/language/mixins">A Brief History of Mixins in Dart</a>.</p>

<h3 id="class-variables-and-methods">
<a id="class-variables-and-methods" class="anchor" href="#class-variables-and-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Class variables and methods</h3>

<p>Use the <code class="highlighter-rouge">static</code> keyword to implement class-wide variables and methods.</p>

<h4 id="static-variables">
<a id="static-variables" class="anchor" href="#static-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Static variables</h4>

<p>Static variables (class variables) are useful for class-wide state and
constants:</p>

<?code-excerpt "misc/lib/language_tour/classes/misc.dart (static-field)"?>
<pre class="prettyprint lang-dart">
class Queue {
  static const initialCapacity = 16;
  // ···
}

void main() {
  assert(Queue.initialCapacity == 16);
}
</pre>

<p>Static variables aren’t initialized until they’re used.</p>

<div class="alert alert-info">
  <p><strong>提示：</strong>
This page follows the <a href="/guides/language/effective-dart/style#identifiers">style guide
recommendation</a>
of preferring <code class="highlighter-rouge">lowerCamelCase</code> for constant names.</p>
</div>

<h4 id="static-methods">
<a id="static-methods" class="anchor" href="#static-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Static methods</h4>

<p>Static methods (class methods) do not operate on an instance, and thus
do not have access to <code class="highlighter-rouge">this</code>. For example:</p>

<?code-excerpt "misc/lib/language_tour/classes/point_with_distance_method.dart"?>
<pre class="prettyprint lang-dart">
import 'dart:math';

class Point {
  num x, y;
  Point(this.x, this.y);

  static num distanceBetween(Point a, Point b) {
    var dx = a.x - b.x;
    var dy = a.y - b.y;
    return sqrt(dx * dx + dy * dy);
  }
}

void main() {
  var a = Point(2, 2);
  var b = Point(4, 4);
  var distance = Point.distanceBetween(a, b);
  assert(2.8 &lt; distance &amp;&amp; distance &lt; 2.9);
  print(distance);
}
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
Consider using top-level functions, instead of static methods, for
common or widely used utilities and functionality.</p>
</div>

<p>You can use static methods as compile-time constants. For example, you
can pass a static method as a parameter to a constant constructor.</p>

<h2 id="generics">
<a id="generics" class="anchor" href="#generics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generics</h2>

<p>If you look at the API documentation for the basic array type,
<a href="https://api.dartlang.org/dev/dart-core/List-class.html">List,</a> you’ll see that the
type is actually <code class="highlighter-rouge">List&lt;E&gt;</code>. The &lt;…&gt; notation marks List as a
<em>generic</em> (or <em>parameterized</em>) type—a type that has formal type
parameters. By convention, type variables have single-letter names, such
as E, T, S, K, and V.</p>

<h3 id="why-use-generics">
<a id="why-use-generics" class="anchor" href="#why-use-generics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why use generics?</h3>

<p>Generics are often required for type safety, but they have more benefits
than just allowing your code to run:</p>

<ul>
  <li>Properly specifying generic types results in better generated code.</li>
  <li>You can use generics to reduce code duplication.</li>
</ul>

<p>If you intend for a list to contain only strings, you can
declare it as <code class="highlighter-rouge">List&lt;String&gt;</code> (read that as “list of string”). That way
you, your fellow programmers, and your tools can detect that assigning a non-string to
the list is probably a mistake. Here’s an example:</p>

<?code-excerpt "misc/lib/language_tour/generics/misc.dart (why-generics)"?>
<pre class="prettyprint lang-dart fails-sa">
var names = List&lt;String&gt;();
names.addAll(['Seth', 'Kathy', 'Lars']);
names.add(42); // Error
</pre>

<p>Another reason for using generics is to reduce code duplication.
Generics let you share a single interface and implementation between
many types, while still taking advantage of static
analysis. For example, say you create an interface for
caching an object:</p>

<?code-excerpt "misc/lib/language_tour/generics/cache.dart (ObjectCache)"?>
<pre class="prettyprint lang-dart">
abstract class ObjectCache {
  Object getByKey(String key);
  void setByKey(String key, Object value);
}
</pre>

<p>You discover that you want a string-specific version of this interface,
so you create another interface:</p>

<?code-excerpt "misc/lib/language_tour/generics/cache.dart (StringCache)"?>
<pre class="prettyprint lang-dart">
abstract class StringCache {
  String getByKey(String key);
  void setByKey(String key, String value);
}
</pre>

<p>Later, you decide you want a number-specific version of this
interface… You get the idea.</p>

<p>Generic types can save you the trouble of creating all these interfaces.
Instead, you can create a single interface that takes a type parameter:</p>

<?code-excerpt "misc/lib/language_tour/generics/cache.dart (Cache)"?>
<pre class="prettyprint lang-dart">
abstract class Cache&lt;T&gt; {
  T getByKey(String key);
  void setByKey(String key, T value);
}
</pre>

<p>In this code, T is the stand-in type. It’s a placeholder that you can
think of as a type that a developer will define later.</p>

<h3 id="using-collection-literals">
<a id="using-collection-literals" class="anchor" href="#using-collection-literals" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using collection literals</h3>

<p>List and map literals can be parameterized. Parameterized literals are
just like the literals you’ve already seen, except that you add
<code>&lt;<em>type</em>&gt;</code> (for lists) or
<code>&lt;<em>keyType</em>, <em>valueType</em>&gt;</code> (for maps)
before the opening bracket. Here
is example of using typed literals:</p>

<?code-excerpt "misc/lib/language_tour/generics/misc.dart (collection-literals)"?>
<pre class="prettyprint lang-dart">
var names = &lt;String&gt;['Seth', 'Kathy', 'Lars'];
var pages = &lt;String, String&gt;{
  'index.html': 'Homepage',
  'robots.txt': 'Hints for web robots',
  'humans.txt': 'We are people, not machines'
};
</pre>

<h3 id="using-parameterized-types-with-constructors">
<a id="using-parameterized-types-with-constructors" class="anchor" href="#using-parameterized-types-with-constructors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using parameterized types with constructors</h3>

<p>To specify one or more types when using a constructor, put the types in
angle brackets (<code class="highlighter-rouge">&lt;...&gt;</code>) just after the class name. For example:</p>

<?code-excerpt "misc/test/language_tour/generics_test.dart (constructor-1)"?>
<pre class="prettyprint lang-dart">
var names = List&lt;String&gt;();
names.addAll(['Seth', 'Kathy', 'Lars']);
var nameSet = Set&lt;String&gt;.from(names);
</pre>

<p>The following code creates a map that has integer keys and values of
type View:</p>

<?code-excerpt "misc/test/language_tour/generics_test.dart (constructor-2)"?>
<pre class="prettyprint lang-dart">
var views = Map&lt;int, View&gt;();
</pre>

<h3 id="generic-collections-and-the-types-they-contain">
<a id="generic-collections-and-the-types-they-contain" class="anchor" href="#generic-collections-and-the-types-they-contain" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generic collections and the types they contain</h3>

<p>Dart generic types are <em>reified</em>, which means that they carry their type
information around at runtime. For example, you can test the type of a
collection:</p>

<?code-excerpt "misc/test/language_tour/generics_test.dart (generic-collections)"?>
<pre class="prettyprint lang-dart">
var names = List&lt;String&gt;();
names.addAll(['Seth', 'Kathy', 'Lars']);
print(names is List&lt;String&gt;); // true
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
In contrast, generics in Java use <em>erasure</em>, which means that generic
type parameters are removed at runtime. In Java, you can test whether
an object is a List, but you can’t test whether it’s a <code class="highlighter-rouge">List&lt;String&gt;</code>.</p>
</div>

<h3 id="restricting-the-parameterized-type">
<a id="restricting-the-parameterized-type" class="anchor" href="#restricting-the-parameterized-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Restricting the parameterized type</h3>

<p>When implementing a generic type,
you might want to limit the types of its parameters.
You can do this using <code class="highlighter-rouge">extends</code>.</p>

<?code-excerpt "misc/lib/language_tour/generics/base_class.dart" replace="/extends SomeBaseClass(?=. \{)/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
class Foo&lt;T <span class="highlight">extends SomeBaseClass</span>&gt; {
  // Implementation goes here...
  String toString() =&gt; "Instance of 'Foo&lt;$T&gt;'";
}

class Extender extends SomeBaseClass {...}
</pre>

<p>It’s OK to use <code class="highlighter-rouge">SomeBaseClass</code> or any of its subclasses as generic argument:</p>

<?code-excerpt "misc/test/language_tour/generics_test.dart (SomeBaseClass-ok)" replace="/Foo.\w+./[!$&!]/g"?>
<pre class="prettyprint lang-dart">
var someBaseClassFoo = <span class="highlight">Foo&lt;SomeBaseClass&gt;</span>();
var extenderFoo = <span class="highlight">Foo&lt;Extender&gt;</span>();
</pre>

<p>It’s also OK to specify no generic argument:</p>

<?code-excerpt "misc/test/language_tour/generics_test.dart (no-generic-arg-ok)" replace="/expect\((.*?).toString\(\), .(.*?).\);/print($1); \/\/ $2/g"?>
<pre class="prettyprint lang-dart">
var foo = Foo();
print(foo); // Instance of 'Foo&lt;SomeBaseClass&gt;'
</pre>

<p>Specifying any non-<code class="highlighter-rouge">SomeBaseClass</code> type results in an error:</p>

<?code-excerpt "misc/lib/language_tour/generics/misc.dart (Foo-Object-error)" replace="/Foo.\w+./[!$&!]/g"?>
<pre class="prettyprint lang-dart fails-sa">
var foo = <span class="highlight">Foo&lt;Object&gt;</span>();
</pre>

<h3 id="using-generic-methods">
<a id="using-generic-methods" class="anchor" href="#using-generic-methods" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using generic methods</h3>

<p>Initially, Dart’s generic support was limited to classes.
A newer syntax, called <em>generic methods</em>, allows type arguments on methods and functions:</p>

<!-- https://dartpad.dartlang.org/a02c53b001977efa4d803109900f21bb -->
<!-- https://gist.github.com/a02c53b001977efa4d803109900f21bb -->
<?code-excerpt "misc/test/language_tour/generics_test.dart (method)" replace="/<T.(?=\()|T/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
<span class="highlight">T</span> first<span class="highlight">&lt;T&gt;</span>(List&lt;<span class="highlight">T</span>&gt; ts) {
  // Do some initial work or error checking, then...
  <span class="highlight">T</span> tmp = ts[0];
  // Do some additional checking or processing...
  return tmp;
}
</pre>

<p>Here the generic type parameter on <code class="highlighter-rouge">first</code> (<code class="highlighter-rouge">&lt;T&gt;</code>)
allows you to use the type argument <code class="highlighter-rouge">T</code> in several places:</p>

<ul>
  <li>In the function’s return type (<code class="highlighter-rouge">T</code>).</li>
  <li>In the type of an argument (<code class="highlighter-rouge">List&lt;T&gt;</code>).</li>
  <li>In the type of a local variable (<code class="highlighter-rouge">T tmp</code>).</li>
</ul>

<p>For more information about generics, see
<a href="https://github.com/dart-lang/sdk/blob/master/pkg/dev_compiler/doc/GENERIC_METHODS.md">Using Generic Methods.</a></p>

<h2 id="libraries-and-visibility">
<a id="libraries-and-visibility" class="anchor" href="#libraries-and-visibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Libraries and visibility</h2>

<p>The <code class="highlighter-rouge">import</code> and <code class="highlighter-rouge">library</code> directives can help you create a
modular and shareable code base. Libraries not only provide APIs, but
are a unit of privacy: identifiers that start with an underscore (_)
are visible only inside the library. <em>Every Dart app is a library</em>, even
if it doesn’t use a <code class="highlighter-rouge">library</code> directive.</p>

<p>Libraries can be distributed using packages. See
<a href="/tools/pub">Pub Package and Asset Manager</a>
for information about
pub, a package manager included in the SDK.</p>

<h3 id="using-libraries">
<a id="using-libraries" class="anchor" href="#using-libraries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using libraries</h3>

<p>Use <code class="highlighter-rouge">import</code> to specify how a namespace from one library is used in the
scope of another library.</p>

<p>For example, Dart web apps generally use the <a href="https://api.dartlang.org/dev/dart-html">dart:html</a>
library, which they can import like this:</p>

<?code-excerpt "misc/test/language_tour/browser_test.dart (dart-html-import)"?>
<pre class="prettyprint lang-dart">
import 'dart:html';
</pre>

<p>The only required argument to <code class="highlighter-rouge">import</code> is a URI specifying the
library.
For built-in libraries, the URI has the special <code class="highlighter-rouge">dart:</code> scheme.
For other libraries, you can use a file system path or the <code class="highlighter-rouge">package:</code>
scheme. The <code class="highlighter-rouge">package:</code> scheme specifies libraries provided by a package
manager such as the pub tool. For example:</p>

<?code-excerpt "misc/test/language_tour/browser_test.dart (package-import)"?>
<pre class="prettyprint lang-dart">
import 'package:test/test.dart';
</pre>

<div class="alert alert-info">
  <p><strong>提示：</strong>
<em>URI</em> stands for uniform resource identifier.
<em>URLs</em> (uniform resource locators) are a common kind of URI.</p>
</div>

<h4 id="specifying-a-library-prefix">
<a id="specifying-a-library-prefix" class="anchor" href="#specifying-a-library-prefix" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specifying a library prefix</h4>

<p>If you import two libraries that have conflicting identifiers, then you
can specify a prefix for one or both libraries. For example, if library1
and library2 both have an Element class, then you might have code like
this:</p>

<?code-excerpt "misc/lib/language_tour/libraries/import_as.dart" replace="/(lib\d)\.dart/package:$1\/$&/g"?>
<pre class="prettyprint lang-dart">
import 'package:lib1/lib1.dart';
import 'package:lib2/lib2.dart' as lib2;

// Uses Element from lib1.
Element element1 = Element();

// Uses Element from lib2.
lib2.Element element2 = lib2.Element();
</pre>

<h4 id="importing-only-part-of-a-library">
<a id="importing-only-part-of-a-library" class="anchor" href="#importing-only-part-of-a-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Importing only part of a library</h4>

<p>If you want to use only part of a library, you can selectively import
the library. For example:</p>

<?code-excerpt "misc/lib/language_tour/libraries/show_hide.dart" replace="/(lib\d)\.dart/package:$1\/$&/g"?>
<pre class="prettyprint lang-dart">
// Import only foo.
import 'package:lib1/lib1.dart' show foo;

// Import all names EXCEPT foo.
import 'package:lib2/lib2.dart' hide foo;
</pre>

<p><a id="deferred-loading"></a></p>
<h4 id="lazily-loading-a-library">
<a id="lazily-loading-a-library" class="anchor" href="#lazily-loading-a-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lazily loading a library</h4>

<p><em>Deferred loading</em> (also called <em>lazy loading</em>)
allows an application to load a library on demand,
if and when it’s needed.
Here are some cases when you might use deferred loading:</p>

<ul>
  <li>To reduce an app’s initial startup time.</li>
  <li>To perform A/B testing—trying out
alternative implementations of an algorithm, for example.</li>
  <li>To load rarely used functionality, such as optional screens and dialogs.</li>
</ul>

<p>To lazily load a library, you must first
import it using <code class="highlighter-rouge">deferred as</code>.</p>

<?code-excerpt "misc/lib/language_tour/libraries/greeter.dart (import)" replace="/hello\.dart/package:greetings\/$&/g"?>
<pre class="prettyprint lang-dart">
import 'package:greetings/hello.dart' deferred as hello;
</pre>

<p>When you need the library, invoke
<code class="highlighter-rouge">loadLibrary()</code> using the library’s identifier.</p>

<?code-excerpt "misc/lib/language_tour/libraries/greeter.dart (loadLibrary)"?>
<pre class="prettyprint lang-dart">
Future greet() async {
  await hello.loadLibrary();
  hello.printGreeting();
}
</pre>

<p>In the preceding code,
the <code class="highlighter-rouge">await</code> keyword pauses execution until the library is loaded.
For more information about <code class="highlighter-rouge">async</code> and <code class="highlighter-rouge">await</code>,
see <a href="#asynchrony-support">asynchrony support</a>.</p>

<p>You can invoke <code class="highlighter-rouge">loadLibrary()</code> multiple times on a library without problems.
The library is loaded only once.</p>

<p>Keep in mind the following when you use deferred loading:</p>

<ul>
  <li>A deferred library’s constants aren’t constants in the importing file.
Remember, these constants don’t exist until the deferred library is loaded.</li>
  <li>You can’t use types from a deferred library in the importing file.
Instead, consider moving interface types to a library imported by
both the deferred library and the importing file.</li>
  <li>Dart implicitly inserts <code class="highlighter-rouge">loadLibrary()</code> into the namespace that you define
using <code>deferred as <em>namespace</em></code>.
The <code class="highlighter-rouge">loadLibrary()</code> function returns a <a href="/guides/libraries/library-tour#future">Future</a>.</li>
</ul>

<aside class="alert alert-warning">
  <p><strong>Dart VM difference:</strong>
Due to <a href="https://github.com/dart-lang/sdk/issues/33118">issue #33118</a>,
the Dart VM allows access to members of deferred libraries
even before the call to <code class="highlighter-rouge">loadLibrary()</code>.
We expect this bug to be fixed soon, so
<strong>don’t depend on the current VM behavior.</strong></p>
</aside>

<h3 id="implementing-libraries">
<a id="implementing-libraries" class="anchor" href="#implementing-libraries" aria-hidden="true"><span class="octicon octicon-link"></span></a>Implementing libraries</h3>

<p>See
<a href="/guides/libraries/create-library-packages">Create Library Packages</a>
for advice on how to implement a library package, including:</p>

<ul>
  <li>How to organize library source code.</li>
  <li>How to use the <code class="highlighter-rouge">export</code> directive.</li>
  <li>When to use the <code class="highlighter-rouge">part</code> directive.</li>
</ul>

<p><a id="asynchrony"></a></p>
<h2 id="asynchrony-support">
<a id="asynchrony-support" class="anchor" href="#asynchrony-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Asynchrony support</h2>

<p>Dart libraries are full of functions that
return <a href="https://api.dartlang.org/dev/dart-async/Future-class.html">Future</a> or <a href="https://api.dartlang.org/dev/dart-async/Stream-class.html">Stream</a> objects.
These functions are <em>asynchronous</em>:
they return after setting up
a possibly time-consuming operation
(such as I/O),
without waiting for that operation to complete.</p>

<p>The <code class="highlighter-rouge">async</code> and <code class="highlighter-rouge">await</code> keywords support asynchronous programming,
letting you write asynchronous code that
looks similar to synchronous code.</p>

<p><a id="await"></a></p>
<h3 id="handling-futures">
<a id="handling-futures" class="anchor" href="#handling-futures" aria-hidden="true"><span class="octicon octicon-link"></span></a>Handling Futures</h3>

<p>When you need the result of a completed Future,
you have two options:</p>

<ul>
  <li>Use <code class="highlighter-rouge">async</code> and <code class="highlighter-rouge">await</code>.</li>
  <li>Use the Future API, as described
<a href="/guides/libraries/library-tour#future">in the library tour</a>.</li>
</ul>

<p>Code that uses <code class="highlighter-rouge">async</code> and <code class="highlighter-rouge">await</code> is asynchronous,
but it looks a lot like synchronous code.
For example, here’s some code that uses <code class="highlighter-rouge">await</code>
to wait for the result of an asynchronous function:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (await-lookUpVersion)"?>
<pre class="prettyprint lang-dart">
await lookUpVersion();
</pre>

<p>To use <code class="highlighter-rouge">await</code>, code must be in an <em>async function</em>—a
function marked as <code class="highlighter-rouge">async</code>:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (checkVersion)" replace="/async|await/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
Future checkVersion() <span class="highlight">async</span> {
  var version = <span class="highlight">await</span> lookUpVersion();
  // Do something with version
}
</pre>

<aside class="alert alert-info">
  <p><strong>提示：</strong>
Although an async function might perform time-consuming operations,
it doesn’t wait for those operations.
Instead, the async function executes only until it encounters
its first <code class="highlighter-rouge">await</code> expression
(<a href="https://github.com/dart-lang/sdk/blob/master/docs/newsletter/20170915.md#synchronous-async-start">details</a>).
Then it returns a Future object,
resuming execution only after the <code class="highlighter-rouge">await</code> expression completes.</p>
</aside>

<p>Use <code class="highlighter-rouge">try</code>, <code class="highlighter-rouge">catch</code>, and <code class="highlighter-rouge">finally</code>
to handle errors and cleanup in code that uses <code class="highlighter-rouge">await</code>:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (try-catch)"?>
<pre class="prettyprint lang-dart">
try {
  version = await lookUpVersion();
} catch (e) {
  // React to inability to look up the version
}
</pre>

<p>You can use <code class="highlighter-rouge">await</code> multiple times in an async function.
For example, the following code waits three times
for the results of functions:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (repeated-await)"?>
<pre class="prettyprint lang-dart">
var entrypoint = await findEntrypoint();
var exitCode = await runExecutable(entrypoint, args);
await flushThenExit(exitCode);
</pre>

<p>In <code>await <em>expression</em></code>,
the value of <code><em>expression</em></code> is usually a Future;
if it isn’t, then the value is automatically wrapped in a Future.
This Future object indicates a promise to return an object.
The value of <code>await <em>expression</em></code> is that returned object.
The await expression makes execution pause until that object is available.</p>

<p><strong>If you get a compile-time error when using <code class="highlighter-rouge">await</code>,
make sure <code class="highlighter-rouge">await</code> is in an async function.</strong>
For example, to use <code class="highlighter-rouge">await</code> in your app’s <code class="highlighter-rouge">main()</code> function,
the body of <code class="highlighter-rouge">main()</code> must be marked as <code class="highlighter-rouge">async</code>:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (main)" replace="/async|await/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
Future main() <span class="highlight">async</span> {
  checkVersion();
  print('In main: version is ${<span class="highlight">await</span> lookUpVersion()}');
}
</pre>

<p><a id="async"></a></p>
<h3 id="declaring-async-functions">
<a id="declaring-async-functions" class="anchor" href="#declaring-async-functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Declaring async functions</h3>

<p>An <em>async function</em> is a function whose body is marked with
the <code class="highlighter-rouge">async</code> modifier.</p>

<p>Adding the <code class="highlighter-rouge">async</code> keyword to a function makes it return a Future.
For example, consider this synchronous function,
which returns a String:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (sync-lookUpVersion)"?>
<pre class="prettyprint lang-dart">
String lookUpVersion() =&gt; '1.0.0';
</pre>

<p>If you change it to be an async function—for example,
because a future implementation will be time consuming—the
returned value is a Future:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (async-lookUpVersion)"?>
<pre class="prettyprint lang-dart">
Future&lt;String&gt; lookUpVersion() async =&gt; '1.0.0';
</pre>

<p>Note that the function’s body doesn’t need to use the Future API.
Dart creates the Future object if necessary.</p>

<p>If your function doesn’t return a useful value,
make its return type <code class="highlighter-rouge">Future&lt;void&gt;</code>.</p>

<p><a id="await-for"></a></p>
<h3 id="handling-streams">
<a id="handling-streams" class="anchor" href="#handling-streams" aria-hidden="true"><span class="octicon octicon-link"></span></a>Handling Streams</h3>

<p>When you need to get values from a Stream,
you have two options:</p>

<ul>
  <li>Use <code class="highlighter-rouge">async</code> and an <em>asynchronous for loop</em> (<code class="highlighter-rouge">await for</code>).</li>
  <li>Use the Stream API, as described
<a href="/guides/libraries/library-tour#stream">in the library tour</a>.</li>
</ul>

<aside class="alert alert-warning">
  <p><strong>提示：</strong>
Before using <code class="highlighter-rouge">await for</code>, be sure that it makes the code clearer
and that you really do want to wait for all of the stream’s results.
For example, you usually should <strong>not</strong> use <code class="highlighter-rouge">await for</code> for UI event listeners,
because UI frameworks send endless streams of events.</p>
</aside>

<p>An asynchronous for loop has the following form:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (await-for)"?>
<pre class="prettyprint lang-dart">
await for (varOrType identifier in expression) {
  // Executes each time the stream emits a value.
}
</pre>

<p>The value of <code><em>expression</em></code> must have type Stream.
Execution proceeds as follows:</p>

<ol>
  <li>Wait until the stream emits a value.</li>
  <li>Execute the body of the for loop,
with the variable set to that emitted value.</li>
  <li>Repeat 1 and 2 until the stream is closed.</li>
</ol>

<p>To stop listening to the stream,
you can use a <code class="highlighter-rouge">break</code> or <code class="highlighter-rouge">return</code> statement,
which breaks out of the for loop
and unsubscribes from the stream.</p>

<p><strong>If you get a compile-time error when implementing an asynchronous for loop,
make sure the <code class="highlighter-rouge">await for</code> is in an async function.</strong>
For example, to use an asynchronous for loop in your app’s <code class="highlighter-rouge">main()</code> function,
the body of <code class="highlighter-rouge">main()</code> must be marked as <code class="highlighter-rouge">async</code>:</p>

<?code-excerpt "misc/lib/language_tour/async.dart (number_thinker)" replace="/async|await for/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
Future main() <span class="highlight">async</span> {
  // ...
  <span class="highlight">await for</span> (var request in requestServer) {
    handleRequest(request);
  }
  // ...
}
</pre>

<p>For more information about asynchronous programming, in general, see the
<a href="/guides/libraries/library-tour#dartasync---asynchronous-programming">dart:async</a>
section of the library tour.
Also see the articles
<a href="/articles/language/await-async">Dart Language Asynchrony Support: Phase 1</a>
and
<a href="/articles/language/beyond-async">Dart Language Asynchrony Support: Phase 2</a>,
and the <a href="/guides/language/spec">Dart language specification</a>.</p>

<p><a id="generator"></a></p>
<h2 id="generators">
<a id="generators" class="anchor" href="#generators" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generators</h2>

<p>When you need to lazily produce a sequence of values,
consider using a <em>generator function</em>.
Dart has built-in support for two kinds of generator functions:</p>

<ul>
  <li>
<strong>Synchronous</strong> generator: Returns an <strong><a href="https://api.dartlang.org/dev/dart-core/Iterable-class.html">Iterable</a></strong> object.</li>
  <li>
<strong>Asynchronous</strong> generator: Returns a <strong><a href="https://api.dartlang.org/dev/dart-async/Stream-class.html">Stream</a></strong> object.</li>
</ul>

<p>To implement a <strong>synchronous</strong> generator function,
mark the function body as <code class="highlighter-rouge">sync*</code>,
and use <code class="highlighter-rouge">yield</code> statements to deliver values:</p>

<?code-excerpt "misc/test/language_tour/async_test.dart (sync-generator)"?>
<pre class="prettyprint lang-dart">
Iterable&lt;int&gt; naturalsTo(int n) sync* {
  int k = 0;
  while (k &lt; n) yield k++;
}
</pre>

<p>To implement an <strong>asynchronous</strong> generator function,
mark the function body as <code class="highlighter-rouge">async*</code>,
and use <code class="highlighter-rouge">yield</code> statements to deliver values:</p>

<?code-excerpt "misc/test/language_tour/async_test.dart (async-generator)"?>
<pre class="prettyprint lang-dart">
Stream&lt;int&gt; asynchronousNaturalsTo(int n) async* {
  int k = 0;
  while (k &lt; n) yield k++;
}
</pre>

<p>If your generator is recursive,
you can improve its performance by using <code class="highlighter-rouge">yield*</code>:</p>

<?code-excerpt "misc/test/language_tour/async_test.dart (recursive-generator)"?>
<pre class="prettyprint lang-dart">
Iterable&lt;int&gt; naturalsDownFrom(int n) sync* {
  if (n &gt; 0) {
    yield n;
    yield* naturalsDownFrom(n - 1);
  }
}
</pre>

<p>For more information about generators, see the article
<a href="/articles/language/beyond-async">Dart Language Asynchrony Support: Phase 2</a>.</p>

<h2 id="callable-classes">
<a id="callable-classes" class="anchor" href="#callable-classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Callable classes</h2>

<p>To allow your Dart class to be called like a function,
implement the <code class="highlighter-rouge">call()</code> method.</p>

<p>In the following example, the <code class="highlighter-rouge">WannabeFunction</code> class defines
a call() function that takes three strings and concatenates them,
separating each with a space, and appending an exclamation.
Click the run button ( <img src="/assets/red-run.png" width="20" height="19" alt="red-run.png"> ) to execute the code.</p>

<iframe src="https://dartpad.dartlang.org/embed-dart.html?id=405379bacf30335f3aed&amp;horizontalRatio=99&amp;verticalRatio=73" width="100%" height="240px" style="border: 1px solid #ccc;">
</iframe>

<p>For more information on treating classes like functions, see
<a href="/articles/language/emulating-functions">Emulating Functions in Dart</a>.</p>

<h2 id="isolates">
<a id="isolates" class="anchor" href="#isolates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Isolates</h2>

<p>Most computers, even on mobile platforms, have multi-core CPUs.
To take advantage of all those cores, developers traditionally use
shared-memory threads running concurrently. However, shared-state
concurrency is error prone and can lead to complicated code.</p>

<p>Instead of threads, all Dart code runs inside of <em>isolates</em>. Each
isolate has its own memory heap, ensuring that no isolate’s state is
accessible from any other isolate.</p>

<p>有关更多信息，参见 the
<a href="https://api.dartlang.org/dev/dart-isolate">dart:isolate library documentation.</a></p>

<h2 id="typedefs">
<a id="typedefs" class="anchor" href="#typedefs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Typedefs</h2>

<p>In Dart, functions are objects, just like strings and numbers are
objects. A <em>typedef</em>, or <em>function-type alias</em>, gives a function type a
name that you can use when declaring fields and return types. A typedef
retains type information when a function type is assigned to a variable.</p>

<p>Consider the following code, which doesn’t use a typedef:</p>

<?code-excerpt "misc/lib/language_tour/typedefs/sorted_collection_1.dart"?>
<pre class="prettyprint lang-dart">
class SortedCollection {
  Function compare;

  SortedCollection(int f(Object a, Object b)) {
    compare = f;
  }
}

// Initial, broken implementation.
int sort(Object a, Object b) =&gt; 0;

void main() {
  SortedCollection coll = SortedCollection(sort);

  // All we know is that compare is a function,
  // but what type of function?
  assert(coll.compare is Function);
}
</pre>

<p>Type information is lost when assigning <code class="highlighter-rouge">f</code> to <code class="highlighter-rouge">compare</code>. The type of
<code class="highlighter-rouge">f</code> is <code class="highlighter-rouge">(Object, </code><code class="highlighter-rouge">Object)</code> → <code class="highlighter-rouge">int</code> (where → means returns), yet the
type of <code class="highlighter-rouge">compare</code> is Function. If we change the code to use explicit
names and retain type information, both developers and tools can use
that information.</p>

<?code-excerpt "misc/lib/language_tour/typedefs/sorted_collection_2.dart"?>
<pre class="prettyprint lang-dart">
typedef Compare = int Function(Object a, Object b);

class SortedCollection {
  Compare compare;

  SortedCollection(this.compare);
}

// Initial, broken implementation.
int sort(Object a, Object b) =&gt; 0;

void main() {
  SortedCollection coll = SortedCollection(sort);
  assert(coll.compare is Function);
  assert(coll.compare is Compare);
}
</pre>

<aside class="alert alert-info">
  <p><strong>提示：</strong>
Currently, typedefs are restricted to function types. We expect this
to change.</p>
</aside>

<p>Because typedefs are simply aliases, they offer a way to check the type
of any function. For example:</p>

<?code-excerpt "misc/lib/language_tour/typedefs/misc.dart (compare)"?>
<pre class="prettyprint lang-dart">
typedef Compare&lt;T&gt; = int Function(T a, T b);

int sort(int a, int b) =&gt; a - b;

void main() {
  assert(sort is Compare&lt;int&gt;); // True!
}
</pre>

<h2 id="metadata">
<a id="metadata" class="anchor" href="#metadata" aria-hidden="true"><span class="octicon octicon-link"></span></a>Metadata</h2>

<p>Use metadata to give additional information about your code. A metadata
annotation begins with the character <code class="highlighter-rouge">@</code>, followed by either a reference
to a compile-time constant (such as <code class="highlighter-rouge">deprecated</code>) or a call to a
constant constructor.</p>

<p>Two annotations are available to all Dart code: <code class="highlighter-rouge">@deprecated</code> and
<code class="highlighter-rouge">@override</code>. For examples of using <code class="highlighter-rouge">@override</code>,
see <a href="#extending-a-class">Extending a class</a>.
Here’s an example of using the <code class="highlighter-rouge">@deprecated</code>
annotation:</p>

<?code-excerpt "misc/lib/language_tour/metadata/television.dart (deprecated)" replace="/@deprecated/[!$&!]/g"?>
<pre class="prettyprint lang-dart">
class Television {
  /// _Deprecated: Use [turnOn] instead._
  <span class="highlight">@deprecated</span>
  void activate() {
    turnOn();
  }

  /// Turns the TV's power on.
  void turnOn() {...}
}
</pre>

<p>You can define your own metadata annotations. Here’s an example of
defining a @todo annotation that takes two arguments:</p>

<?code-excerpt "misc/lib/language_tour/metadata/todo.dart"?>
<pre class="prettyprint lang-dart">
library todo;

class Todo {
  final String who;
  final String what;

  const Todo(this.who, this.what);
}
</pre>

<p>And here’s an example of using that @todo annotation:</p>

<?code-excerpt "misc/lib/language_tour/metadata/misc.dart"?>
<pre class="prettyprint lang-dart">
import 'todo.dart';

@Todo('seth', 'make this do something')
void doSomething() {
  print('do something');
}
</pre>

<p>Metadata can appear before a library, class, typedef, type parameter,
constructor, factory, function, field, parameter, or variable
declaration and before an import or export directive. You can
retrieve metadata at runtime using reflection.</p>

<h2 id="comments">
<a id="comments" class="anchor" href="#comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Comments</h2>

<p>Dart supports single-line comments, multi-line comments, and
documentation comments.</p>

<h3 id="single-line-comments">
<a id="single-line-comments" class="anchor" href="#single-line-comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Single-line comments</h3>

<p>A single-line comment begins with <code class="highlighter-rouge">//</code>. Everything between <code class="highlighter-rouge">//</code> and the
end of line is ignored by the Dart compiler.</p>

<?code-excerpt "misc/lib/language_tour/comments.dart (single-line-comments)"?>
<pre class="prettyprint lang-dart">
void main() {
  // TODO: refactor into an AbstractLlamaGreetingFactory?
  print('Welcome to my Llama farm!');
}
</pre>

<h3 id="multi-line-comments">
<a id="multi-line-comments" class="anchor" href="#multi-line-comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multi-line comments</h3>

<p>A multi-line comment begins with <code class="highlighter-rouge">/*</code> and ends with <code class="highlighter-rouge">*/</code>. Everything
between <code class="highlighter-rouge">/*</code> and <code class="highlighter-rouge">*/</code> is ignored by the Dart compiler (unless the
comment is a documentation comment; see the next section). Multi-line
comments can nest.</p>

<?code-excerpt "misc/lib/language_tour/comments.dart (multi-line-comments)"?>
<pre class="prettyprint lang-dart">
void main() {
  /*
   * This is a lot of work. Consider raising chickens.

  Llama larry = Llama();
  larry.feed();
  larry.exercise();
  larry.clean();
   */
}
</pre>

<h3 id="documentation-comments">
<a id="documentation-comments" class="anchor" href="#documentation-comments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation comments</h3>

<p>Documentation comments are multi-line or single-line comments that begin
with <code class="highlighter-rouge">///</code> or <code class="highlighter-rouge">/**</code>. Using <code class="highlighter-rouge">///</code> on consecutive lines has the same
effect as a multi-line doc comment.</p>

<p>Inside a documentation comment, the Dart compiler ignores all text
unless it is enclosed in brackets. Using brackets, you can refer to
classes, methods, fields, top-level variables, functions, and
parameters. The names in brackets are resolved in the lexical scope of
the documented program element.</p>

<p>Here is an example of documentation comments with references to other
classes and arguments:</p>

<?code-excerpt "misc/lib/language_tour/comments.dart (doc-comments)"?>
<pre class="prettyprint lang-dart">
/// A domesticated South American camelid (Lama glama).
///
/// Andean cultures have used llamas as meat and pack
/// animals since pre-Hispanic times.
class Llama {
  String name;

  /// Feeds your llama [Food].
  ///
  /// The typical llama eats one bale of hay per week.
  void feed(Food food) {
    // ...
  }

  /// Exercises your llama with an [activity] for
  /// [timeLimit] minutes.
  void exercise(Activity activity, int timeLimit) {
    // ...
  }
}
</pre>

<p>In the generated documentation, <code class="highlighter-rouge">[Food]</code> becomes a link to the API docs
for the Food class.</p>

<p>To parse Dart code and generate HTML documentation, you can use the SDK’s
<a href="https://github.com/dart-lang/dartdoc#dartdoc">documentation generation tool.</a>
For an example of generated documentation, see the <a href="https://api.dartlang.org/dev">Dart API
documentation.</a> For advice on how to structure
your comments, see
<a href="/guides/language/effective-dart/documentation">Guidelines for Dart Doc Comments.</a></p>

<h2 id="summary">
<a id="summary" class="anchor" href="#summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary</h2>

<p>This page summarized the commonly used features in the Dart language.
More features are being implemented, but we expect that they won’t break
existing code. 有关更多信息，参见 the <a href="/guides/language/spec">Dart Language
Specification</a> and
<a href="/guides/language/effective-dart">Effective Dart</a>.</p>

<p>To learn more about Dart’s core libraries, see
<a href="/guides/libraries/library-tour">A Tour of the Dart Libraries</a>.</p>


          

        </div>
      </article>
    </main>
    <footer id="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-sm-12 col-md-3">
        <div class="content">
          <div class="brand">
            <img src="/assets/shared/dart/logo+text/horizontal/mono.svg" alt="Dart logo" class="brand"/>
          </div>
          <h4><a href="/terms">Terms</a> | <a href="https://policies.google.com/privacy">Privacy</a></h4>
          <style>.menu .material-icons { font-size: 14px; }</style><ul class="menu">
            <li>Site&nbsp;<a href="http://creativecommons.org/licenses/by/3.0/" class="no-automatic-external">CC&nbsp;BY&nbsp;3.0</a></li>
            <li>
              <a href="https://github.com/dart-lang/site-www"
                 title="This site's source is on GitHub."
                 class="no-automatic-external"><i class="fab fa-github fa-sm"></i></a>
              &nbsp;
              <a href="https://github.com/dart-lang/site-www/issues"
                 title="File an issue about this site."
                 class="no-automatic-external"><i class="fas fa-bug fa-sm"></i></a>
              &nbsp;
              <a 
                 title="Site built on 2018/07/14 09:51 CST"
                 
                 class="no-automatic-external"><i class="material-icons">build</i></a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-sm-4 col-md-3">
        <div class="content">
          <h4>技术</h4>
          <ul>
            <li><a href="https://flutter.io">Dart 移动开发 (Flutter)</a></li>
            <li><a href="https://webdev.dartlang.org">Dart web 开发</a></li>
            <li><a href="/dart-vm">Dart 服务器开发</a></li>
            <li><a href="https://dart-lang.github.io/observatory/">Observatory 工具</a></li>
            <li><a href="/guides/libraries">Dart 库</a></li>
            <li><a href="/guides/language">Dart 编程语言</a></li>
          </ul>
        </div>
      </div>

      <div class="col-sm-4 col-md-3">
        <div class="content">
          <h4>资源</h4>
          <ul>
            <li><a href="https://api.dartlang.org/dev">API 参考</a></li>
            <li><a href="https://dartpad.dartlang.org/">DartPad</a></li>
            <li><a href="https://pub.dartlang.org/">Pub packages</a></li>
            <li><a href="http://news.dartlang.org/">Dart 新闻</a></li>
            <li><a href="https://github.com/dart-lang/sdk/issues">Dart bugs 和 <br> 新需求</a></li>
          </ul>
        </div>
      </div>

      <div class="col-sm-4 col-md-3">
        <div class="content">
          <h4>社区</h4>
          <ul>
            <li><a href="/community">支持和邮件列表</a></li>
            <li><a href="/community/who-uses-dart">谁在用Dart</a></li>
            <li><a href="http://stackoverflow.com/questions/tagged/dart">Stack Overflow</a></li>
            <li>G+ <a href="https://plus.google.com/communities/114566943291919232850">社区</a> &
                <a href="https://plus.google.com/b/109866369054280216564/+dartlang">公告组</a></li>
            <li><a href="https://gitter.im/dart-lang/home">Gitter聊天室</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>
